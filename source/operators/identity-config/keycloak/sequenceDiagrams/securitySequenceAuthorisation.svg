<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="636px" preserveAspectRatio="none" style="width:868px;height:636px;background:#FFFFFF;" version="1.1" viewBox="0 0 868 636" width="868px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="610.0742" x="20" y="53.2969"/><rect fill="none" height="132.3359" style="stroke:#000000;stroke-width:1.5;" width="695.6934" x="165.5439" y="171.8281"/><rect fill="none" height="265.6719" style="stroke:#000000;stroke-width:1.5;" width="620.0742" x="10" y="318.1641"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="394.6846" x="20" y="342.2969"/><g><title>API Consumer</title><rect fill="#000000" fill-opacity="0.00000" height="564.5391" width="8" x="81.9932" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="85" x2="85" y1="36.2969" y2="600.8359"/></g><g><title>Product Catalogue Component</title><rect fill="#000000" fill-opacity="0.00000" height="564.5391" width="8" x="286.1143" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="289.5439" x2="289.5439" y1="36.2969" y2="600.8359"/></g><g><title>OAuth Token Endpoint</title><rect fill="#000000" fill-opacity="0.00000" height="564.5391" width="8" x="530.1978" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="533.3213" x2="533.3213" y1="36.2969" y2="600.8359"/></g><g><title>OAuth Introspection Endpoint</title><rect fill="#000000" fill-opacity="0.00000" height="564.5391" width="8" x="736.6558" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="740.0742" x2="740.0742" y1="36.2969" y2="600.8359"/></g><g class="participant participant-head" data-participant="apiConsumer"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111.9863" x="30" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.9863" x="37" y="24.9951">API Consumer</text></g><g class="participant participant-tail" data-participant="apiConsumer"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111.9863" x="30" y="599.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.9863" x="37" y="619.8311">API Consumer</text></g><g class="participant participant-head" data-participant="prodCat"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="229.1406" x="175.5439" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="182.5439" y="24.9951">Product Catalogue Component</text></g><g class="participant participant-tail" data-participant="prodCat"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="229.1406" x="175.5439" y="599.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="182.5439" y="619.8311">Product Catalogue Component</text></g><g class="participant participant-head" data-participant="oauthToken"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="171.7529" x="448.3213" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.7529" x="455.3213" y="24.9951">OAuth Token Endpoint</text></g><g class="participant participant-tail" data-participant="oauthToken"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="171.7529" x="448.3213" y="599.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.7529" x="455.3213" y="619.8311">OAuth Token Endpoint</text></g><g class="participant participant-head" data-participant="oauthIntrospection"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221.1631" x="630.0742" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="207.1631" x="637.0742" y="24.9951">OAuth Introspection Endpoint</text></g><g class="participant participant-tail" data-participant="oauthIntrospection"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221.1631" x="630.0742" y="599.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="207.1631" x="637.0742" y="619.8311">OAuth Introspection Endpoint</text></g><path d="M20,53.2969 L228.8267,53.2969 L228.8267,60.4297 L218.8267,70.4297 L20,70.4297 L20,53.2969" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="610.0742" x="20" y="53.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="163.8267" x="35" y="66.3638">client-credentials flow</text><g class="message" data-participant-1="apiConsumer" data-participant-2="oauthToken"><polygon fill="#181818" points="522.1978,87.5625,532.1978,91.5625,522.1978,95.5625,526.1978,91.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="85.9932" x2="528.1978" y1="91.5625" y2="91.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.1826" x="92.9932" y="86.4966">Request Token</text></g><g class="message" data-participant-1="oauthToken" data-participant-2="apiConsumer"><polygon fill="#181818" points="96.9932,116.6953,86.9932,120.6953,96.9932,124.6953,92.9932,120.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="90.9932" x2="533.1978" y1="120.6953" y2="120.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.4097" x="102.9932" y="115.6294">Issue Token</text></g><g class="message" data-participant-1="apiConsumer" data-participant-2="prodCat"><polygon fill="#181818" points="278.1143,152.8281,288.1143,156.8281,278.1143,160.8281,282.1143,156.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="85.9932" x2="284.1143" y1="156.8281" y2="156.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.3213" x="92.9932" y="151.7622">Request resource</text></g><path d="M165.5439,171.8281 L229.9868,171.8281 L229.9868,178.9609 L219.9868,188.9609 L165.5439,188.9609 L165.5439,171.8281" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="132.3359" style="stroke:#000000;stroke-width:1.5;" width="695.6934" x="165.5439" y="171.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="180.5439" y="184.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79.6265" x="244.9868" y="184.0386">[trust token]</text><g class="message" data-participant-1="prodCat" data-participant-2="prodCat"><line style="stroke:#181818;stroke-width:1;" x1="290.1143" x2="332.1143" y1="210.0938" y2="210.0938"/><line style="stroke:#181818;stroke-width:1;" x1="332.1143" x2="332.1143" y1="210.0938" y2="223.0938"/><line style="stroke:#181818;stroke-width:1;" x1="291.1143" x2="332.1143" y1="223.0938" y2="223.0938"/><polygon fill="#181818" points="301.1143,219.0938,291.1143,223.0938,301.1143,227.0938,297.1143,223.0938" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230.0835" x="297.1143" y="205.0278">Read audience and role from token</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="165.5439" x2="861.2373" y1="232.0938" y2="232.0938"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="124.6201" x="170.5439" y="242.3042">[Do not trust token]</text><g class="message" data-participant-1="prodCat" data-participant-2="oauthIntrospection"><polygon fill="#181818" points="728.6558,263.0313,738.6558,267.0313,728.6558,271.0313,732.6558,267.0313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="290.1143" x2="734.6558" y1="267.0313" y2="267.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.2241" x="297.1143" y="261.9653">check token audience and role</text></g><g class="message" data-participant-1="oauthIntrospection" data-participant-2="prodCat"><polygon fill="#181818" points="301.1143,292.1641,291.1143,296.1641,301.1143,300.1641,297.1143,296.1641" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="295.1143" x2="739.6558" y1="296.1641" y2="296.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.269" x="307.1143" y="291.0981">provide token audience and role</text></g><path d="M10,318.1641 L74.4429,318.1641 L74.4429,325.2969 L64.4429,335.2969 L10,335.2969 L10,318.1641" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="265.6719" style="stroke:#000000;stroke-width:1.5;" width="620.0742" x="10" y="318.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="331.231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79.3149" x="89.4429" y="330.3745">[valid token]</text><path d="M20,342.2969 L84.4429,342.2969 L84.4429,349.4297 L74.4429,359.4297 L20,359.4297 L20,342.2969" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="394.6846" x="20" y="342.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="355.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="142.7314" x="99.4429" y="354.5073">[Valid role for request]</text><g class="message" data-participant-1="prodCat" data-participant-2="apiConsumer"><polygon fill="#181818" points="96.9932,376.5625,86.9932,380.5625,96.9932,384.5625,92.9932,380.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="90.9932" x2="289.1143" y1="380.5625" y2="380.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.1211" x="102.9932" y="375.4966">provide requested resource</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="20" x2="414.6846" y1="389.5625" y2="389.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="153.3125" x="25" y="399.7729">[Invalid role for request]</text><g class="message" data-participant-1="prodCat" data-participant-2="apiConsumer"><polygon fill="#181818" points="96.9932,420.5,86.9932,424.5,96.9932,428.5,92.9932,424.5" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="90.9932" x2="289.1143" y1="424.5" y2="424.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.1748" x="102.9932" y="419.4341">401 Unauthorised</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="630.0742" y1="440.5" y2="440.5"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96.2661" x="15" y="450.7104">[expired token]</text><g class="message" data-participant-1="prodCat" data-participant-2="apiConsumer"><polygon fill="#181818" points="96.9932,471.4375,86.9932,475.4375,96.9932,479.4375,92.9932,475.4375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="90.9932" x2="289.1143" y1="475.4375" y2="475.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.1748" x="102.9932" y="470.3716">401 Unauthorised</text></g><g class="message" data-participant-1="apiConsumer" data-participant-2="apiConsumer"><line style="stroke:#181818;stroke-width:1;" x1="85.9932" x2="127.9932" y1="504.5703" y2="504.5703"/><line style="stroke:#181818;stroke-width:1;" x1="127.9932" x2="127.9932" y1="504.5703" y2="517.5703"/><line style="stroke:#181818;stroke-width:1;" x1="86.9932" x2="127.9932" y1="517.5703" y2="517.5703"/><polygon fill="#181818" points="96.9932,513.5703,86.9932,517.5703,96.9932,521.5703,92.9932,517.5703" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.8965" x="92.9932" y="499.5044">Check own token</text></g><g class="message" data-participant-1="apiConsumer" data-participant-2="oauthToken"><polygon fill="#181818" points="522.1978,542.7031,532.1978,546.7031,522.1978,550.7031,526.1978,546.7031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="85.9932" x2="528.1978" y1="546.7031" y2="546.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.9111" x="92.9932" y="541.6372">Refresh token</text></g><g class="message" data-participant-1="oauthToken" data-participant-2="apiConsumer"><polygon fill="#181818" points="96.9932,571.8359,86.9932,575.8359,96.9932,579.8359,92.9932,575.8359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="90.9932" x2="533.1978" y1="575.8359" y2="575.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.6436" x="102.9932" y="570.77">Provide new token</text></g><!--SRC=[dLBBJiCm4BpdArQvLmA9KuMGgi8X9oe4t2rxsrfrlSQFbizduoIjqxH8a4kowvdPdOcTy55BxOIDK2zM3Ip9XhH7NuC889mUwieLIET9BKLi8VMAlvECmBKmj4d84dj75csiHoGIAMxVQOSsyruNN49NlrZbI5ybD3Pw2Wvbr5GIn_spmCPJSY2DvlapwL7nMmiJO6teM04_XIcOFHLhpU4DlnA6s6qr0J_EHk0c13RRGT6gwaAtp-WiwZ5GyX8hOI94dxWLJtE6HCT4eK0anLOaWh0AF1c4jQTzpqGJ49u9BFsgE0ro3dABSjV1fpD60eFj2m4-FcY5DoLo9Epq88nMnLvjxpFtEZVaEPcSK3w-4lefa65aZqTrphIbvJGQU_YV-CFTFNpOrYXv7L1racmYo-AtqtoPIXz_qRcu6qKvXsN-4tIqDyGdTtJDhhUtDod1gpunYyVXobZr0m00]--></g></svg>