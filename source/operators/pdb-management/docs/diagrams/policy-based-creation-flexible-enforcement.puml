@startuml
actor KubernetesAPI
participant Operator
participant DeploymentController
participant PDBController
database Kubernetes as K8s

== Deployment Created ==

KubernetesAPI -> Operator: Deployment Created
Operator -> DeploymentController: Reconcile()

DeploymentController -> DeploymentController: Read Annotations
DeploymentController -> DeploymentController: Lookup Matching Policies

DeploymentController -> DeploymentController: Evaluate Flexible Enforcement
alt Annotation >= minimum
    DeploymentController -> DeploymentController: Accept annotation
else Annotation < minimum
    DeploymentController -> DeploymentController: Enforce minimumClass
    DeploymentController -> Operator: Emit Warning Event (BelowMinimum)
end

DeploymentController -> PDBController: Create/Update PDB
PDBController -> K8s: Apply PodDisruptionBudget
PDBController -> DeploymentController: Return Success/Failure

DeploymentController -> Operator: Record Metrics
DeploymentController -> Operator: Emit Events
@enduml