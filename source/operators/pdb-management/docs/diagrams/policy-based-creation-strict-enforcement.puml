@startuml
actor KubernetesAPI
participant Operator
participant DeploymentController
participant PDBController
database Kubernetes as K8s

== Deployment Created ==

KubernetesAPI -> Operator: Deployment Created
Operator -> DeploymentController: Reconcile()

DeploymentController -> DeploymentController: Read Annotations
DeploymentController -> DeploymentController: Lookup Matching Policies
DeploymentController -> DeploymentController: Apply Strict Enforcement
note right of DeploymentController
Annotations ignored entirely.
Policy dictates availability class.
end note

DeploymentController -> PDBController: Create/Update PDB
PDBController -> K8s: Apply PodDisruptionBudget
PDBController -> DeploymentController: Return Success/Failure

DeploymentController -> Operator: Record Metrics
DeploymentController -> Operator: Emit Events (e.g. PolicyEnforced)
@enduml