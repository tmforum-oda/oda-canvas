<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="641px" preserveAspectRatio="none" style="width:1540px;height:641px;background:#FFFFFF;" version="1.1" viewBox="0 0 1540 641" width="1540px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="309.3281" style="stroke:#000000;stroke-width:1.5;" width="1203.208" x="10" y="190.9609"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="541.5767" x="20" y="286.3594"/><rect fill="none" height="146.6641" style="stroke:#000000;stroke-width:1.5;" width="1056.3584" x="20" y="346.625"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1193.208" x="20" y="514.2891"/><g><title>Component One Implementation</title><rect fill="#000000" fill-opacity="0.00000" height="570.3906" width="8" x="147.9258" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="151" x2="151" y1="36.2969" y2="606.6875"/></g><g><title>Service Mesh/API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="570.3906" width="8" x="447.4712" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="451.3657" x2="451.3657" y1="36.2969" y2="606.6875"/></g><g><title>Component Two Implementation</title><rect fill="#000000" fill-opacity="0.00000" height="570.3906" width="8" x="846.2661" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="849.3096" x2="849.3096" y1="36.2969" y2="606.6875"/></g><g><title>Identity Management System</title><rect fill="#000000" fill-opacity="0.00000" height="570.3906" width="8" x="1088.7153" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1092.2227" x2="1092.2227" y1="36.2969" y2="606.6875"/></g><g class="participant participant-head" data-participant="Comp1Imp"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="243.8516" x="30" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="229.8516" x="37" y="24.9951">Component One Implementation</text></g><g class="participant participant-tail" data-participant="Comp1Imp"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="243.8516" x="30" y="605.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="229.8516" x="37" y="625.6826">Component One Implementation</text></g><g class="participant participant-head" data-participant="ServiceMesh"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="200.2109" x="351.3657" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186.2109" x="358.3657" y="24.9951">Service Mesh/API Gateway</text></g><g class="participant participant-tail" data-participant="ServiceMesh"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="200.2109" x="351.3657" y="605.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186.2109" x="358.3657" y="625.6826">Service Mesh/API Gateway</text></g><g class="participant participant-head" data-participant="Comp2Imp"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="243.9131" x="728.3096" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="229.9131" x="735.3096" y="24.9951">Component Two Implementation</text></g><g class="participant participant-tail" data-participant="Comp2Imp"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="243.9131" x="728.3096" y="605.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="229.9131" x="735.3096" y="625.6826">Component Two Implementation</text></g><g class="participant participant-head" data-participant="IDM"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="220.9854" x="982.2227" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="206.9854" x="989.2227" y="24.9951">Identity Management System</text></g><g class="participant participant-tail" data-participant="IDM"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="220.9854" x="982.2227" y="605.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="206.9854" x="989.2227" y="625.6826">Identity Management System</text></g><g class="message" data-participant-1="Comp1Imp" data-participant-2="IDM"><polygon fill="#181818" points="1080.7153,73.9961,1090.7153,77.9961,1080.7153,81.9961,1084.7153,77.9961" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="151.9258" x2="1086.7153" y1="77.9961" y2="77.9961"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.999" x="158.9258" y="72.9302">Authenticate with clientId/secret</text></g><path d="M1097,51.2969 L1097,91.2969 L1533,91.2969 L1533,61.2969 L1523,51.2969 L1097,51.2969" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1523,51.2969 L1523,61.2969 L1533,61.2969 L1523,51.2969" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="415.0542" x="1103" y="68.3638">Using the system user created as part of the bootstrap usecase</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="375.4702" x="1103" y="83.4966">where the clientId/secret is stored as a kubernetes secret</text><g class="message" data-participant-1="IDM" data-participant-2="Comp1Imp"><polygon fill="#181818" points="162.9258,113.6953,152.9258,117.6953,162.9258,121.6953,158.9258,117.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="156.9258" x2="1091.7153" y1="117.6953" y2="117.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.5776" x="168.9258" y="112.6294">JWT token</text></g><g class="message" data-participant-1="Comp1Imp" data-participant-2="ServiceMesh"><polygon fill="#181818" points="439.4712,142.8281,449.4712,146.8281,439.4712,150.8281,443.4712,146.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="151.9258" x2="445.4712" y1="146.8281" y2="146.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.9336" x="158.9258" y="141.7622">Request to API with token</text></g><g class="message" data-participant-1="ServiceMesh" data-participant-2="IDM"><polygon fill="#181818" points="1080.7153,171.9609,1090.7153,175.9609,1080.7153,179.9609,1084.7153,175.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="451.4712" x2="1086.7153" y1="175.9609" y2="175.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.3452" x="458.4712" y="170.895">Validate token</text></g><path d="M10,190.9609 L138.4399,190.9609 L138.4399,198.0938 L128.4399,208.0938 L10,208.0938 L10,190.9609" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="309.3281" style="stroke:#000000;stroke-width:1.5;" width="1203.208" x="10" y="190.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83.4399" x="25" y="204.0278">Valid token</text><g class="message" data-participant-1="IDM" data-participant-2="ServiceMesh"><polygon fill="#181818" points="462.4712,225.2266,452.4712,229.2266,462.4712,233.2266,458.4712,229.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="456.4712" x2="1091.7153" y1="229.2266" y2="229.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.4448" x="468.4712" y="224.1606">Token is valid</text></g><g class="message" data-participant-1="ServiceMesh" data-participant-2="ServiceMesh"><line style="stroke:#181818;stroke-width:1;" x1="451.4712" x2="493.4712" y1="258.3594" y2="258.3594"/><line style="stroke:#181818;stroke-width:1;" x1="493.4712" x2="493.4712" y1="258.3594" y2="271.3594"/><line style="stroke:#181818;stroke-width:1;" x1="452.4712" x2="493.4712" y1="271.3594" y2="271.3594"/><polygon fill="#181818" points="462.4712,267.3594,452.4712,271.3594,462.4712,275.3594,458.4712,271.3594" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="384.7949" x="458.4712" y="253.2935">Test if audience exists against Component Implementation</text></g><path d="M20,286.3594 L384.0459,286.3594 L384.0459,293.4922 L374.0459,303.4922 L20,303.4922 L20,286.3594" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="541.5767" x="20" y="286.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="319.0459" x="35" y="299.4263">No role against component implementation</text><g class="message" data-participant-1="ServiceMesh" data-participant-2="Comp1Imp"><polygon fill="#181818" points="162.9258,320.625,152.9258,324.625,162.9258,328.625,158.9258,324.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="156.9258" x2="450.4712" y1="324.625" y2="324.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.5454" x="168.9258" y="319.5591">Return Unauthorized (HTTP 401) response</text></g><path d="M20,346.625 L452.5625,346.625 L452.5625,353.7578 L442.5625,363.7578 L20,363.7578 L20,346.625" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="146.6641" style="stroke:#000000;stroke-width:1.5;" width="1056.3584" x="20" y="346.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="387.5625" x="35" y="359.6919">At least one role against component implementation</text><g class="message" data-participant-1="ServiceMesh" data-participant-2="Comp2Imp"><polygon fill="#181818" points="838.2661,380.8906,848.2661,384.8906,838.2661,388.8906,842.2661,384.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="451.4712" x2="844.2661" y1="384.8906" y2="384.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255.3853" x="458.4712" y="379.8247">Request to component implementation</text></g><g class="message" data-participant-1="Comp2Imp" data-participant-2="Comp2Imp"><line style="stroke:#181818;stroke-width:1;" x1="850.2661" x2="892.2661" y1="414.0234" y2="414.0234"/><line style="stroke:#181818;stroke-width:1;" x1="892.2661" x2="892.2661" y1="414.0234" y2="427.0234"/><line style="stroke:#181818;stroke-width:1;" x1="851.2661" x2="892.2661" y1="427.0234" y2="427.0234"/><polygon fill="#181818" points="861.2661,423.0234,851.2661,427.0234,861.2661,431.0234,857.2661,427.0234" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.0923" x="857.2661" y="408.9575">Apply role-based access control</text></g><g class="message" data-participant-1="Comp2Imp" data-participant-2="ServiceMesh"><polygon fill="#181818" points="462.4712,452.1563,452.4712,456.1563,462.4712,460.1563,458.4712,456.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="456.4712" x2="849.2661" y1="456.1563" y2="456.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282.5024" x="468.4712" y="451.0903">Response from component implementation</text></g><g class="message" data-participant-1="ServiceMesh" data-participant-2="Comp1Imp"><polygon fill="#181818" points="162.9258,481.2891,152.9258,485.2891,162.9258,489.2891,158.9258,485.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="156.9258" x2="450.4712" y1="485.2891" y2="485.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.3892" x="168.9258" y="480.2231">Response from API</text></g><path d="M20,514.2891 L160.9448,514.2891 L160.9448,521.4219 L150.9448,531.4219 L20,531.4219 L20,514.2891" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1193.208" x="20" y="514.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="95.9448" x="35" y="527.356">Invalid token</text><g class="message" data-participant-1="IDM" data-participant-2="ServiceMesh"><polygon fill="#181818" points="462.4712,548.5547,452.4712,552.5547,462.4712,556.5547,458.4712,552.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="456.4712" x2="1091.7153" y1="552.5547" y2="552.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.3501" x="468.4712" y="547.4888">Token not valid</text></g><g class="message" data-participant-1="ServiceMesh" data-participant-2="Comp1Imp"><polygon fill="#181818" points="162.9258,577.6875,152.9258,581.6875,162.9258,585.6875,158.9258,581.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="156.9258" x2="450.4712" y1="581.6875" y2="581.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.5454" x="168.9258" y="576.6216">Return Unauthorized (HTTP 401) response</text></g><!--SRC=[fLDDRzim3BtxLn0vROUW7zWf60O46x1wGBPYTRUp8ZEsK5jo9JfPzkj7IfvdDzrQh0Py4CNt-4W-TSgJqQPJbk2zQxkBlEr01LZ8mLday1UBmD46MpufCiukicu2kq6_Dnet6Eg87CuWWRFrTGuV5U517USeuRyyBLOSt3-BvHys4P6NV6_e21jbLHMpuUOO2Dj5bcLZ9yjt4R62TK-r83HhWOEX6dHZE92NPm6rHygiunjlgfeouEys65i1Wo14MkW3Uk1C9YX5WgW2juifM-Sea5UTP6aLC58SQlGOxn_K0XCWaFE9IC5TlqLlaP33IGpQ4aJGdqxUBeTEFdqlWDmTsdcRqosiu2lUznY84q4s41jEe6bUciuAlgd6b3AOWRVohkzIT0X9ErDaKhE2GcwbdRqadwJDTN6wQ38xK7t90s6Fu0yJY4TGAMD3CaNomTm3aJYf-kp0kmP7Y1uXvXJoY9vnPZ8awhs5MwlO7CwRdxoFLrT5SGrlpYzUWyV0pCCkUI4J4Mk21XLNvyelboFFOBQo9qd6npDZM7TTSunobbls89jBQmo1wInnz549lCYfXDGnxBnhdwVYjpSVsczAn0uSPoZ_uA_Sxf_jC7uBVxVOVwmqolW5]--></g></svg>