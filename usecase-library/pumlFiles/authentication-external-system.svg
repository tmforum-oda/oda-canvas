<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="711px" preserveAspectRatio="none" style="width:1397px;height:711px;background:#FFFFFF;" version="1.1" viewBox="0 0 1397 711" width="1397px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="309.3281" style="stroke:#000000;stroke-width:1.5;" width="1116.0566" x="197.4033" y="214.8281"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="422.0503" x="207.4033" y="310.2266"/><rect fill="none" height="146.6641" style="stroke:#000000;stroke-width:1.5;" width="985.7158" x="207.4033" y="370.4922"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1106.0566" x="207.4033" y="538.1563"/><g><title>External System Operations</title><rect fill="#000000" fill-opacity="0.00000" height="549.2578" width="8" x="102.2017" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="106" x2="106" y1="81.2969" y2="630.5547"/></g><g><title>System User</title><rect fill="#000000" fill-opacity="0.00000" height="549.2578" width="8" x="264.6865" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="268.4033" x2="268.4033" y1="81.2969" y2="630.5547"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="549.2578" width="8" x="564.2319" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="568.0103" x2="568.0103" y1="81.2969" y2="630.5547"/></g><g><title>Component Implementation</title><rect fill="#000000" fill-opacity="0.00000" height="549.2578" width="8" x="963.0269" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="966.5791" x2="966.5791" y1="81.2969" y2="630.5547"/></g><g><title>Identity Management System</title><rect fill="#000000" fill-opacity="0.00000" height="549.2578" width="8" x="1188.9673" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1192.4746" x2="1192.4746" y1="81.2969" y2="630.5547"/></g><g><title>Operations</title><rect fill="#000000" fill-opacity="0.00000" height="549.2578" width="8" x="1350.9429" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1354.46" x2="1354.46" y1="81.2969" y2="630.5547"/></g><g class="participant participant-head" data-participant="externalSystemOperations"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196.4033" x="5" y="77.9951">External System Operations</text><ellipse cx="106.2017" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M106.2017,21.5 L106.2017,48.5 M93.2017,29.5 L119.2017,29.5 M106.2017,48.5 L93.2017,63.5 M106.2017,48.5 L119.2017,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="externalSystemOperations"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196.4033" x="5" y="642.5498">External System Operations</text><ellipse cx="106.2017" cy="654.3516" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M106.2017,662.3516 L106.2017,689.3516 M93.2017,670.3516 L119.2017,670.3516 M106.2017,689.3516 L93.2017,704.3516 M106.2017,689.3516 L119.2017,704.3516" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="SystemUser"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.5664" x="217.4033" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.5664" x="224.4033" y="69.9951">System User</text></g><g class="participant participant-tail" data-participant="SystemUser"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.5664" x="217.4033" y="629.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.5664" x="224.4033" y="649.5498">System User</text></g><g class="participant participant-head" data-participant="APIGateway"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4434" x="517.0103" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="524.0103" y="69.9951">API Gateway</text></g><g class="participant participant-tail" data-participant="APIGateway"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4434" x="517.0103" y="629.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="524.0103" y="649.5498">API Gateway</text></g><g class="participant participant-head" data-participant="ComponentImplementation"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="210.8955" x="861.5791" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196.8955" x="868.5791" y="69.9951">Component Implementation</text></g><g class="participant participant-tail" data-participant="ComponentImplementation"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="210.8955" x="861.5791" y="629.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196.8955" x="868.5791" y="649.5498">Component Implementation</text></g><g class="participant participant-head" data-participant="IdentityManagementSystem"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="220.9854" x="1082.4746" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="206.9854" x="1089.4746" y="69.9951">Identity Management System</text></g><g class="participant participant-tail" data-participant="IdentityManagementSystem"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="220.9854" x="1082.4746" y="629.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="206.9854" x="1089.4746" y="649.5498">Identity Management System</text></g><g class="participant participant-head" data-participant="Operations"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.9658" x="1313.46" y="77.9951">Operations</text><ellipse cx="1354.9429" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M1354.9429,21.5 L1354.9429,48.5 M1341.9429,29.5 L1367.9429,29.5 M1354.9429,48.5 L1341.9429,63.5 M1354.9429,48.5 L1367.9429,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Operations"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.9658" x="1313.46" y="642.5498">Operations</text><ellipse cx="1354.9429" cy="654.3516" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M1354.9429,662.3516 L1354.9429,689.3516 M1341.9429,670.3516 L1367.9429,670.3516 M1354.9429,689.3516 L1341.9429,704.3516 M1354.9429,689.3516 L1367.9429,704.3516" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="message" data-participant-1="SystemUser" data-participant-2="IdentityManagementSystem"><polygon fill="#181818" points="1180.9673,108.4297,1190.9673,112.4297,1180.9673,116.4297,1184.9673,112.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="268.6865" x2="1186.9673" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.999" x="275.6865" y="107.3638">Authenticate with clientId/secret</text></g><g class="message" data-participant-1="IdentityManagementSystem" data-participant-2="SystemUser"><polygon fill="#181818" points="279.6865,137.5625,269.6865,141.5625,279.6865,145.5625,275.6865,141.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="273.6865" x2="1191.9673" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.5776" x="285.6865" y="136.4966">JWT token</text></g><g class="message" data-participant-1="SystemUser" data-participant-2="APIGateway"><polygon fill="#181818" points="556.2319,166.6953,566.2319,170.6953,556.2319,174.6953,560.2319,170.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="268.6865" x2="562.2319" y1="170.6953" y2="170.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.9336" x="275.6865" y="165.6294">Request to API with token</text></g><g class="message" data-participant-1="APIGateway" data-participant-2="IdentityManagementSystem"><polygon fill="#181818" points="1180.9673,195.8281,1190.9673,199.8281,1180.9673,203.8281,1184.9673,199.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="568.2319" x2="1186.9673" y1="199.8281" y2="199.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.3452" x="575.2319" y="194.7622">Validate token</text></g><path d="M197.4033,214.8281 L325.8433,214.8281 L325.8433,221.9609 L315.8433,231.9609 L197.4033,231.9609 L197.4033,214.8281" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="309.3281" style="stroke:#000000;stroke-width:1.5;" width="1116.0566" x="197.4033" y="214.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83.4399" x="212.4033" y="227.895">Valid token</text><g class="message" data-participant-1="IdentityManagementSystem" data-participant-2="APIGateway"><polygon fill="#181818" points="579.2319,249.0938,569.2319,253.0938,579.2319,257.0938,575.2319,253.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="573.2319" x2="1191.9673" y1="253.0938" y2="253.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.4448" x="585.2319" y="248.0278">Token is valid</text></g><g class="message" data-participant-1="APIGateway" data-participant-2="APIGateway"><line style="stroke:#181818;stroke-width:1;" x1="568.2319" x2="610.2319" y1="282.2266" y2="282.2266"/><line style="stroke:#181818;stroke-width:1;" x1="610.2319" x2="610.2319" y1="282.2266" y2="295.2266"/><line style="stroke:#181818;stroke-width:1;" x1="569.2319" x2="610.2319" y1="295.2266" y2="295.2266"/><polygon fill="#181818" points="579.2319,291.2266,569.2319,295.2266,579.2319,299.2266,575.2319,295.2266" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="384.7949" x="575.2319" y="277.1606">Test if audience exists against Component Implementation</text></g><path d="M207.4033,310.2266 L571.4492,310.2266 L571.4492,317.3594 L561.4492,327.3594 L207.4033,327.3594 L207.4033,310.2266" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="422.0503" x="207.4033" y="310.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="319.0459" x="222.4033" y="323.2935">No role against component implementation</text><g class="message" data-participant-1="APIGateway" data-participant-2="SystemUser"><polygon fill="#181818" points="279.6865,344.4922,269.6865,348.4922,279.6865,352.4922,275.6865,348.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="273.6865" x2="567.2319" y1="348.4922" y2="348.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.5454" x="285.6865" y="343.4263">Return Unauthorized (HTTP 401) response</text></g><path d="M207.4033,370.4922 L639.9658,370.4922 L639.9658,377.625 L629.9658,387.625 L207.4033,387.625 L207.4033,370.4922" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="146.6641" style="stroke:#000000;stroke-width:1.5;" width="985.7158" x="207.4033" y="370.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="387.5625" x="222.4033" y="383.5591">At least one role against component implementation</text><g class="message" data-participant-1="APIGateway" data-participant-2="ComponentImplementation"><polygon fill="#181818" points="955.0269,404.7578,965.0269,408.7578,955.0269,412.7578,959.0269,408.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="568.2319" x2="961.0269" y1="408.7578" y2="408.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255.3853" x="575.2319" y="403.6919">Request to component implementation</text></g><g class="message" data-participant-1="ComponentImplementation" data-participant-2="ComponentImplementation"><line style="stroke:#181818;stroke-width:1;" x1="967.0269" x2="1009.0269" y1="437.8906" y2="437.8906"/><line style="stroke:#181818;stroke-width:1;" x1="1009.0269" x2="1009.0269" y1="437.8906" y2="450.8906"/><line style="stroke:#181818;stroke-width:1;" x1="968.0269" x2="1009.0269" y1="450.8906" y2="450.8906"/><polygon fill="#181818" points="978.0269,446.8906,968.0269,450.8906,978.0269,454.8906,974.0269,450.8906" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.0923" x="974.0269" y="432.8247">Apply role-based access control</text></g><g class="message" data-participant-1="ComponentImplementation" data-participant-2="APIGateway"><polygon fill="#181818" points="579.2319,476.0234,569.2319,480.0234,579.2319,484.0234,575.2319,480.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="573.2319" x2="966.0269" y1="480.0234" y2="480.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282.5024" x="585.2319" y="474.9575">Response from component implementation</text></g><g class="message" data-participant-1="APIGateway" data-participant-2="SystemUser"><polygon fill="#181818" points="279.6865,505.1563,269.6865,509.1563,279.6865,513.1563,275.6865,509.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="273.6865" x2="567.2319" y1="509.1563" y2="509.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.3892" x="285.6865" y="504.0903">Response from API</text></g><path d="M207.4033,538.1563 L348.3481,538.1563 L348.3481,545.2891 L338.3481,555.2891 L207.4033,555.2891 L207.4033,538.1563" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1106.0566" x="207.4033" y="538.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="95.9448" x="222.4033" y="551.2231">Invalid token</text><g class="message" data-participant-1="IdentityManagementSystem" data-participant-2="APIGateway"><polygon fill="#181818" points="579.2319,572.4219,569.2319,576.4219,579.2319,580.4219,575.2319,576.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="573.2319" x2="1191.9673" y1="576.4219" y2="576.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.3501" x="585.2319" y="571.356">Token not valid</text></g><g class="message" data-participant-1="APIGateway" data-participant-2="SystemUser"><polygon fill="#181818" points="279.6865,601.5547,269.6865,605.5547,279.6865,609.5547,275.6865,605.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="273.6865" x2="567.2319" y1="605.5547" y2="605.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.5454" x="285.6865" y="600.4888">Return Unauthorized (HTTP 401) response</text></g><!--SRC=[fLDDJyCm3BtlLrWxmM4294uJGfeGWY7n8HXmDgaP4MrI4XSOlnud3LiwM96WKgN6ptv-TbvHiNL0xqpEO7cpy4pLPKqEMLlZ0JqCZnC8BGehU3YeqR5MkaR32Rxrv69PoWxdRjxaQdg2J6-uY7boX7JkvXtPghQ634-hkgHAFcBNMBJ4e0js6QQ5n3Klpj7WF2ObKO7Y2uGLcaOO3Z1kPJNeO90DDphSJ3o6ISDF0LGo4hnfVW9LwZ14iUD9EUASwc3KHtLsFmEspsJMssSR7CCrlJJaMJ93l6tPLcLfFPh7S8UbBeBSr6pkR5EtqHG2UJAs7jbZc8KAq1vU0y5wQKUz90Vb-X6mAMH9YiI9shFuRexQ-Cm3Q_SSQLkT5nQSBMbPefOb-dl9TpNPPiCkkN46RWtABLgdFwY0hTFPx0hsT_UsmP4NQa-HYaoHgPWmb8JINbh_Iyy6rtVk-LVAJRzE7_-ahij5b3vwG2-3erBalJGpBD6Vv8eFUkIsku97PwlV5NT_YZM3vqm2BTSVtkJMgNdzbr-DvOs6_PD5ehPF]--></g></svg>