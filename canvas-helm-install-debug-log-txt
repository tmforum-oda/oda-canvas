NAME: canvas
LAST DEPLOYED: Tue Jan 13 08:52:29 2026
NAMESPACE: canvas
STATUS: deployed
REVISION: 1
USER-SUPPLIED VALUES:
{}

COMPUTED VALUES:
api-operator-apisix:
  IstioGatewayServerhostName: '*'
  IstioGatewaymonitoredNamespaces: components
  apisix:
    apisix:
      serviceNamespace: canvas
      ssl:
        enabled: true
    apisixoperatorreplicaCount: 1
    gateway:
      type: LoadBalancer
    ingress-controller:
      config:
        apisix:
          adminAPIVersion: v3
          serviceFullname: canvas-apisix-admin
          serviceNamespace: canvas
      enabled: true
      serviceNamespace: canvas
    service:
      type: LoadBalancer
  apisixistiooperatordeploymentnamespace: canvas
  apisixoperatorimage:
    apisixopImage: tmforumodacanvas/api-operator-apisix
    apisixopPrereleaseSuffix: null
    apisixopVersion: 1.0.1
    pullPolicy: IfNotPresent
  configmap:
    componentGateway: canvas/component-gateway
    loglevel: "20"
  deployment:
    dataDog:
      enabled: true
    ingressClass:
      enabled: false
      name: nginx
    monitoredNamespaces: components,odacompns-*
  initContainerImage: busybox:1.28
api-operator-istio:
  configmap:
    componentGateway: canvas/component-gateway
    loglevel: "20"
  deployment:
    apiopImage: tmforumodacanvas/api-operator-istio
    apiopImagePullPolicy: IfNotPresent
    apiopVersion: 1.0.1
    credentialName: istio-ingress-cert
    dataDog:
      enabled: true
    hostName: '*'
    httpsRedirect: true
    imagePullPolicy: IfNotPresent
    ingressClass:
      enabled: false
      name: nginx
    istioGateway: true
    keycloak:
      port: 8080
    monitoredNamespaces: components,odacompns-*
    operatorName: api-operator-istio
    operatrorName: api-operator-istio
  enabled: true
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
api-operator-kong:
  IstioGatewayServerhostName: '*'
  IstioGatewaymonitoredNamespaces: components
  configmap:
    componentGateway: canvas/component-gateway
    loglevel: "20"
  deployment:
    dataDog:
      enabled: true
    ingressClass:
      enabled: false
      name: nginx
    monitoredNamespaces: components,odacompns-*
  initContainerImage: busybox:1.28
  kong:
    admin:
      enabled: true
      type: LoadBalancer
    deployment:
      enabled: true
      serviceAccount:
        automountServiceAccountToken: false
        create: true
      test:
        enabled: false
    env:
      admin_access_log: /dev/stdout
      admin_error_log: /dev/stderr
      admin_gui_access_log: /dev/stdout
      admin_gui_error_log: /dev/stderr
      database: postgres
      nginx_worker_processes: "2"
      pg_database: kong
      pg_host: canvas-postgresql-kong.canvas.svc.cluster.local
      pg_password: kong
      pg_user: kong
      portal_api_access_log: /dev/stdout
      portal_api_error_log: /dev/stderr
      prefix: /kong_prefix/
      proxy_access_log: /dev/stdout
      proxy_error_log: /dev/stderr
      router_flavor: traditional
    namespace: kong
    postgresql:
      auth:
        database: kong
        password: kong
        username: kong
      enabled: true
      image:
        repository: bitnamilegacy/postgresql
        tag: 13.11.0-debian-11-r20
      nameOverride: postgresql-kong
    proxy:
      enabled: true
      type: LoadBalancer
  kongistiooperatordeploymentnamespace: canvas
  kongoperatorimage:
    kongopImage: tmforumodacanvas/api-operator-kong
    kongopPrereleaseSuffix: null
    kongopVersion: 1.0.1
    pullPolicy: IfNotPresent
  kongoperatorreplicaCount: 1
apisix-gateway-install:
  enabled: false
canvas-info-service:
  enabled: true
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
  image: tmforumodacanvas/tmf638-service-inventory-api
  imagePullPolicy: IfNotPresent
  mongodb:
    database: svcinv
    image: mongo:6.0
    port: 27017
  persistence:
    accessModes: ReadWriteOnce
    size: 1Gi
  serverUrl: http://info.canvas.svc.cluster.local
  version: 1.0.0
canvas-namespaces:
  certManagerNamespace: cert-manager
  componentNamespace: components
  enabled: true
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
  istio:
    labelEnabledComponent: true
canvas-vault:
  auth_path: jwt-k8s-sman
  enabled: true
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
  vault:
    csi:
      agent:
        enabled: true
        extraArgs: []
        image:
          pullPolicy: IfNotPresent
          repository: hashicorp/vault
          tag: 1.14.8
        logFormat: standard
        logLevel: info
        resources: {}
      daemonSet:
        annotations: {}
        extraLabels: {}
        kubeletRootDir: /var/lib/kubelet
        providersDir: /etc/kubernetes/secrets-store-csi-providers
        securityContext:
          container: {}
          pod: {}
        updateStrategy:
          maxUnavailable: ""
          type: RollingUpdate
      debug: false
      enabled: false
      extraArgs: []
      hmacSecretName: ""
      image:
        pullPolicy: IfNotPresent
        repository: hashicorp/vault-csi-provider
        tag: 1.4.1
      livenessProbe:
        failureThreshold: 2
        initialDelaySeconds: 5
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 3
      pod:
        affinity: {}
        annotations: {}
        extraLabels: {}
        nodeSelector: {}
        tolerations: []
      priorityClassName: ""
      readinessProbe:
        failureThreshold: 2
        initialDelaySeconds: 5
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 3
      resources: {}
      serviceAccount:
        annotations: {}
        extraLabels: {}
      volumeMounts: null
      volumes: null
    global:
      certificate:
        appName: compcrdwebhook
      enabled: true
      externalVaultAddr: ""
      hookImages:
        busybox: busybox:1.35
        kubectl: bitnamilegacy/kubectl:latest
        kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
      image:
        registry: ""
      imagePullSecrets: []
      namespace: canvas-vault
      openshift: false
      psp:
        annotations: |
          seccomp.security.alpha.kubernetes.io/allowedProfileNames: docker/default,runtime/default
          apparmor.security.beta.kubernetes.io/allowedProfileNames: runtime/default
          seccomp.security.alpha.kubernetes.io/defaultProfileName:  runtime/default
          apparmor.security.beta.kubernetes.io/defaultProfileName:  runtime/default
        enable: false
      serverTelemetry:
        prometheusOperator: false
      tlsDisable: false
    injector:
      affinity: |
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: {{ template "vault.name" . }}-agent-injector
                  app.kubernetes.io/instance: "{{ .Release.Name }}"
                  component: webhook
              topologyKey: kubernetes.io/hostname
      agentDefaults:
        cpuLimit: 500m
        cpuRequest: 250m
        memLimit: 128Mi
        memRequest: 64Mi
        template: map
        templateConfig:
          exitOnRetryFailure: true
          staticSecretRenderInterval: ""
      agentImage:
        repository: hashicorp/vault
        tag: 1.14.8
      annotations: {}
      authPath: auth/kubernetes
      certs:
        caBundle: ""
        certName: tls.crt
        keyName: tls.key
        secretName: null
      enabled: false
      externalVaultAddr: ""
      extraEnvironmentVars: {}
      extraLabels: {}
      failurePolicy: Ignore
      hostNetwork: false
      image:
        pullPolicy: IfNotPresent
        repository: hashicorp/vault-k8s
        tag: 1.3.1
      leaderElector:
        enabled: true
      livenessProbe:
        failureThreshold: 2
        initialDelaySeconds: 5
        periodSeconds: 2
        successThreshold: 1
        timeoutSeconds: 5
      logFormat: standard
      logLevel: info
      metrics:
        enabled: false
      namespaceSelector: {}
      nodeSelector: {}
      objectSelector: {}
      podDisruptionBudget: {}
      port: 8080
      priorityClassName: ""
      readinessProbe:
        failureThreshold: 2
        initialDelaySeconds: 5
        periodSeconds: 2
        successThreshold: 1
        timeoutSeconds: 5
      replicas: 1
      resources: {}
      revokeOnShutdown: false
      securityContext:
        container: {}
        pod: {}
      service:
        annotations: {}
      serviceAccount:
        annotations: {}
      startupProbe:
        failureThreshold: 12
        initialDelaySeconds: 5
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 5
      strategy: {}
      tolerations: []
      topologySpreadConstraints: []
      webhook:
        annotations: {}
        failurePolicy: Ignore
        matchPolicy: Exact
        namespaceSelector: {}
        objectSelector: |
          matchExpressions:
          - key: app.kubernetes.io/name
            operator: NotIn
            values:
            - {{ template "vault.name" . }}-agent-injector
        timeoutSeconds: 30
      webhookAnnotations: {}
    nameOverride: vault-hc
    server:
      affinity: |
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: {{ template "vault.name" . }}
                  app.kubernetes.io/instance: "{{ .Release.Name }}"
                  component: server
              topologyKey: kubernetes.io/hostname
      annotations: {}
      auditStorage:
        accessMode: ReadWriteOnce
        annotations: {}
        enabled: false
        mountPath: /vault/audit
        size: 10Gi
        storageClass: null
      authDelegator:
        enabled: true
      dataStorage:
        accessMode: ReadWriteOnce
        annotations: {}
        enabled: true
        mountPath: /vault/data
        size: 128M
        storageClass: null
      debug: true
      dev:
        devRootToken: egalegal
        enabled: false
      enabled: '-'
      enterpriseLicense:
        secretKey: license
        secretName: ""
      extraArgs: ""
      extraContainers: null
      extraEnvironmentVars:
        VAULT_CACERT: /vault/userconfig/canvasvault-tls/ca.crt
        VAULT_TLSCERT: /vault/userconfig/canvasvault-tls/tls.crt
        VAULT_TLSKEY: /vault/userconfig/canvasvault-tls/tls.key
      extraInitContainers: null
      extraLabels: {}
      extraPorts: null
      extraSecretEnvironmentVars: []
      extraVolumes: []
      ha:
        apiAddr: null
        clusterAddr: null
        config: |
          ui = true

          listener "tcp" {
            tls_disable = 1
            address = "[::]:8200"
            cluster_address = "[::]:8201"
          }
          storage "consul" {
            path = "vault"
            address = "HOST_IP:8500"
          }

          service_registration "kubernetes" {}

          # Example configuration for using auto-unseal, using Google Cloud KMS. The
          # GKMS keys must already exist, and the cluster must have a service account
          # that is authorized to access GCP KMS.
          #seal "gcpckms" {
          #   project     = "vault-helm-dev-246514"
          #   region      = "global"
          #   key_ring    = "vault-helm-unseal-kr"
          #   crypto_key  = "vault-helm-unseal-key"
          #}

          # Example configuration for enabling Prometheus metrics.
          # If you are using Prometheus Operator you can enable a ServiceMonitor resource below.
          # You may wish to enable unauthenticated metrics in the listener block above.
          #telemetry {
          #  prometheus_retention_time = "30s"
          #  disable_hostname = true
          #}
        disruptionBudget:
          enabled: true
          maxUnavailable: null
        enabled: false
        raft:
          config: |
            ui = true

            listener "tcp" {
              tls_disable = 1
              address = "[::]:8200"
              cluster_address = "[::]:8201"
              # Enable unauthenticated metrics access (necessary for Prometheus Operator)
              #telemetry {
              #  unauthenticated_metrics_access = "true"
              #}
            }

            storage "raft" {
              path = "/vault/data"
            }

            service_registration "kubernetes" {}
          enabled: false
          setNodeId: false
        replicas: 3
      hostAliases: []
      hostNetwork: false
      image:
        pullPolicy: IfNotPresent
        repository: hashicorp/vault
        tag: 1.14.8
      ingress:
        activeService: true
        annotations: {}
        enabled: false
        extraPaths: []
        hosts:
        - host: chart-example.local
          paths: []
        ingressClassName: ""
        labels: {}
        pathType: Prefix
        tls: []
      livenessProbe:
        enabled: false
        failureThreshold: 2
        initialDelaySeconds: 60
        path: /v1/sys/health?standbyok=true
        periodSeconds: 5
        port: 8200
        successThreshold: 1
        timeoutSeconds: 3
      logFormat: ""
      logLevel: ""
      networkPolicy:
        egress: []
        enabled: false
      nodeSelector: {}
      postStart: []
      preStopSleepSeconds: 5
      priorityClassName: ""
      readinessProbe:
        enabled: true
        failureThreshold: 2
        initialDelaySeconds: 5
        periodSeconds: 5
        port: 8200
        successThreshold: 1
        timeoutSeconds: 3
      resources: {}
      route:
        activeService: true
        annotations: {}
        enabled: false
        host: chart-example.local
        labels: {}
        tls:
          termination: passthrough
      service:
        active:
          annotations: {}
          enabled: true
        annotations: {}
        enabled: true
        externalTrafficPolicy: Cluster
        instanceSelector:
          enabled: true
        ipFamilies: []
        ipFamilyPolicy: ""
        port: 8200
        publishNotReadyAddresses: true
        standby:
          annotations: {}
          enabled: true
        targetPort: 8200
      serviceAccount:
        annotations: {}
        create: true
        createSecret: false
        extraLabels: {}
        name: ""
        serviceDiscovery:
          enabled: true
      shareProcessNamespace: false
      standalone:
        config: |
          ui = true
          listener "tcp" {
            tls_disable = 0
            address = "[::]:8200"
            cluster_address = "[::]:8201"
            tls_cert_file = "/vault/userconfig/canvasvault-tls/tls.crt"
            tls_key_file  = "/vault/userconfig/canvasvault-tls/tls.key"
            tls_client_ca_file = "/vault/userconfig/canvasvault-tls/ca.crt"
          }
          storage "file" {
            path = "/vault/data"
          }
        enabled: true
      statefulSet:
        annotations: {}
        securityContext:
          container:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
          pod:
            fsGroup: 1000
            runAsGroup: 1000
            runAsNonRoot: true
            runAsUser: 100
            supplementalGroups:
            - 1000
      terminationGracePeriodSeconds: 10
      tolerations: []
      topologySpreadConstraints: []
      updateStrategyType: OnDelete
      volumeMounts:
      - mountPath: /tmp
        name: tmpvol
      - mountPath: /vault/userconfig/canvasvault-tls
        name: userconfig-canvasvault-tls
        readOnly: true
      volumes:
      - emptyDir: {}
        name: tmpvol
      - name: userconfig-canvasvault-tls
        secret:
          defaultMode: 420
          secretName: canvasvault-tls
    serverTelemetry:
      prometheusRules:
        enabled: false
        rules: []
        selectors: {}
      serviceMonitor:
        enabled: false
        interval: 30s
        scrapeTimeout: 10s
        selectors: {}
    ui:
      activeVaultPodOnly: false
      annotations: {}
      enabled: false
      externalPort: 8200
      externalTrafficPolicy: Cluster
      publishNotReadyAddresses: true
      serviceIPFamilies: []
      serviceIPFamilyPolicy: ""
      serviceNodePort: null
      serviceType: ClusterIP
      targetPort: 8200
cert-manager-init:
  cert-manager:
    acmesolver:
      image:
        repository: quay.io/jetstack/cert-manager-acmesolver
    affinity: {}
    cainjector:
      affinity: {}
      containerSecurityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
      enabled: true
      extraArgs: []
      image:
        pullPolicy: IfNotPresent
        repository: quay.io/jetstack/cert-manager-cainjector
      nodeSelector:
        kubernetes.io/os: linux
      podLabels: {}
      replicaCount: 1
      resources: {}
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      serviceAccount:
        automountServiceAccountToken: true
        create: true
      strategy: {}
      tolerations: []
      topologySpreadConstraints: []
    clusterResourceNamespace: ""
    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
    enabled: true
    extraArgs: []
    extraEnv: []
    featureGates: ""
    global:
      certificate:
        appName: compcrdwebhook
      commonLabels: {}
      hookImages:
        busybox: busybox:1.35
        kubectl: bitnamilegacy/kubectl:latest
        kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
      image:
        registry: ""
      imagePullSecrets: []
      leaderElection:
        namespace: kube-system
      logLevel: 2
      podSecurityPolicy:
        enabled: false
        useAppArmor: true
      priorityClassName: ""
      rbac:
        aggregateClusterRoles: true
        create: true
    image:
      pullPolicy: IfNotPresent
      repository: quay.io/jetstack/cert-manager-controller
    ingressShim: {}
    installCRDs: true
    maxConcurrentChallenges: 60
    namespace: cert-manager
    nodeSelector:
      kubernetes.io/os: linux
    podLabels: {}
    prometheus:
      enabled: true
      servicemonitor:
        annotations: {}
        enabled: false
        honorLabels: false
        interval: 60s
        labels: {}
        path: /metrics
        prometheusInstance: default
        scrapeTimeout: 30s
        targetPort: 9402
    replicaCount: 1
    resources: {}
    securityContext:
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    serviceAccount:
      automountServiceAccountToken: true
      create: true
    startupapicheck:
      affinity: {}
      backoffLimit: 4
      containerSecurityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
      enabled: true
      extraArgs: []
      image:
        pullPolicy: IfNotPresent
        repository: quay.io/jetstack/cert-manager-ctl
      jobAnnotations:
        helm.sh/hook: post-install
        helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
        helm.sh/hook-weight: "1"
      nodeSelector:
        kubernetes.io/os: linux
      podLabels: {}
      rbac:
        annotations:
          helm.sh/hook: post-install
          helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
          helm.sh/hook-weight: "-5"
      resources: {}
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      serviceAccount:
        annotations:
          helm.sh/hook: post-install
          helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
          helm.sh/hook-weight: "-5"
        automountServiceAccountToken: true
        create: true
      timeout: 1m
      tolerations: []
    strategy: {}
    tolerations: []
    topologySpreadConstraints: []
    volumeMounts: []
    volumes: []
    webhook:
      affinity: {}
      config: null
      containerSecurityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
      extraArgs: []
      hostNetwork: false
      image:
        pullPolicy: IfNotPresent
        repository: quay.io/jetstack/cert-manager-webhook
      livenessProbe:
        failureThreshold: 3
        initialDelaySeconds: 60
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      networkPolicy:
        egress:
        - ports:
          - port: 80
            protocol: TCP
          - port: 443
            protocol: TCP
          - port: 53
            protocol: TCP
          - port: 53
            protocol: UDP
          to:
          - ipBlock:
              cidr: 0.0.0.0/0
        enabled: false
        ingress:
        - from:
          - ipBlock:
              cidr: 0.0.0.0/0
      nodeSelector:
        kubernetes.io/os: linux
      podLabels: {}
      readinessProbe:
        failureThreshold: 3
        initialDelaySeconds: 5
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 1
      replicaCount: 1
      resources: {}
      securePort: 10250
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      serviceAccount:
        automountServiceAccountToken: true
        create: true
      serviceLabels: {}
      serviceType: ClusterIP
      strategy: {}
      timeoutSeconds: 10
      tolerations: []
      topologySpreadConstraints: []
      url: {}
  certificate:
    appName: 'compcrdwebhook '
  certificateDuration: 21600h
  fullnameOverride: ""
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
  istioCert:
    certificate:
      duration: 21600h
      renewBefore: 360h
    namespace: istio-ingress
  leaseWaitTimeonStartup: 80
  nameOverride: ""
  namespace: canvas
component-operator:
  configmap:
    kcrealm: odari
    loglevel: "20"
  credentials:
    pass: adpass
    user: admin
  deployment:
    compopImage: tmforumodacanvas/component-operator
    compopImagePullPolicy: IfNotPresent
    compopVersion: 1.1.0
    credentialName: istio-ingress-cert
    dataDog:
      enabled: false
    hostName: '*'
    httpsRedirect: true
    imagePullPolicy: IfNotPresent
    ingressClass:
      enabled: false
      name: nginx
    istioGateway: true
    keycloak:
      port: 8080
    monitoredNamespaces: components,odacompns-*
    operatorName: component-operator
    operatrorName: component-operator
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
dependentapi-simple-operator:
  enabled: true
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
  image: tmforumodacanvas/dependentapi-simple-operator
  imagePullPolicy: IfNotPresent
  loglevel: "20"
  version: 1.0.0
global:
  certificate:
    appName: compcrdwebhook
  hookImages:
    busybox: busybox:1.35
    kubectl: bitnamilegacy/kubectl:latest
    kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
  image:
    registry: ""
  imagePullSecrets: []
identityconfig-operator-keycloak:
  configmap:
    kcrealm: odari
    loglevel: "20"
  credentials:
    pass: adpass
    user: admin
  deployment:
    credentialName: istio-ingress-cert
    dataDog:
      enabled: false
    hostName: '*'
    httpsRedirect: true
    idkopImage: tmforumodacanvas/identityconfig-operator-keycloak
    idkopVersion: 1.1.0
    idlistkeyImage: tmforumodacanvas/identity-listener-keycloak
    idlistkeyVersion: 1.1.0
    imagePullPolicy: IfNotPresent
    ingressClass:
      enabled: false
      name: nginx
    istioGateway: true
    keycloak:
      http: 8083
      https: 8443
      port: 8080
    monitoredNamespaces: components,odacompns-*
    operatorName: identityconfig-operator-keycloak
    operatrorName: identityconfig-operator-keycloak
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
istioCert:
  certificate:
    duration: 21600h
    renewBefore: 360h
  namespace: istio-ingress
keycloak:
  affinity: {}
  args: []
  auth:
    adminPassword: adpass
    adminUser: admin
    existingSecret: ""
    passwordSecretKey: ""
  autoscaling:
    enabled: false
    maxReplicas: 11
    minReplicas: 1
    targetCPU: ""
    targetMemory: ""
  cache:
    enabled: true
    stackFile: ""
    stackName: kubernetes
  clusterDomain: cluster.local
  command: []
  common:
    exampleValue: common-chart
    global:
      certificate:
        appName: compcrdwebhook
      hookImages:
        busybox: busybox:1.35
        kubectl: bitnamilegacy/kubectl:latest
        kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
      image:
        registry: ""
      imagePullSecrets: []
      imageRegistry: ""
      storageClass: ""
  commonAnnotations: {}
  commonLabels: {}
  configuration: ""
  containerPorts:
    http: 8083
    https: 8443
  containerSecurityContext:
    enabled: true
    runAsNonRoot: true
    runAsUser: 1001
  customLivenessProbe: {}
  customReadinessProbe: {}
  customStartupProbe: {}
  diagnosticMode:
    args:
    - infinity
    command:
    - sleep
    enabled: false
  enabled: true
  existingConfigmap: ""
  externalDatabase:
    database: bitnami_keycloak
    existingSecret: ""
    existingSecretPasswordKey: ""
    host: ""
    password: ""
    port: 5432
    user: bn_keycloak
  extraContainerPorts: []
  extraDeploy: []
  extraEnvVars: []
  extraEnvVarsCM: ""
  extraEnvVarsSecret: ""
  extraStartupArgs: ""
  extraVolumeMounts: []
  extraVolumes: []
  fullnameOverride: ""
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
    imageRegistry: ""
    storageClass: ""
  hostAliases: []
  httpRelativePath: /auth/
  image:
    debug: false
    digest: ""
    pullPolicy: IfNotPresent
    pullSecrets: []
    registry: docker.io
    repository: bitnamilegacy/keycloak
    tag: 20.0.5-debian-11-r2
  ingress:
    annotations: {}
    apiVersion: ""
    enabled: false
    extraHosts: []
    extraPaths: []
    extraRules: []
    extraTls: []
    hostname: keycloak.local
    hosts:
    - name: keycloak.local
      path: /
      tls: false
    ingressClassName: traefik
    path: /
    pathType: ImplementationSpecific
    secrets: []
    selfSigned: false
    servicePort: http
    tls: false
  initContainers: []
  initdbScripts: {}
  initdbScriptsConfigMap: ""
  keycloakConfigCli:
    annotations:
      helm.sh/hook: post-install,post-upgrade,post-rollback
      helm.sh/hook-delete-policy: hook-succeeded,before-hook-creation
      helm.sh/hook-weight: "5"
    args: []
    backoffLimit: 1
    command:
    - java
    - -jar
    - /opt/keycloak-config-cli.jar
    configuration:
      odari.json: |
        {
          "enabled": true,
          "realm": "odari",
          "clients": [
            {
              "clientId": "canvassystem",
              "name": "Canvas System",
              "enabled": true,
              "standardFlowEnabled": false,
              "serviceAccountsEnabled": true
            },
            {
              "clientId": "credentialsmanagement-operator",
              "name": "Credentials Management Operator",
              "enabled": true,
              "standardFlowEnabled": false,
              "serviceAccountsEnabled": true
            }
          ],
          "users": [
            {
            "username": "service-account-canvassystem",
            "enabled": true,
            "clientRoles": {
              "realm-management": [
                "manage-clients"
              ]
             }
            },
            {
            "username": "service-account-credentialsmanagement-operator",
            "enabled": true,
            "clientRoles": {
              "realm-management": [
                "view-clients"
              ]
             }
            }
          ]
        }
    containerSecurityContext:
      enabled: true
      runAsNonRoot: true
      runAsUser: 1001
    enabled: true
    existingConfigmap: ""
    extraEnvVars: []
    extraEnvVarsCM: ""
    extraEnvVarsSecret: ""
    extraVolumeMounts: []
    extraVolumes: []
    hostAliases: []
    image:
      digest: ""
      pullPolicy: IfNotPresent
      pullSecrets: []
      registry: docker.io
      repository: bitnamilegacy/keycloak-config-cli
      tag: 5.5.0-debian-11-r35
    initContainers: []
    podAnnotations: {}
    podLabels: {}
    podSecurityContext:
      enabled: true
      fsGroup: 1001
    podTolerations: []
    resources:
      limits: {}
      requests: {}
    sidecars: []
  kubeVersion: ""
  lifecycleHooks: {}
  livenessProbe:
    enabled: true
    failureThreshold: 3
    initialDelaySeconds: 300
    periodSeconds: 1
    successThreshold: 1
    timeoutSeconds: 5
  logging:
    level: INFO
    output: default
  metrics:
    enabled: false
    prometheusRule:
      enabled: false
      groups: []
      labels: {}
      namespace: ""
    service:
      annotations:
        prometheus.io/port: '{{ .Values.metrics.service.ports.http }}'
        prometheus.io/scrape: "true"
      ports:
        http: 8080
    serviceMonitor:
      enabled: false
      endpoints:
      - path: /metrics
      - path: /realms/master/metrics
      honorLabels: false
      interval: 30s
      jobLabel: ""
      labels: {}
      metricRelabelings: []
      namespace: ""
      path: ""
      port: http
      relabelings: []
      scrapeTimeout: ""
      selector: {}
  nameOverride: ""
  namespaceOverride: ""
  networkPolicy:
    additionalRules: {}
    allowExternal: true
    enabled: false
  nodeAffinityPreset:
    key: ""
    type: ""
    values: []
  nodeSelector: {}
  pdb:
    create: false
    maxUnavailable: ""
    minAvailable: 1
  podAffinityPreset: ""
  podAnnotations: {}
  podAntiAffinityPreset: soft
  podLabels: {}
  podManagementPolicy: Parallel
  podSecurityContext:
    enabled: true
    fsGroup: 1001
  postgresql:
    architecture: standalone
    audit:
      clientMinMessages: error
      logConnections: false
      logDisconnections: false
      logHostname: false
      logLinePrefix: ""
      logTimezone: ""
      pgAuditLog: ""
      pgAuditLogCatalog: "off"
    auth:
      database: keycloak
      enablePostgresUser: true
      existingSecret: ""
      password: keycloakdbuser
      postgresPassword: ""
      replicationPassword: ""
      replicationUsername: repl_user
      secretKeys:
        adminPasswordKey: postgres-password
        replicationPasswordKey: replication-password
        userPasswordKey: password
      usePasswordFiles: false
      username: keycloak
    clusterDomain: cluster.local
    common:
      exampleValue: common-chart
      global:
        certificate:
          appName: compcrdwebhook
        hookImages:
          busybox: busybox:1.35
          kubectl: bitnamilegacy/kubectl:latest
          kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
        image:
          registry: ""
        imagePullSecrets: []
        imageRegistry: ""
        postgresql:
          auth:
            database: ""
            existingSecret: ""
            password: ""
            postgresPassword: ""
            secretKeys:
              adminPasswordKey: ""
              replicationPasswordKey: ""
              userPasswordKey: ""
            username: ""
          service:
            ports:
              postgresql: ""
        storageClass: ""
    commonAnnotations: {}
    commonLabels: {}
    containerPorts:
      postgresql: 5432
    diagnosticMode:
      args:
      - infinity
      command:
      - sleep
      enabled: false
    enabled: true
    extraDeploy: []
    fullnameOverride: ""
    global:
      certificate:
        appName: compcrdwebhook
      hookImages:
        busybox: busybox:1.35
        kubectl: bitnamilegacy/kubectl:latest
        kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
      image:
        registry: ""
      imagePullSecrets: []
      imageRegistry: ""
      postgresql:
        auth:
          database: ""
          existingSecret: ""
          password: ""
          postgresPassword: ""
          secretKeys:
            adminPasswordKey: ""
            replicationPasswordKey: ""
            userPasswordKey: ""
          username: ""
        service:
          ports:
            postgresql: ""
      storageClass: ""
    image:
      debug: false
      digest: ""
      pullPolicy: IfNotPresent
      pullSecrets: []
      registry: docker.io
      repository: bitnamilegacy/postgresql
      tag: 15.2.0-debian-11-r31
    kubeVersion: ""
    ldap:
      basedn: ""
      binddn: ""
      bindpw: ""
      enabled: false
      port: ""
      prefix: ""
      scheme: ""
      searchAttribute: ""
      searchFilter: ""
      server: ""
      suffix: ""
      tls:
        enabled: false
      uri: ""
    metrics:
      containerPorts:
        metrics: 9187
      containerSecurityContext:
        enabled: true
        runAsNonRoot: true
        runAsUser: 1001
      customLivenessProbe: {}
      customMetrics: {}
      customReadinessProbe: {}
      customStartupProbe: {}
      enabled: false
      extraEnvVars: []
      image:
        digest: ""
        pullPolicy: IfNotPresent
        pullSecrets: []
        registry: docker.io
        repository: bitnami/postgres-exporter
        tag: 0.11.1-debian-11-r54
      livenessProbe:
        enabled: true
        failureThreshold: 6
        initialDelaySeconds: 5
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      prometheusRule:
        enabled: false
        labels: {}
        namespace: ""
        rules: []
      readinessProbe:
        enabled: true
        failureThreshold: 6
        initialDelaySeconds: 5
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      resources:
        limits: {}
        requests: {}
      service:
        annotations:
          prometheus.io/port: '{{ .Values.metrics.service.ports.metrics }}'
          prometheus.io/scrape: "true"
        clusterIP: ""
        ports:
          metrics: 9187
        sessionAffinity: None
      serviceMonitor:
        enabled: false
        honorLabels: false
        interval: ""
        jobLabel: ""
        labels: {}
        metricRelabelings: []
        namespace: ""
        relabelings: []
        scrapeTimeout: ""
        selector: {}
      startupProbe:
        enabled: false
        failureThreshold: 15
        initialDelaySeconds: 10
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
    nameOverride: ""
    networkPolicy:
      egressRules:
        customRules: {}
        denyConnectionsToExternal: false
      enabled: false
      ingressRules:
        primaryAccessOnlyFrom:
          customRules: {}
          enabled: false
          namespaceSelector: {}
          podSelector: {}
        readReplicasAccessOnlyFrom:
          customRules: {}
          enabled: false
          namespaceSelector: {}
          podSelector: {}
      metrics:
        enabled: false
        namespaceSelector: {}
        podSelector: {}
    postgresqlDataDir: /bitnami/postgresql/data
    postgresqlSharedPreloadLibraries: pgaudit
    primary:
      affinity: {}
      annotations: {}
      args: []
      command: []
      configuration: ""
      containerSecurityContext:
        enabled: true
        runAsUser: 1001
      customLivenessProbe: {}
      customReadinessProbe: {}
      customStartupProbe: {}
      existingConfigmap: ""
      existingExtendedConfigmap: ""
      extendedConfiguration: ""
      extraEnvVars: []
      extraEnvVarsCM: ""
      extraEnvVarsSecret: ""
      extraPodSpec: {}
      extraVolumeMounts: []
      extraVolumes: []
      hostAliases: []
      hostIPC: false
      hostNetwork: false
      initContainers: []
      initdb:
        args: ""
        password: ""
        postgresqlWalDir: ""
        scripts: {}
        scriptsConfigMap: ""
        scriptsSecret: ""
        user: ""
      labels: {}
      lifecycleHooks: {}
      livenessProbe:
        enabled: true
        failureThreshold: 6
        initialDelaySeconds: 30
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      name: primary
      nodeAffinityPreset:
        key: ""
        type: ""
        values: []
      nodeSelector: {}
      persistence:
        accessModes:
        - ReadWriteOnce
        annotations: {}
        dataSource: {}
        enabled: true
        existingClaim: ""
        labels: {}
        mountPath: /bitnami/postgresql
        selector: {}
        size: 8Gi
        storageClass: ""
        subPath: ""
      pgHbaConfiguration: ""
      podAffinityPreset: ""
      podAnnotations: {}
      podAntiAffinityPreset: soft
      podLabels: {}
      podSecurityContext:
        enabled: true
        fsGroup: 1001
      priorityClassName: ""
      readinessProbe:
        enabled: true
        failureThreshold: 6
        initialDelaySeconds: 5
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      resources:
        limits: {}
        requests:
          cpu: 250m
          memory: 256Mi
      schedulerName: ""
      service:
        annotations: {}
        clusterIP: ""
        externalTrafficPolicy: Cluster
        extraPorts: []
        headless:
          annotations: {}
        loadBalancerIP: ""
        loadBalancerSourceRanges: []
        nodePorts:
          postgresql: ""
        ports:
          postgresql: 5432
        sessionAffinity: None
        sessionAffinityConfig: {}
        type: ClusterIP
      sidecars: []
      standby:
        enabled: false
        primaryHost: ""
        primaryPort: ""
      startupProbe:
        enabled: false
        failureThreshold: 15
        initialDelaySeconds: 30
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      terminationGracePeriodSeconds: ""
      tolerations: []
      topologySpreadConstraints: []
      updateStrategy:
        rollingUpdate: {}
        type: RollingUpdate
    psp:
      create: false
    rbac:
      create: false
      rules: []
    readReplicas:
      affinity: {}
      annotations: {}
      args: []
      command: []
      containerSecurityContext:
        enabled: true
        runAsUser: 1001
      customLivenessProbe: {}
      customReadinessProbe: {}
      customStartupProbe: {}
      extendedConfiguration: ""
      extraEnvVars: []
      extraEnvVarsCM: ""
      extraEnvVarsSecret: ""
      extraPodSpec: {}
      extraVolumeMounts: []
      extraVolumes: []
      hostAliases: []
      hostIPC: false
      hostNetwork: false
      initContainers: []
      labels: {}
      lifecycleHooks: {}
      livenessProbe:
        enabled: true
        failureThreshold: 6
        initialDelaySeconds: 30
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      name: read
      nodeAffinityPreset:
        key: ""
        type: ""
        values: []
      nodeSelector: {}
      persistence:
        accessModes:
        - ReadWriteOnce
        annotations: {}
        dataSource: {}
        enabled: true
        existingClaim: ""
        labels: {}
        mountPath: /bitnami/postgresql
        selector: {}
        size: 8Gi
        storageClass: ""
        subPath: ""
      podAffinityPreset: ""
      podAnnotations: {}
      podAntiAffinityPreset: soft
      podLabels: {}
      podSecurityContext:
        enabled: true
        fsGroup: 1001
      priorityClassName: ""
      readinessProbe:
        enabled: true
        failureThreshold: 6
        initialDelaySeconds: 5
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      replicaCount: 1
      resources:
        limits: {}
        requests:
          cpu: 250m
          memory: 256Mi
      schedulerName: ""
      service:
        annotations: {}
        clusterIP: ""
        externalTrafficPolicy: Cluster
        extraPorts: []
        headless:
          annotations: {}
        loadBalancerIP: ""
        loadBalancerSourceRanges: []
        nodePorts:
          postgresql: ""
        ports:
          postgresql: 5432
        sessionAffinity: None
        sessionAffinityConfig: {}
        type: ClusterIP
      sidecars: []
      startupProbe:
        enabled: false
        failureThreshold: 15
        initialDelaySeconds: 30
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      terminationGracePeriodSeconds: ""
      tolerations: []
      topologySpreadConstraints: []
      updateStrategy:
        rollingUpdate: {}
        type: RollingUpdate
    replication:
      applicationName: my_application
      numSynchronousReplicas: 0
      synchronousCommit: "off"
    serviceAccount:
      annotations: {}
      automountServiceAccountToken: true
      create: false
      name: ""
    shmVolume:
      enabled: true
      sizeLimit: ""
    tls:
      autoGenerated: false
      certCAFilename: ""
      certFilename: ""
      certKeyFilename: ""
      certificatesSecret: ""
      crlFilename: ""
      enabled: false
      preferServerCiphers: true
    volumePermissions:
      containerSecurityContext:
        runAsUser: 0
      enabled: false
      image:
        digest: ""
        pullPolicy: IfNotPresent
        pullSecrets: []
        registry: docker.io
        repository: bitnami/bitnami-shell
        tag: 11-debian-11-r77
      resources:
        limits: {}
        requests: {}
  priorityClassName: ""
  production: false
  proxy: passthrough
  rbac:
    create: false
    rules: []
  readinessProbe:
    enabled: true
    failureThreshold: 3
    initialDelaySeconds: 30
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 1
  replicaCount: 1
  resources:
    limits: {}
    requests: {}
  schedulerName: ""
  service:
    annotations: {}
    clusterIP: ""
    externalTrafficPolicy: Cluster
    extraHeadlessPorts: []
    extraPorts: []
    http:
      enabled: true
    loadBalancerIP: ""
    loadBalancerSourceRanges: []
    nodePorts:
      http: ""
      https: ""
    ports:
      http: 8083
      https: 8443
    sessionAffinity: None
    sessionAffinityConfig: {}
    type: LoadBalancer
  serviceAccount:
    annotations: {}
    automountServiceAccountToken: true
    create: true
    name: ""
  sidecars: []
  spi:
    existingSecret: ""
    hostnameVerificationPolicy: ""
    passwordsSecret: ""
    truststoreFilename: keycloak-spi.truststore.jks
    truststorePassword: ""
  startupProbe:
    enabled: false
    failureThreshold: 60
    initialDelaySeconds: 30
    periodSeconds: 5
    successThreshold: 1
    timeoutSeconds: 1
  terminationGracePeriodSeconds: ""
  tls:
    autoGenerated: true
    enabled: true
    existingSecret: ""
    keystoreFilename: keycloak.keystore.jks
    keystorePassword: ""
    passwordsSecret: ""
    truststoreFilename: keycloak.truststore.jks
    truststorePassword: ""
    usePem: false
  tolerations: []
  topologySpreadConstraints: []
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
kong-gateway-install:
  enabled: false
kongnamespace: kong
oda-crds:
  enabled: true
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
oda-webhook:
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
  image: tmforumodacanvas/compcrdwebhook
  imagePullPolicy: IfNotPresent
  version: 1.0.1
pdb-management-operator:
  configuration:
    defaultNamespace: default
    enablePDB: true
    leaderElectionNamespace: canvas
    metricsNamespace: canvas
  deployment:
    enableMetrics: true
    enableWebhook: true
    image: tmforumodacanvas/pdb-management-operator
    imagePullPolicy: IfNotPresent
    metricsAddr: 0.0.0.0:8080
    operatorName: pdb-management-operator
    probeAddr: 0.0.0.0:8081
    replicas: 2
    version: 1.0.0
    watchNamespace: ""
  enabled: true
  extraEnvVars: []
  extraVolumeMounts: []
  extraVolumes: []
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
  imagePullSecrets: []
  observability:
    logLevel: info
    tracing:
      backend: ""
      enabled: false
      jaegerEndpoint: ""
      otlpEndpoint: ""
      sampleRate: "1.0"
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 256Mi
  service:
    create: true
    name: pdb-management-operator-service
    port: 443
    targetPort: 8443
  serviceAccount:
    create: true
    name: pdb-management-operator
preqrequisitechecks:
  istio: true
resource-inventory:
  enabled: true
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
  image: tmforumodacanvas/tmf639-resource-inventory-api
  imagePullPolicy: IfNotPresent
  serverUrl: http://resource-inventory.canvas.svc.cluster.local/tmf-api/resourceInventoryManagement/v5
  version: 1.0.0
secretsmanagement-operator:
  auth_path: jwt-k8s-sman
  autodetectAudience: true
  global:
    certificate:
      appName: compcrdwebhook
    hookImages:
      busybox: busybox:1.35
      kubectl: bitnamilegacy/kubectl:latest
      kubectlCurl: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
    image:
      registry: ""
    imagePullSecrets: []
  hvacTokenSecret:
    key: rootToken
    name: canvas-vault-hc-secrets
  image: tmforumodacanvas/secretsmanagement-operator-vault
  imagePullPolicy: IfNotPresent
  logLevel: 20
  login_role_tpl: sman-{0}-role
  policy_name_tpl: sman-{0}-policy
  secrets_base_path_tpl: sidecar
  secrets_mount_tpl: kv-sman-{0}
  sidecarImage: tmforumodacanvas/secretsmanagement-sidecar
  sidecarImagePullPolicy: IfNotPresent
  sidecarVersion: 0.1.0
  vault_addr: https://canvas-vault-hc.canvas-vault.svc.cluster.local:8200
  vault_skip_verify: "true"
  version: 1.0.0

HOOKS:
---
# Source: canvas-oda/charts/canvas-vault/templates/post-install-rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: canvas-vault-hc-pih-sa
  namespace: canvas-vault
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/startupapicheck-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  name: canvas-cert-manager-startupapicheck
  namespace: cert-manager
  annotations:
    helm.sh/hook: post-install
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    helm.sh/hook-weight: "-5"
  labels:
    app: startupapicheck
    app.kubernetes.io/name: startupapicheck
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "startupapicheck"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/preinst-rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: canvas-sm-preinst-sa
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
---
# Source: canvas-oda/templates/rbac-sa.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: canvas-sm-prehook-sa
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
---
# Source: canvas-oda/charts/canvas-vault/templates/post-install-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-vault-canvas-vault-hc-pih-clusterrole
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
rules:
  - apiGroups: [""] 
    resources: ["secrets"]
    #resourceNames: ["canvas-vault-hc-secrets"]    
    verbs: [create, get, delete, patch]
---
# Source: canvas-oda/templates/rbac-sa.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-sm-prehook-role
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
rules:
  - apiGroups: [""] # "" indicates the core API group
    resources: ["*"]
    verbs: ["*"]
  - apiGroups: ["apiextensions.k8s.io"]
    resources: ["customresourcedefinitions"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""] # "" indicates the core API group
    resources: ["namespaces"]
    verbs: ["list", "get"]
---
# Source: canvas-oda/charts/canvas-vault/templates/post-install-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-vault-canvas-vault-hc-pih-clusterrolebinding
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-vault-canvas-vault-hc-pih-clusterrole
subjects:
  - kind: ServiceAccount
    name: canvas-vault-hc-pih-sa
    namespace: canvas-vault
---
# Source: canvas-oda/templates/rbac-sa.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-sm-prehook-rolebinding
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-sm-prehook-role
subjects:
  - kind: ServiceAccount
    name: canvas-sm-prehook-sa
    namespace: canvas
---
# Source: canvas-oda/charts/canvas-vault/templates/post-install-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: canvas-vault-hc-pih-role
  namespace: canvas-vault
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
rules:
  - apiGroups: [""] # "" indicates the core API group
    resources: ["namespaces"]
    verbs: [list]
  - apiGroups: [""] # "" indicates the core API group
    resources: ["configmaps"]
    verbs: [create]
  - apiGroups: [""] # "" indicates the core API group
    resources: ["pods"]
    verbs: [get, list, "watch"]   # "list" for kubectl wait
  - apiGroups: [""] # "" indicates the core API group
    resources: ["pods/exec"]
    verbs: [create]
  - apiGroups: [""] 
    resources: ["secrets"]
    resourceNames: ["canvas-vault-hc-secrets"]    
    verbs: [create, get, delete, patch]
  - apiGroups: ["cert-manager.io"] # "" indicates the core API group
    resources: ["certificates"]
    verbs: [create, get, patch]
  # https://github.com/kubernetes/kubectl/issues/580#issuecomment-489117173
  #- apiGroups: [""]
  #  resources: ["statefulsets", "deployments"]
  #  verbs: ["get", "list", "watch", "patch"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/startupapicheck-rbac.yaml
# create certificate role
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: canvas-cert-manager-startupapicheck:create-cert
  namespace: cert-manager
  labels:
    app: startupapicheck
    app.kubernetes.io/name: startupapicheck
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "startupapicheck"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
  annotations:
    helm.sh/hook: post-install
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    helm.sh/hook-weight: "-5"
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates"]
    verbs: ["create"]
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/preinst-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: canvas-sm-preinst-role
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
rules:
  - apiGroups: [""] # "" indicates the core API group
    resources: ["namespaces"]
    verbs: [list]
  - apiGroups: [""] # "" indicates the core API group
    resources: ["configmaps"]
    verbs: [get, create, patch]
  - apiGroups: [""] # "" indicates the core API group
    resources: ["pods"]
    verbs: [get, list, "watch"]   # "list" for kubectl wait
  - apiGroups: [""] # "" indicates the core API group
    resources: ["pods/exec"]
    verbs: [create]
  # https://github.com/kubernetes/kubectl/issues/580#issuecomment-489117173
  #- apiGroups: [""]
  #  resources: ["statefulsets", "deployments"]
  #  verbs: ["get", "list", "watch", "patch"]
---
# Source: canvas-oda/charts/canvas-vault/templates/post-install-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: canvas-vault-hc-pih-rolebinding
  namespace: canvas-vault
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: canvas-vault-hc-pih-role
subjects:
  - kind: ServiceAccount
    name: canvas-vault-hc-pih-sa
    namespace: canvas-vault
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/startupapicheck-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: canvas-cert-manager-startupapicheck:create-cert
  namespace: cert-manager
  labels:
    app: startupapicheck
    app.kubernetes.io/name: startupapicheck
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "startupapicheck"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
  annotations:
    helm.sh/hook: post-install
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    helm.sh/hook-weight: "-5"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: canvas-cert-manager-startupapicheck:create-cert
subjects:
  - kind: ServiceAccount
    name: canvas-cert-manager-startupapicheck
    namespace: cert-manager
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/preinst-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: canvas-sm-preinst-rolebinding
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: canvas-sm-preinst-role
subjects:
  - kind: ServiceAccount
    name: canvas-sm-preinst-sa
---
# Source: canvas-oda/charts/canvas-vault/charts/vault/templates/tests/server-test.yaml
apiVersion: v1
kind: Pod
metadata:
  name: canvas-vault-hc-server-test
  namespace: canvas-vault
  annotations:
    "helm.sh/hook": test
spec:
  
  containers:
    - name: canvas-server-test
      image: hashicorp/vault:1.14.8
      imagePullPolicy: IfNotPresent
      env:
        - name: VAULT_ADDR
          value: https://canvas-vault-hc.canvas-vault.svc:8200
        
        - name: "VAULT_CACERT"
          value: "/vault/userconfig/canvasvault-tls/ca.crt"
        - name: "VAULT_TLSCERT"
          value: "/vault/userconfig/canvasvault-tls/tls.crt"
        - name: "VAULT_TLSKEY"
          value: "/vault/userconfig/canvasvault-tls/tls.key"
      command:
        - /bin/sh
        - -c
        - |
          echo "Checking for sealed info in 'vault status' output"
          ATTEMPTS=10
          n=0
          until [ "$n" -ge $ATTEMPTS ]
          do
            echo "Attempt" $n...
            vault status -format yaml | grep -E '^sealed: (true|false)' && break
            n=$((n+1))
            sleep 5
          done
          if [ $n -ge $ATTEMPTS ]; then
            echo "timed out looking for sealed info in 'vault status' output"
            exit 1
          fi

          exit 0
      volumeMounts:
        - mountPath: /tmp
          name: tmpvol
        - mountPath: /vault/userconfig/canvasvault-tls
          name: userconfig-canvasvault-tls
          readOnly: true
  volumes:
    - emptyDir: {}
      name: tmpvol
    - name: userconfig-canvasvault-tls
      secret:
        defaultMode: 420
        secretName: canvasvault-tls
  restartPolicy: Never
---
# Source: canvas-oda/charts/api-operator-istio/templates/EnableIstioLB.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: canvas-loadbalancer-svc-istio-ingress
  namespace: canvas
  annotations:
    "helm.sh/hook": post-install,post-upgrade 
spec:
  template:
    spec:
      serviceAccountName: apioperator-account
      containers:
      - name: patch-istio-ingress
        image: bitnamilegacy/kubectl:latest  # Using kubectl image
        command:
          - /bin/sh
          - -c
          - |
            CURRENT_TYPE=$(kubectl get svc istio-ingress -n istio-ingress -o jsonpath='{.spec.type}')
            if [ "$CURRENT_TYPE" != "LoadBalancer" ]; then
              kubectl patch svc istio-ingress -n istio-ingress -p '{"spec": {"type": "LoadBalancer", "externalIPs": null}}'
              echo "Service patched to LoadBalancer type."
            else
              echo "Service type for Istio-Ingress is already LoadBalancer. No patch required."
            fi
      restartPolicy: Never
  backoffLimit: 3
---
# Source: canvas-oda/charts/canvas-vault/templates/post-install-hook.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: "canvas-vault-hc-post-install-hook"
  namespace: canvas-vault
  labels:
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "canvas"
    app.kubernetes.io/version: v1
    helm.sh/chart: "canvas-vault-1.0.2"
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "5"
    "helm.sh/hook-delete-policy": before-hook-creation
spec:
  template:
    metadata:
      name: "canvas-vault-hc-post-install-hook"
      labels:
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/instance: "canvas"
        helm.sh/chart: "canvas-vault-1.0.2"
    spec:
      restartPolicy: Never
      containers:
      - name: post-install-job
        # TODO[FH] remove suffix before merging to master/main
        image: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
        imagePullPolicy: IfNotPresent
        command: ["/bin/sh"]
        args: ["-c", "echo starting canvas vault post install hook;
           date;
           set -xev;
           NAMESPACE=canvas-vault;
           VAULTPOD=canvas-vault-hc-0;
           SECRET_NAME=canvas-vault-hc-secrets;
           AUTH_PATH=jwt-k8s-sman;
           JWT=$(cat /var/run/secrets/kubernetes.io/serviceaccount/token);
           JWT_PL=$(echo $JWT | cut -d '.' -f2);
           ISSUER=$(echo $JWT_PL==== | base64 -d 2>/dev/null | jq -r '.aud[0]');
           VAULT_ADDR=https://canvas-vault-hc.$NAMESPACE.svc.cluster.local:8200;
           echo requesting certificate;
           kubectl apply -f /cert-configmap/canvas-vault-certificate.yaml;
           echo configuring authenticator \"$AUTH_PATH\" for issuer \"$ISSUER\";
           date;
           echo waiting up to 60 seconds for the vault to be running;
           kubectl -n $NAMESPACE wait -l  statefulset.kubernetes.io/pod-name=$VAULTPOD --for jsonpath=\"{.status.conditions[?(@.type=='Initialized')]['status']}\"=True pod --timeout=60s;
           echo running;
           date;
           export STATUS_JSON=$(curl -k -m1 -s -H 'X-Vault-Request:true' $VAULT_ADDR/v1/sys/seal-status || true);
           for i in $(seq 1 60);
           do
             if [ -z \"$STATUS_JSON\" ];
             then
               echo waiting for status;
               sleep 1;
               export STATUS_JSON=$(curl -k -m1 -s -H 'X-Vault-Request:true' $VAULT_ADDR/v1/sys/seal-status || true);
             fi;
           done;
           echo --- STATUS ---;
           echo $STATUS_JSON | jq .;
           if echo $STATUS_JSON | jq -e '.initialized == false' >/dev/null;
           then
             echo --- init ---;
             export JSON_RESULT=$(curl -k -s -X PUT -H 'X-Vault-Request:true' -d '{\"secret_shares\":1,\"secret_threshold\":1}' $VAULT_ADDR/v1/sys/init);
             echo $JSON_RESULT;
             echo $JSON_RESULT | jq .;
             if echo $JSON_RESULT | jq -e '.root_token != null';
             then
               export ROOT_TOKEN=$(echo $JSON_RESULT | jq -r '.root_token');
               export UNSEAL_KEY1=$(echo $JSON_RESULT | jq -r '.keys[0]');
               echo CREATE SECRETS;
               kubectl create secret -n $NAMESPACE generic $SECRET_NAME  --from-literal=rootToken=$ROOT_TOKEN --from-literal=unsealKey1=$UNSEAL_KEY1 --dry-run=client -o yaml | kubectl apply -f -;
               kubectl create secret -n canvas generic $SECRET_NAME  --from-literal=rootToken=$ROOT_TOKEN --from-literal=unsealKey1=$UNSEAL_KEY1 --dry-run=client -o yaml | kubectl apply -f -;
               echo UNSEALING;
               curl -k -s -X PUT -H 'X-Vault-Request:true' -d \"{\\\"key\\\":\\\"$UNSEAL_KEY1\\\",\\\"reset\\\":false,\\\"migrate\\\":false}\" $VAULT_ADDR/v1/sys/unseal | jq .;
             else
               echo ERROR initializing Vault $JSON_RESULT;
               exit 2;
             fi;
           else
             echo Vault already initialized;
             if echo $STATUS_JSON | jq -e '.sealed == true' >/dev/null;
             then
               echo Vault is sealed, unsealing;
               UNSEAL_KEY1=$( kubectl get secret -n $NAMESPACE $SECRET_NAME -ojsonpath='{.data.unsealKey1}' | base64 -d);
               curl -k -s -X PUT -H 'X-Vault-Request:true' -d \"{\\\"key\\\":\\\"$UNSEAL_KEY1\\\",\\\"reset\\\":false,\\\"migrate\\\":false}\" $VAULT_ADDR/v1/sys/unseal | jq .;
             fi;
           fi;
           echo waiting up to 60 seconds for the vault to be ready;
           kubectl -n $NAMESPACE wait -l  statefulset.kubernetes.io/pod-name=$VAULTPOD --for=condition=ready pod --timeout=60s;
           echo ready;
           date;
           echo reading secret;
           ROOT_TOKEN=$(kubectl get secret -n $NAMESPACE $SECRET_NAME -ojsonpath='{.data.rootToken}' | base64 -d);
           UNSEAL_KEY1=$( kubectl get secret -n $NAMESPACE $SECRET_NAME -ojsonpath='{.data.unsealKey1}' | base64 -d);
           echo removethis;
           kubectl create secret -n canvas generic $SECRET_NAME  --from-literal=rootToken=$ROOT_TOKEN --from-literal=unsealKey1=$UNSEAL_KEY1 --dry-run=client -o yaml | kubectl apply -f -;
           echo getting issuer;
           if [ -z \"$ISSUER\" ];then
             JSON=$(kubectl exec -n $NAMESPACE -i $VAULTPOD -- sh -c 'wget -O- --no-check-certificate https://$KUBERNETES_SERVICE_HOST:$KUBERNETES_SERVICE_PORT_HTTPS/.well-known/openid-configuration 2>/dev/null');
             echo ----- response -----;
             echo $JSON;
             echo ----- -------- -----;
             ISSUER=$(echo $JSON | sed -e 's/.*\"issuer\":\"\\([^\"]\\+\\).*/\\1/');
           fi;
           echo ISSUER=$ISSUER;
           if [ -z \"$CACERT\" ]; then
             if curl $ISSUER/.well-known/openid-configuration >/dev/null 2>&1; then
               echo no CACERT needed;
             else
               CACERT=/run/secrets/kubernetes.io/serviceaccount/ca.crt;
               if curl $ISSUER/.well-known/openid-configuration --cacert $CACERT >/dev/null 2>&1;then
                 echo CACERT=$CACERT;
               else
                 echo could not curl -k $ISSUER/.well-known/openid-configuration --cacert $CACERT; 
                 ls -la $CACERT;
                 curl -k -v $ISSUER/.well-known/openid-configuration --cacert $CACERT;
                 exit 60;
               fi;
             fi;
           fi;
           echo kubectl exec -i -n $NAMESPACE $VAULTPOD -- /bin/sh -c \"echo $ROOT_TOKEN | vault login -tls-skip-verify -non-interactive -no-print -\";
           kubectl exec -i -n $NAMESPACE $VAULTPOD -- /bin/sh -c \"echo $ROOT_TOKEN | vault login -tls-skip-verify -non-interactive -no-print -\";
           X=$(kubectl exec -n $NAMESPACE -i $VAULTPOD -- vault auth list -tls-skip-verify -non-interactive | grep \"$AUTH_PATH\" || true);
           echo X=$X;
           if [ -z \"$X\" ]; then
             echo enable $AUTH_PATH in vault;
             kubectl exec -n $NAMESPACE -i $VAULTPOD -- vault auth enable -tls-skip-verify -non-interactive -path \"$AUTH_PATH\" jwt;
           else
             echo auth method $AUTH_PATH already enabled;
           fi;
           echo vault write oidc_discovery_url;
           if [ -z \"$CACERT\" ]; then
             kubectl exec -n $NAMESPACE -i $VAULTPOD -- vault write -tls-skip-verify -non-interactive auth/$AUTH_PATH/config oidc_discovery_url=$ISSUER;
           else
             kubectl exec -n $NAMESPACE -i $VAULTPOD -- vault write -tls-skip-verify -non-interactive auth/$AUTH_PATH/config oidc_discovery_url=$ISSUER oidc_discovery_ca_pem=@$CACERT;
           fi;
           echo --- FINISHED ---"]
        volumeMounts:
        - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
          name: kube-api-access-pih
          readOnly: true
        - mountPath: /cert-configmap
          name: cert-configmap
          readOnly: true
      serviceAccountName: canvas-vault-hc-pih-sa
      volumes:
      - name: cert-configmap
        configMap:
          name: canvas-canvasvault-cert-cm 
      - name: kube-api-access-pih
        projected:
          defaultMode: 420
          sources:
          - serviceAccountToken:
              expirationSeconds: 600
              path: token
          - configMap:
              items:
              - key: ca.crt
                path: ca.crt
              name: kube-root-ca.crt
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/startupapicheck-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: canvas-cert-manager-startupapicheck
  namespace: cert-manager
  labels:
    app: startupapicheck
    app.kubernetes.io/name: startupapicheck
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "startupapicheck"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
  annotations:
    helm.sh/hook: post-install
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    helm.sh/hook-weight: "1"
spec:
  backoffLimit: 4
  template:
    metadata:
      labels:
        app: startupapicheck
        app.kubernetes.io/name: startupapicheck
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/component: "startupapicheck"
        app.kubernetes.io/version: "v1.11.0"
        app.kubernetes.io/managed-by: Helm
        helm.sh/chart: cert-manager-v1.11.0
    spec:
      restartPolicy: OnFailure
      serviceAccountName: canvas-cert-manager-startupapicheck
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: cert-manager-startupapicheck
          image: "quay.io/jetstack/cert-manager-ctl:v1.11.0"
          imagePullPolicy: IfNotPresent
          args:
          - check
          - api
          - --wait=1m
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: canvas-oda/charts/cert-manager-init/templates/webhook.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: job-hook-postinstall
  annotations:
    "helm.sh/hook-weight": "-10"  
    "helm.sh/hook": "post-install"
    "helm.sh/hook-delete-policy": "before-hook-creation"
spec:
  template:
    spec:
      containers:
        - name: post-install
          image: busybox:1.35
          imagePullPolicy: IfNotPresent
          command: ['sleep', '80']
      restartPolicy: OnFailure
      terminationGracePeriodSeconds: 0

  backoffLimit: 1
  completions: 1
---
# Source: canvas-oda/charts/keycloak/templates/keycloak-config-cli-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: canvas-keycloak-keycloak-config-cli
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: keycloak
    helm.sh/chart: keycloak-13.0.3
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: keycloak-config-cli
  annotations:
    helm.sh/hook: post-install,post-upgrade,post-rollback
    helm.sh/hook-delete-policy: hook-succeeded,before-hook-creation
    helm.sh/hook-weight: "5"
spec:
  backoffLimit: 1
  template:
    metadata:
      labels:
        app.kubernetes.io/name: keycloak
        helm.sh/chart: keycloak-13.0.3
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: keycloak-config-cli
      annotations:
        checksum/configuration: c4f9907e794f350dec2f6ae1872b191558de35ab88a6cd7a04cd0798c2c78f8d
    spec:
      serviceAccountName: canvas-keycloak
      
      restartPolicy: Never
      securityContext:
        fsGroup: 1001
      containers:
        - name: keycloak-config-cli
          image: docker.io/bitnamilegacy/keycloak-config-cli:5.5.0-debian-11-r35
          imagePullPolicy: IfNotPresent
          command:
            - java
            - -jar
            - /opt/keycloak-config-cli.jar
          securityContext:
            runAsNonRoot: true
            runAsUser: 1001
          env:
            - name: KEYCLOAK_URL
              value: http://canvas-keycloak-headless:8083/auth/
            - name: KEYCLOAK_USER
              value: "admin"
            - name: KEYCLOAK_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: canvas-keycloak
                  key: admin-password
            - name: IMPORT_FILES_LOCATIONS
              value: /config/*
            - name: KEYCLOAK_AVAILABILITYCHECK_ENABLED
              value: "true"
          volumeMounts:
            - name: config-volume
              mountPath: /config
          resources:
            limits: {}
            requests: {}
      volumes:
        - name: config-volume
          configMap:
            name: canvas-keycloak-keycloak-config-cli-configmap
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/preinst-autodetect-audience-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: "canvas-sm-preinst-autodetect-audience"
  labels:
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "canvas"
    app.kubernetes.io/version: v1
    helm.sh/chart: "secretsmanagement-operator-1.0.2"
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "5"
    "helm.sh/hook-delete-policy": before-hook-creation
spec:
  template:
    metadata:
      name: "canvas-sm-preinst-autodetect-audience"
      labels:
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/instance: "canvas"
        helm.sh/chart: "secretsmanagement-operator-1.0.2"
    spec:
      restartPolicy: Never
      containers:
      - name: autodetect-audience
        image: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
        imagePullPolicy: IfNotPresent
        command: ["/bin/sh"]
        args: ["-c", "echo starting autodetect audience pre install hook;
           date;
           set -xev;
           NAMESPACE=canvas;
           CMNAME=canvas-sman-autodetect;
           echo NAMESPACE=$NAMESPACE;
           echo CMNAME=$CMNAME;
           cat /var/run/secrets/kubernetes.io/serviceaccount/ca.crt;
           JWT=$(cat /var/run/secrets/kubernetes.io/serviceaccount/token);
           JWT_PL=$(echo $JWT | cut -d '.' -f2);
           ISSUER=$(echo $JWT_PL==== | base64 -d 2>/dev/null | jq -r '.aud[0]');
           echo $ISSUER;
           kubectl create configmap -n $NAMESPACE $CMNAME --from-file=ca.crt=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt --from-literal=issuer=$ISSUER --dry-run=client -oyaml | kubectl apply -f -;
           echo --- FINISHED ---"]
        volumeMounts:
        - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
          name: kube-api-access-pih
          readOnly: true
      serviceAccountName: canvas-sm-preinst-sa
      volumes:
      - name: kube-api-access-pih
        projected:
          defaultMode: 420
          sources:
          - serviceAccountToken:
              expirationSeconds: 600
              path: token
          - configMap:
              items:
              - key: ca.crt
                path: ca.crt
              name: kube-root-ca.crt
---
# Source: canvas-oda/templates/component-pre-uninstall-check.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: pre-uninstall-component-check
  namespace: canvas
  annotations:
    "helm.sh/hook" : pre-delete
    "helm.sh/weight" : "0"
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  template:
    spec:
      serviceAccountName: odacomponent-account
      containers:
        - name: component-checker
          image: bitnamilegacy/kubectl:latest
          command:
            - /bin/sh
            - -c
            - |
              echo "Checking for component Custom Resources (CRs) in the canvas cluster."
              if [ $(kubectl get components.oda.tmforum.org -A | wc -l) -gt 1 ]; then
                echo "Error: Uninstallation aborted as below components present."
                kubectl get components.oda.tmforum.org -A
                exit 1  #Prevent Helm from proceeding
              else
                echo "No component CRs found. Proceeding with uninstallation."
              fi
      restartPolicy: Never
  backoffLimit: 0
---
# Source: canvas-oda/templates/prehook.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: pre-install-check-istio
  annotations:
    "helm.sh/hook": pre-install
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  backoffLimit: 0
  template:
    spec:
      serviceAccount: canvas-sm-prehook-sa
      containers:
      - name: check-istio
        image: bitnamilegacy/kubectl:latest
        command:
            - /bin/sh
            - -c
            - |
              # Check if the service exists in the namespace
              SERVICE=$(kubectl get svc istio-ingress -n istio-ingress --ignore-not-found)
              if [ -z "$SERVICE" ]; then
                echo "Istio is not installed properly. Service 'istio-ingress' not found in namespace 'istio-ingress'."
                exit 1
              else
                # Get the service type
                SERVICE_TYPE=$(kubectl get svc istio-ingress -n istio-ingress -o jsonpath='{.spec.type}')
                echo "Service 'istio-ingress' type: $SERVICE_TYPE"
            
                if [ "$SERVICE_TYPE" = "LoadBalancer" ]; then
                  # Check if the service has an external IP
                  EXTERNAL_IP=$(kubectl get svc istio-ingress -n istio-ingress -o jsonpath='{.status.loadBalancer.ingress[0].hostname}')
                  if [ -z "$EXTERNAL_IP" ]; then
                    EXTERNAL_IP=$(kubectl get svc istio-ingress -n istio-ingress -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
                  fi
                  if [ -z "$EXTERNAL_IP" ]; then
                    echo "Service 'istio-ingress' is of type LoadBalancer but does not have an external IP allocated."
                    exit 1
                  else
                    echo "Istio is configured properly. Service 'istio-ingress' in namespace 'istio-ingress' has an external IP: $EXTERNAL_IP."
                  fi
                elif [ "$SERVICE_TYPE" = "ClusterIP" ]; then
                  echo "Service 'istio-ingress' is of type ClusterIP. External IP is not required."

                else
                  echo "Service 'istio-ingress' is of type: $SERVICE_TYPE. Required 'LoadBalancer' and 'ClusterIP' are supported."
                  exit 1
                fi
              fi
              # Check if the VirtualService CRD exists
              VIRTUALSERVICE_CRD=$(kubectl get crd virtualservices.networking.istio.io --ignore-not-found)
              if [ -z "$VIRTUALSERVICE_CRD" ]; then
                echo "VirtualService CRD not found."
                exit 1
              else
                echo "VirtualService CRD exists. Proceeding to install the canvas."
              fi
      restartPolicy: Never
---
# Source: canvas-oda/charts/cert-manager-init/templates/IstioIngressCertificate.yaml
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  annotations:
    "helm.sh/hook": post-install
    "helm.sh/hook-weight": "0"
    "helm.sh/resource-policy": keep
  name: istio-ingress-cert
  namespace: istio-ingress  
spec:
  secretName: istio-ingress-cert
  duration: 21600h  
  renewBefore: 360h 
  commonName: tmf-canvas-env
  dnsNames:
    - "*"
  issuerRef:
    name: istio-ingress-issuer
    kind: Issuer
---
# Source: canvas-oda/charts/cert-manager-init/templates/certificate.yaml
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": post-install
    "helm.sh/hook-weight": "0"
    "helm.sh/resource-policy": keep
  labels:
    helm.sh/chart: cert-manager-init-1.1.2
    app.kubernetes.io/name: cert-manager-init
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
  name: compcrdwebhook
  namespace: canvas
spec:
  secretName: compcrdwebhook-secret
  duration: 21600h
  privateKey:
    algorithm: RSA
    encoding: PKCS1
    size: 2048
  commonName: compcrdwebhook
  isCA: false
  usages:
    - digital signature
    - content commitment # replaces nonRepudiation
    - key encipherment
    - server auth
  dnsNames:
  - compcrdwebhook 
  - compcrdwebhook.canvas
  - compcrdwebhook.canvas.svc
  - compcrdwebhook.canvas.svc.cluster.local
  issuerRef:
    name: canvas-cert-manager-init-selfsigned
---
# Source: canvas-oda/charts/pdb-management-operator/templates/certificate.yaml
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: canvas-pdb-management-operator-serving-cert
  namespace: canvas
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "1"
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  dnsNames:
  - canvas-pdb-management-operator-webhook-service.canvas.svc
  - canvas-pdb-management-operator-webhook-service.canvas.svc.cluster.local
  secretName: canvas-pdb-management-operator-webhook-server-cert
  privateKey:
    rotationPolicy: Always
  issuerRef:
    name: canvas-pdb-management-operator-selfsigned-issuer
    kind: ClusterIssuer
---
# Source: canvas-oda/charts/cert-manager-init/templates/cluster_issuer.yaml
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": post-install
    "helm.sh/hook-weight": "-5"
    "helm.sh/resource-policy": keep
  labels:
    helm.sh/chart: cert-manager-init-1.1.2
    app.kubernetes.io/name: cert-manager-init
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
  name: canvas-cert-manager-init-selfsigned-cluster
spec:
  selfSigned: {}
---
# Source: canvas-oda/charts/pdb-management-operator/templates/certificate.yaml
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: canvas-pdb-management-operator-selfsigned-issuer
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "0"
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  selfSigned: {}
---
# Source: canvas-oda/charts/api-operator-istio/templates/ingressGateway.yaml
apiVersion: networking.istio.io/v1alpha3
kind: Gateway
metadata:
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "5"
    #"helm.sh/resource-policy": keep
  name: component-gateway
spec:
  selector:
    istio: ingressgateway # use istio default controller
  servers:
  - port:
      number: 80
      name: http
      protocol: HTTP
    tls:
      httpsRedirect: true
    hosts:
    - "*"
  - port:
      number: 443
      name: https
      protocol: HTTPS
    tls:
      mode: SIMPLE
      credentialName: istio-ingress-cert  
    hosts:
    - "*"
---
# Source: canvas-oda/charts/cert-manager-init/templates/IstioIngressIssuer.yaml
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  annotations:
    "helm.sh/hook": post-install
    "helm.sh/hook-weight": "-5"
    "helm.sh/resource-policy": keep
  name: istio-ingress-issuer
  namespace: istio-ingress
spec:
  selfSigned: {}
---
# Source: canvas-oda/charts/cert-manager-init/templates/issuer.yaml
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": post-install
    "helm.sh/hook-weight": "-5"
    "helm.sh/resource-policy": keep
  labels:
    helm.sh/chart: cert-manager-init-1.1.2
    app.kubernetes.io/name: cert-manager-init
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
  name: canvas-cert-manager-init-selfsigned
  namespace:  canvas
spec:
  selfSigned: {}
MANIFEST:
---
# Source: canvas-oda/charts/canvas-namespaces/templates/namespace-cert-manager.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: cert-manager
  annotations:
    "helm.sh/resource-policy": "keep"
  labels:
    helm.sh/chart: canvas-namespaces-1.0.1
    app.kubernetes.io/name: canvas-namespaces
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
---
# Source: canvas-oda/charts/canvas-namespaces/templates/namespace-default.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: components
  annotations:
    "helm.sh/resource-policy": "keep"
  labels:
    helm.sh/chart: canvas-namespaces-1.0.1
    app.kubernetes.io/name: canvas-namespaces
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
    istio-injection: enabled
---
# Source: canvas-oda/charts/canvas-vault/templates/namespace-canvas-vault.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: canvas-vault
  annotations:
    "helm.sh/resource-policy": "keep"
---
# Source: canvas-oda/charts/pdb-management-operator/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: canvas-pdb-management-operator
  namespace: canvas
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: pdb-management-operator
      app.kubernetes.io/instance: canvas
---
# Source: canvas-oda/charts/api-operator-istio/templates/rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  namespace: canvas
  name: apioperator-account
  labels:
    helm.sh/chart: api-operator-istio-1.1.3
    app.kubernetes.io/name: api-operator-istio
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
---
# Source: canvas-oda/charts/canvas-vault/charts/vault/templates/server-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: canvas-vault-hc
  namespace: canvas-vault
  labels:
    helm.sh/chart: vault-0.26.1
    app.kubernetes.io/name: vault-hc
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/cainjector-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  name: canvas-cert-manager-cainjector
  namespace: cert-manager
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  name: canvas-cert-manager
  namespace: cert-manager
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  name: canvas-cert-manager-webhook
  namespace: cert-manager
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
---
# Source: canvas-oda/charts/component-operator/templates/rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  namespace: canvas
  name: odacomponent-account
  labels:
    helm.sh/chart: component-operator-1.4.1
    app.kubernetes.io/name: component-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
---
# Source: canvas-oda/charts/dependentapi-simple-operator/templates/rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  namespace: "canvas"
  name: canvas-depapi-op-account
---
# Source: canvas-oda/charts/identityconfig-operator-keycloak/templates/rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  namespace: canvas
  name: identityconfig-account
  labels:
    helm.sh/chart: identityconfig-operator-keycloak-1.2.7
    app.kubernetes.io/name: identityconfig-operator-keycloak
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
---
# Source: canvas-oda/charts/keycloak/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: canvas-keycloak
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: keycloak
    helm.sh/chart: keycloak-13.0.3
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: keycloak
automountServiceAccountToken: true
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: pdb-management-operator
  namespace: canvas
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
---
# Source: canvas-oda/charts/resource-inventory/templates/rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  namespace: canvas
  name: resourceinventory-account
  labels:
    app: canvas-resource-inventory
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  namespace: "canvas"
  name: canvas-smanop-account
---
# Source: canvas-oda/charts/identityconfig-operator-keycloak/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: identityconfig-operator-keycloak-secret
  labels:
    helm.sh/chart: identityconfig-operator-keycloak-1.2.7
    app.kubernetes.io/name: identityconfig-operator-keycloak
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
  namespace: canvas
data:
  KEYCLOAK_USER: "YWRtaW4="
  KEYCLOAK_PASSWORD: "YWRwYXNz"
---
# Source: canvas-oda/charts/keycloak/charts/postgresql/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: canvas-postgresql
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-12.1.13
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
type: Opaque
data:
  postgres-password: "QVBBa1cxUXQ3YQ=="
  password: "a2V5Y2xvYWtkYnVzZXI="
  # We don't auto-generate LDAP password when it's not provided as we do for other passwords
---
# Source: canvas-oda/charts/keycloak/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: canvas-keycloak
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: keycloak
    helm.sh/chart: keycloak-13.0.3
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: keycloak
type: Opaque
data:
  admin-password: "YWRwYXNz"
---
# Source: canvas-oda/charts/keycloak/templates/tls-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: canvas-keycloak-crt
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: keycloak
    helm.sh/chart: keycloak-13.0.3
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: keycloak
type: Opaque
data:
  tls.crt: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURlakNDQW1LZ0F3SUJBZ0lRSDhZTXRBRFJRVkZrWGxMMndRUkYzakFOQmdrcWhraUc5dzBCQVFzRkFEQVcKTVJRd0VnWURWUVFERXd0clpYbGpiRzloYXkxallUQWVGdzB5TmpBeE1UTXdOelV5TXpCYUZ3MHlOekF4TVRNdwpOelV5TXpCYU1Cb3hHREFXQmdOVkJBTVREMk5oYm5aaGN5MXJaWGxqYkc5aGF6Q0NBU0l3RFFZSktvWklodmNOCkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFMSnRmcUNNd3N3d3BpMU1FUm5KQlh1eEllN3JOY3h5ZUVIT0FxdWEKNVJIeFJCVlorT0wzbmFRb2hRMG8xNW9xN0V1L25WM2d0OW1QSGt1Z2VqNG1BS3psb3JWZTNjUTl0Y09LaS9iSQpJVHVUU0EyZ2h5OWhNMkJabXdGUGYyMWlLZnZmUnp4dlByNWZySktxdlBDWUJzUW5kdFZTQUp5cXpjYnJOVHhKCnc0Q3JTSjdoZ2lPenZiTW5DVW5wZy9qRmR5S1dKdkpZZEVGMW01NXJzcDU3YlRLbm5oeW1Md1p0MzNxeU42SzYKK0pDRTZOOGdqN3NKUnp2aVpnbTd5MEgvZXBobVNkY1NBUmw4Y21PU2YyMGFQUGR3aXJxTTRMSW5kbm1acE5OdAoyRWNYT2VjdEZVdnNIVmFoSTR3cTRob25KbytJS0ZMSjladkRneWhWOXpvTlhMTUNBd0VBQWFPQnZ6Q0J2REFPCkJnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0cKQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVQUzBaeFMwR2l3ZmZNeEFuMURUSVlRcjhYdUV3WEFZRApWUjBSQkZVd1U0SW9ZMkZ1ZG1GekxXdGxlV05zYjJGckxtTmhiblpoY3k1emRtTXVZMngxYzNSbGNpNXNiMk5oCmJJSVdZMkZ1ZG1GekxXdGxlV05zYjJGckxtTmhiblpoYzRJUFkyRnVkbUZ6TFd0bGVXTnNiMkZyTUEwR0NTcUcKU0liM0RRRUJDd1VBQTRJQkFRQTR4T2RmcENQVHB5K2p0YTRYNmVBckJpVXhSeHl4TFJMTUVwVit2RnluVVZhQgpWeVJiSTNvcVdsZTZsQkdkUG1lYzdKSFhqWXdMRzVQQ1NZQUZHUlh6ZVhrK0JkUEdMWDk4allhSmI4OVdrbk9QCjlwR1ZnYnlOUHpKaWJQb2hnaW92VTZKOXVaeit0SmRnajZ3OTFzVUorZ1VUb20zVnY5NFROcnlsZkExbnlBaE8KaEdMTGR4WFJlQmo1Q25TM0I5c2hvQ3BFb0VJWk90cjlVSUluT3VlMitpNTMzZEdRZDczVjhOZmRLS21vTVVKMQplbk1CZDI2eXdhVkd5U2JzbDlCR3JMci9xazNOYmNZNzBJRjJIejhzNlU4NkhiRldnNTFQdlE0T0F3UlBLWFJiCkRFc3lROFhvaUVoWWdGYkVnL1p6b1hZcFJpZ3k0TG5FcmNPVTQ1aGgKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="
  tls.key: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBc20xK29JekN6RENtTFV3Ukdja0ZlN0VoN3VzMXpISjRRYzRDcTVybEVmRkVGVm40CjR2ZWRwQ2lGRFNqWG1pcnNTNytkWGVDMzJZOGVTNkI2UGlZQXJPV2l0VjdkeEQyMXc0cUw5c2doTzVOSURhQ0gKTDJFellGbWJBVTkvYldJcCs5OUhQRzgrdmwrc2txcTg4SmdHeENkMjFWSUFuS3JOeHVzMVBFbkRnS3RJbnVHQwpJN085c3ljSlNlbUQrTVYzSXBZbThsaDBRWFdibm11eW5udHRNcWVlSEtZdkJtM2Zlckkzb3JyNGtJVG8zeUNQCnV3bEhPK0ptQ2J2TFFmOTZtR1pKMXhJQkdYeHlZNUovYlJvODkzQ0t1b3pnc2lkMmVabWswMjNZUnhjNTV5MFYKUyt3ZFZxRWpqQ3JpR2ljbWo0Z29Vc24xbThPREtGWDNPZzFjc3dJREFRQUJBb0lCQUVYV0MzRGxoejBLY1pCYgpMSHBPTHVJNTgxRWpLTHhydFZ2ME9TRlhqLzhVMHBRVTBoQnI0SHluQzJTYUxzRDl1ZHp3RTdUeHhxUFZtNEw0ClBjQmplWEl5c3h1UUZQYkJQSXBiaU9xL2JCcDRUQVJoWjJnSkFHWGV6SWVYeVFWVUhhQ2l4S3dIMHFRS3FHNEQKZTg0amdzcDFzOUpNdFVhY3A4d0t0Wnh5TnAzK1JMVTVxSm94dFlBZ1NmUWV3MENNZHZJcXhtQjU1TkN6K0pHQQpoS2VMZXpKelh2VG1DbzFydC9tTEU2SEdnWnRpQUdDUVhzNjNsMHlVZzcvUTh1OUsxeDM4N013WWNTMXQvSWxuCk1RU3A0UGlVZTFqdjN2azQyYTdUVFg5RUFsdFliOW9QTTkxekFqeWNVdVZ3cjhLcXNGTmdPRFFoU3ZBQ1ZMb04KRzd6Mnd4a0NnWUVBNXFNcHdibFVaNWVSK1NvTXJ4ZG5UdEVENkxmKzRVVk1pR1RXQStLZTFjYVdJN3N0Mk1YVgpvU2dRRFBzRmZ6UmZTeWVTNlZXR1hKT0dCeEdnZENFK1pINWZWRFRuMUlRQ0gvOWtIZWFMOWNBbVpTK25KbUY0Ck9aOXluZzFZN1Z4U2pMdVNtUmlSZFlCRmY0RUgrcXR3Uktqdjd0Q3UyMGIxN25ZZndqamZENTBDZ1lFQXhneUsKWk1vZVdWQWhNL2dPQlJUSnh6U3VmY251WC9OaFRPVXpzam5yVUpMdlp1Qjhyd3B6S2RJdHlXWjh5SDVRRXVyNQpNU2pDS1JUaThJa3VTUHZVZmxzT3BYYUU4TXRXd01jTUErVENWbytSdVlzbEN1VEtqZUpMM3EyT05iUmIxVlhaClIrTm5sODJXLzFxY3VDY3p6YnIwdzdXYnVkY3BJWS9LdmtVNjlJOENnWUJUUUFJS2swTU1RWUhIVm81TmhUMGQKRGdWRE0yY2xHVWFPMVJjTFAvbmxZRkZCaEljQUFDa2tpcm1BZGZ0OTl3R090eklvVjE2d2UrK2REWmZGVTFxYQpHNk45V2J0MDBsR1NDeld3TlUrLzNTUCswanliZGdOWGlWNXQvcE5pMmpoUjVFTCtVQWZ4U2VQTUtsOGU5Rk1KCjlaRGx1eDNpdUxKODZOWjkzTmxuWVFLQmdRREQ3WFlnWGdDR05RcVVBaXZFaFJ0Vmt0MnBIZE5RWTFONElpdngKZnZFNFJoVEhQd0M2bm1qdUQ3c3lTc3phQUhReE12cVIwcE82MXFub2NwNHluOGhKdE1XWmxkWFE3aWtHRUNUbgoyVEVWTjNWZ0RMTDV3dnhNUDNyMWNkZUZjOGVDRnlzY3ZuRW1zY0pYSHdwNStIWjhhaDlwV2tvVUlUTFV2QTlFCkN2TlhLd0tCZ1FDeFB6bHcrQmhnY0U4VVBLcENYUmVkRGlTWmFvQmFEN2QxUmIzc0dGU0tvSGVQS3lYUk1sZlIKMENvUStLcUw5WjczTmNQWWFLRmszTWlxRDI1S05yYUhRQjFQWEE1dkZ1YytlQWluSkZxV1JwUk9hOGIxejhqbwpCVVdhcVd0WGxlaU5CbU5BVzRnNndDS08vYXBoWmRuQ3ZmOHNrUUhGc3BjOG02ckxiOExVM1E9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="
  ca.crt: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHRENDQWdDZ0F3SUJBZ0lSQUtPNmhZd29ZKzRoMU8zR0ZYbEE5Snd3RFFZSktvWklodmNOQVFFTEJRQXcKRmpFVU1CSUdBMVVFQXhNTGEyVjVZMnh2WVdzdFkyRXdIaGNOTWpZd01URXpNRGMxTWpJNVdoY05NamN3TVRFegpNRGMxTWpJNVdqQVdNUlF3RWdZRFZRUURFd3RyWlhsamJHOWhheTFqWVRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCCkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU1rYVNSUUtRMjJiTjhKR3lLSlBGZWg5OXFmRDFhS3hJRFZjUFlZYlQxdXYKYkNpYVVRWk1KS2wwM2hqVUIwdHhZUzVOS1pIbEpxeXhGNHdKZGswYTN4OU04SjA3QjNtWS9EM090N2xFdVNxZgpYUXd0SGRGNksxNkdHb1pQT1pVb1VLY1Zsc0poUmFZU2ZKUHJGbjIwaFFXcDBtV0c1amRLSnVWVHZocWQzNWkxCk5tQVBuT0pMMjJaM2UwQ3Nub3FGNGY5UC91bXd0dlEzdElJMXlVbFFVWENnZEZjNTBwUDRqN1JYR1czU2UrZWkKYVJXMlZvV2VXZjBjTFlubDlQOGNtN0V1d25IdTcvc3V6SUxKNS9pWEVYOE5Wd1hndk54R2tZelJ5SDdxdzRMTApDSXBFempubmpTaWhNRUZSWGFUTmFKdXE3clZWSVB4M1F3eXlscDByaUQ4Q0F3RUFBYU5oTUY4d0RnWURWUjBQCkFRSC9CQVFEQWdLa01CMEdBMVVkSlFRV01CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakFQQmdOVkhSTUIKQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJROUxSbkZMUWFMQjk4ekVDZlVOTWhoQ3Z4ZTRUQU5CZ2txaGtpRwo5dzBCQVFzRkFBT0NBUUVBT0ZnTmNqMU1LWms4UGtKaU9lVmZ3VkZNZFhld2FHaDEzVnFQb0pqd0xTMkNpNlRNCklMNDBNVEN0YTJNaE5rQ0tNeTMxRG1OM1V6Ynl2UkVaSHJZTWk1ZWVBMXN0SUp2dEVTRFZPWlJna1B6dTJXZGEKaFRlUHM0ckZzY25wRkJFNU5rckRlaklHdnhNa2lLTXZESHJacmFkellCUndkUzA5a3dVWWoxRVFPaU1CTGhBWQpXYXdRM0NOWlBwVDN4NUQ0MlZSRGpRQVNONkFXVjFIaHBvWVJVRjhYSE41S2p4alZna1Q0VE1SeUYyMmJtMW0zCnVuN0MrbG5kTG05S1NJY2N6QUN2WmhoRUpjaTdGSENOMHZvdGVXZU9SNmFjZmhSellWNFNjQWRpM1NEYWhUZ3MKVkdQVDVPbjNCWFNmS1Z6bnhuZjVCUXpVZm5XQU1NelZUVlliR3c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
---
# Source: canvas-oda/charts/api-operator-istio/templates/configMap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: api-operator-istio-configmap
  labels:
    helm.sh/chart: api-operator-istio-1.1.3
    app.kubernetes.io/name: api-operator-istio
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
  namespace: canvas
data:
  LOGGING: "20"
  COMPONENT_NAMESPACE: components,odacompns-*
  COMPONENT_NAMESPACES_CLI: -n components -n odacompns-*
  OPENMETRICS_IMPLEMENTATION: "DataDogAnnotation"
  
  APIOPERATORISTIO_COMPONENTGATEWAY: canvas/component-gateway
---
# Source: canvas-oda/charts/canvas-vault/charts/vault/templates/server-config-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: canvas-vault-hc-config
  namespace: canvas-vault
  labels:
    helm.sh/chart: vault-0.26.1
    app.kubernetes.io/name: vault-hc
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
data:
  extraconfig-from-values.hcl: |-
    disable_mlock = true
    ui = true
    listener "tcp" {
      tls_disable = 0
      address = "[::]:8200"
      cluster_address = "[::]:8201"
      tls_cert_file = "/vault/userconfig/canvasvault-tls/tls.crt"
      tls_key_file  = "/vault/userconfig/canvasvault-tls/tls.key"
      tls_client_ca_file = "/vault/userconfig/canvasvault-tls/ca.crt"
    }
    storage "file" {
      path = "/vault/data"
    }
---
# Source: canvas-oda/charts/canvas-vault/templates/canvas-vault-certificate-cm.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: canvas-vault
  name: canvas-canvasvault-cert-cm
data:
  canvas-vault-certificate.yaml: "apiVersion: cert-manager.io/v1\nkind: Certificate\nmetadata:\n
    \ # {{ .Release.Name }}-vault-tls can not be used as name, because the extra env
    variables for hc vault \n  # are defined in values yaml, which does not allow templating
    \n  name: canvasvault-tls\n  # TODO[FH]: this should be\n  # namespace: {{ include
    \"canvasvault.namespace\" . }}\n  # This file is written into a configmap and then
    deployed in a post-install hook,\n  # because cert-manager CRDs are not available
    at deploy time. \n  # This file is not in the tempaltes folder. So, templating does
    not work.\n  # When installation is refactored this can be changed.\n  # Also all
    other occurrences of \"canvas-vault\" namespace / domain name should be replaced
    \n  # then with the template.  \n  namespace: canvas-vault\nspec:\n  commonName:
    canvasvault-tls\n  dnsNames:\n  - canvasvault-tls\n  - canvasvault-tls.canvas-vault\n
    \ - canvasvault-tls.canvas-vault.svc\n  - canvasvault-tls.canvas-vault.svc.cluster.local\n
    \ duration: 21600h0m0s\n  issuerRef:\n    name: canvas-cert-manager-init-selfsigned-cluster\n
    \   kind: ClusterIssuer\n  privateKey:\n    algorithm: RSA\n    encoding: PKCS1\n
    \   size: 2048\n  secretName: canvasvault-tls\n  usages:\n  - digital signature\n
    \ - content commitment\n  - key encipherment\n  - server auth\n"
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: canvas-cert-manager-webhook
  namespace: cert-manager
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
data:
---
# Source: canvas-oda/charts/component-operator/templates/configMap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: component-operator-configmap
  labels:
    helm.sh/chart: component-operator-1.4.1
    app.kubernetes.io/name: component-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
  namespace: canvas
data:
  LOGGING: "20"
  COMPONENT_NAMESPACE: "components,odacompns-*"
  COMPONENT_NAMESPACES_CLI: -n components -n odacompns-*
---
# Source: canvas-oda/charts/identityconfig-operator-keycloak/templates/configMap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: identityconfig-operator-keycloak-configmap
  labels:
    helm.sh/chart: identityconfig-operator-keycloak-1.2.7
    app.kubernetes.io/name: identityconfig-operator-keycloak
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
  namespace: canvas
data:
  LOGGING: "20"
  KEYCLOAK_BASE: "http://canvas-keycloak-headless.canvas:8083/auth"
  KEYCLOAK_REALM: "odari"
  COMPONENT_NAMESPACE: "components,odacompns-*"
  COMPONENT_NAMESPACES_CLI: -n components -n odacompns-*
---
# Source: canvas-oda/charts/keycloak/templates/configmap-env-vars.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: canvas-keycloak-env-vars
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: keycloak
    helm.sh/chart: keycloak-13.0.3
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: keycloak
data:
  KEYCLOAK_ADMIN: "admin"
  KEYCLOAK_HTTP_PORT: "8083"
  KEYCLOAK_PROXY: "passthrough"
  KEYCLOAK_ENABLE_STATISTICS: "false"
  KEYCLOAK_DATABASE_HOST: "canvas-postgresql"
  KEYCLOAK_DATABASE_PORT: "5432"
  KEYCLOAK_DATABASE_NAME: "keycloak"
  KEYCLOAK_DATABASE_USER: "keycloak"
  KEYCLOAK_PRODUCTION:  "false"
  KEYCLOAK_ENABLE_HTTPS: "true"
  KEYCLOAK_HTTPS_PORT: "8443"
  KEYCLOAK_HTTPS_USE_PEM: "true"
  KEYCLOAK_HTTPS_CERTIFICATE_FILE: "/opt/bitnami/keycloak/certs/tls.crt"
  KEYCLOAK_HTTPS_CERTIFICATE_KEY_FILE: "/opt/bitnami/keycloak/certs/tls.key"
  KEYCLOAK_CACHE_TYPE: "ispn"
  KEYCLOAK_CACHE_STACK: "kubernetes"
  JAVA_OPTS_APPEND: "-Djgroups.dns.query=canvas-keycloak-headless.canvas.svc.cluster.local"
  KEYCLOAK_LOG_OUTPUT: "default"
  KC_LOG_LEVEL: "INFO"
---
# Source: canvas-oda/charts/keycloak/templates/keycloak-config-cli-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: canvas-keycloak-keycloak-config-cli-configmap
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: keycloak
    helm.sh/chart: keycloak-13.0.3
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: keycloak-config-cli
data:
  odari.json: |
    {
      "enabled": true,
      "realm": "odari",
      "clients": [
        {
          "clientId": "canvassystem",
          "name": "Canvas System",
          "enabled": true,
          "standardFlowEnabled": false,
          "serviceAccountsEnabled": true
        },
        {
          "clientId": "credentialsmanagement-operator",
          "name": "Credentials Management Operator",
          "enabled": true,
          "standardFlowEnabled": false,
          "serviceAccountsEnabled": true
        }
      ],
      "users": [
        {
        "username": "service-account-canvassystem",
        "enabled": true,
        "clientRoles": {
          "realm-management": [
            "manage-clients"
          ]
         }
        },
        {
        "username": "service-account-credentialsmanagement-operator",
        "enabled": true,
        "clientRoles": {
          "realm-management": [
            "view-clients"
          ]
         }
        }
      ]
    }
---
# Source: canvas-oda/charts/canvas-info-service/templates/mongodb-persistentVolumeClaim.yaml
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: canvas-svcinv-mongodb-pv-claim
  labels:
    app: canvas-svcinv-mongodb
spec:
  
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/crds.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: clusterissuers.cert-manager.io
  labels:
    app: 'cert-manager'
    app.kubernetes.io/name: 'cert-manager'
    app.kubernetes.io/instance: 'canvas'
    # Generated labels
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  group: cert-manager.io
  names:
    kind: ClusterIssuer
    listKind: ClusterIssuerList
    plural: clusterissuers
    singular: clusterissuer
    categories:
      - cert-manager
  scope: Cluster
  versions:
    - name: v1
      subresources:
        status: {}
      additionalPrinterColumns:
        - jsonPath: .status.conditions[?(@.type=="Ready")].status
          name: Ready
          type: string
        - jsonPath: .status.conditions[?(@.type=="Ready")].message
          name: Status
          priority: 1
          type: string
        - jsonPath: .metadata.creationTimestamp
          description: CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          name: Age
          type: date
      schema:
        openAPIV3Schema:
          description: A ClusterIssuer represents a certificate issuing authority which can be referenced as part of `issuerRef` fields. It is similar to an Issuer, however it is cluster-scoped and therefore can be referenced by resources that exist in *any* namespace, not just the same namespace as the referent.
          type: object
          required:
            - spec
          properties:
            apiVersion:
              description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
              type: string
            kind:
              description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
              type: string
            metadata:
              type: object
            spec:
              description: Desired state of the ClusterIssuer resource.
              type: object
              properties:
                acme:
                  description: ACME configures this issuer to communicate with a RFC8555 (ACME) server to obtain signed x509 certificates.
                  type: object
                  required:
                    - privateKeySecretRef
                    - server
                  properties:
                    caBundle:
                      description: Base64-encoded bundle of PEM CAs which can be used to validate the certificate chain presented by the ACME server. Mutually exclusive with SkipTLSVerify; prefer using CABundle to prevent various kinds of security vulnerabilities. If CABundle and SkipTLSVerify are unset, the system certificate bundle inside the container is used to validate the TLS connection.
                      type: string
                      format: byte
                    disableAccountKeyGeneration:
                      description: Enables or disables generating a new ACME account key. If true, the Issuer resource will *not* request a new account but will expect the account key to be supplied via an existing secret. If false, the cert-manager system will generate a new ACME account key for the Issuer. Defaults to false.
                      type: boolean
                    email:
                      description: Email is the email address to be associated with the ACME account. This field is optional, but it is strongly recommended to be set. It will be used to contact you in case of issues with your account or certificates, including expiry notification emails. This field may be updated after the account is initially registered.
                      type: string
                    enableDurationFeature:
                      description: Enables requesting a Not After date on certificates that matches the duration of the certificate. This is not supported by all ACME servers like Let's Encrypt. If set to true when the ACME server does not support it it will create an error on the Order. Defaults to false.
                      type: boolean
                    externalAccountBinding:
                      description: ExternalAccountBinding is a reference to a CA external account of the ACME server. If set, upon registration cert-manager will attempt to associate the given external account credentials with the registered ACME account.
                      type: object
                      required:
                        - keyID
                        - keySecretRef
                      properties:
                        keyAlgorithm:
                          description: 'Deprecated: keyAlgorithm field exists for historical compatibility reasons and should not be used. The algorithm is now hardcoded to HS256 in golang/x/crypto/acme.'
                          type: string
                          enum:
                            - HS256
                            - HS384
                            - HS512
                        keyID:
                          description: keyID is the ID of the CA key that the External Account is bound to.
                          type: string
                        keySecretRef:
                          description: keySecretRef is a Secret Key Selector referencing a data item in a Kubernetes Secret which holds the symmetric MAC key of the External Account Binding. The `key` is the index string that is paired with the key data in the Secret and should not be confused with the key data itself, or indeed with the External Account Binding keyID above. The secret key stored in the Secret **must** be un-padded, base64 URL encoded data.
                          type: object
                          required:
                            - name
                          properties:
                            key:
                              description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                              type: string
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                    preferredChain:
                      description: 'PreferredChain is the chain to use if the ACME server outputs multiple. PreferredChain is no guarantee that this one gets delivered by the ACME endpoint. For example, for Let''s Encrypt''s DST crosssign you would use: "DST Root CA X3" or "ISRG Root X1" for the newer Let''s Encrypt root CA. This value picks the first certificate bundle in the ACME alternative chains that has a certificate with this value as its issuer''s CN'
                      type: string
                      maxLength: 64
                    privateKeySecretRef:
                      description: PrivateKey is the name of a Kubernetes Secret resource that will be used to store the automatically generated ACME account private key. Optionally, a `key` may be specified to select a specific entry within the named Secret resource. If `key` is not specified, a default of `tls.key` will be used.
                      type: object
                      required:
                        - name
                      properties:
                        key:
                          description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                          type: string
                        name:
                          description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                          type: string
                    server:
                      description: 'Server is the URL used to access the ACME server''s ''directory'' endpoint. For example, for Let''s Encrypt''s staging endpoint, you would use: "https://acme-staging-v02.api.letsencrypt.org/directory". Only ACME v2 endpoints (i.e. RFC 8555) are supported.'
                      type: string
                    skipTLSVerify:
                      description: 'INSECURE: Enables or disables validation of the ACME server TLS certificate. If true, requests to the ACME server will not have the TLS certificate chain validated. Mutually exclusive with CABundle; prefer using CABundle to prevent various kinds of security vulnerabilities. Only enable this option in development environments. If CABundle and SkipTLSVerify are unset, the system certificate bundle inside the container is used to validate the TLS connection. Defaults to false.'
                      type: boolean
                    solvers:
                      description: 'Solvers is a list of challenge solvers that will be used to solve ACME challenges for the matching domains. Solver configurations must be provided in order to obtain certificates from an ACME server. For more information, see: https://cert-manager.io/docs/configuration/acme/'
                      type: array
                      items:
                        description: An ACMEChallengeSolver describes how to solve ACME challenges for the issuer it is part of. A selector may be provided to use different solving strategies for different DNS names. Only one of HTTP01 or DNS01 must be provided.
                        type: object
                        properties:
                          dns01:
                            description: Configures cert-manager to attempt to complete authorizations by performing the DNS01 challenge flow.
                            type: object
                            properties:
                              acmeDNS:
                                description: Use the 'ACME DNS' (https://github.com/joohoi/acme-dns) API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - accountSecretRef
                                  - host
                                properties:
                                  accountSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  host:
                                    type: string
                              akamai:
                                description: Use the Akamai DNS zone management API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - accessTokenSecretRef
                                  - clientSecretSecretRef
                                  - clientTokenSecretRef
                                  - serviceConsumerDomain
                                properties:
                                  accessTokenSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  clientSecretSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  clientTokenSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  serviceConsumerDomain:
                                    type: string
                              azureDNS:
                                description: Use the Microsoft Azure DNS API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - resourceGroupName
                                  - subscriptionID
                                properties:
                                  clientID:
                                    description: if both this and ClientSecret are left unset MSI will be used
                                    type: string
                                  clientSecretSecretRef:
                                    description: if both this and ClientID are left unset MSI will be used
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  environment:
                                    description: name of the Azure environment (default AzurePublicCloud)
                                    type: string
                                    enum:
                                      - AzurePublicCloud
                                      - AzureChinaCloud
                                      - AzureGermanCloud
                                      - AzureUSGovernmentCloud
                                  hostedZoneName:
                                    description: name of the DNS zone that should be used
                                    type: string
                                  managedIdentity:
                                    description: managed identity configuration, can not be used at the same time as clientID, clientSecretSecretRef or tenantID
                                    type: object
                                    properties:
                                      clientID:
                                        description: client ID of the managed identity, can not be used at the same time as resourceID
                                        type: string
                                      resourceID:
                                        description: resource ID of the managed identity, can not be used at the same time as clientID
                                        type: string
                                  resourceGroupName:
                                    description: resource group the DNS zone is located in
                                    type: string
                                  subscriptionID:
                                    description: ID of the Azure subscription
                                    type: string
                                  tenantID:
                                    description: when specifying ClientID and ClientSecret then this field is also needed
                                    type: string
                              cloudDNS:
                                description: Use the Google Cloud DNS API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - project
                                properties:
                                  hostedZoneName:
                                    description: HostedZoneName is an optional field that tells cert-manager in which Cloud DNS zone the challenge record has to be created. If left empty cert-manager will automatically choose a zone.
                                    type: string
                                  project:
                                    type: string
                                  serviceAccountSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                              cloudflare:
                                description: Use the Cloudflare API to manage DNS01 challenge records.
                                type: object
                                properties:
                                  apiKeySecretRef:
                                    description: 'API key to use to authenticate with Cloudflare. Note: using an API token to authenticate is now the recommended method as it allows greater control of permissions.'
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  apiTokenSecretRef:
                                    description: API token used to authenticate with Cloudflare.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  email:
                                    description: Email of the account, only required when using API key based authentication.
                                    type: string
                              cnameStrategy:
                                description: CNAMEStrategy configures how the DNS01 provider should handle CNAME records when found in DNS zones.
                                type: string
                                enum:
                                  - None
                                  - Follow
                              digitalocean:
                                description: Use the DigitalOcean DNS API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - tokenSecretRef
                                properties:
                                  tokenSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                              rfc2136:
                                description: Use RFC2136 ("Dynamic Updates in the Domain Name System") (https://datatracker.ietf.org/doc/rfc2136/) to manage DNS01 challenge records.
                                type: object
                                required:
                                  - nameserver
                                properties:
                                  nameserver:
                                    description: The IP address or hostname of an authoritative DNS server supporting RFC2136 in the form host:port. If the host is an IPv6 address it must be enclosed in square brackets (e.g [2001:db8::1]); port is optional. This field is required.
                                    type: string
                                  tsigAlgorithm:
                                    description: 'The TSIG Algorithm configured in the DNS supporting RFC2136. Used only when ``tsigSecretSecretRef`` and ``tsigKeyName`` are defined. Supported values are (case-insensitive): ``HMACMD5`` (default), ``HMACSHA1``, ``HMACSHA256`` or ``HMACSHA512``.'
                                    type: string
                                  tsigKeyName:
                                    description: The TSIG Key name configured in the DNS. If ``tsigSecretSecretRef`` is defined, this field is required.
                                    type: string
                                  tsigSecretSecretRef:
                                    description: The name of the secret containing the TSIG value. If ``tsigKeyName`` is defined, this field is required.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                              route53:
                                description: Use the AWS Route53 API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - region
                                properties:
                                  accessKeyID:
                                    description: 'The AccessKeyID is used for authentication. Cannot be set when SecretAccessKeyID is set. If neither the Access Key nor Key ID are set, we fall-back to using env vars, shared credentials file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                    type: string
                                  accessKeyIDSecretRef:
                                    description: 'The SecretAccessKey is used for authentication. If set, pull the AWS access key ID from a key within a Kubernetes Secret. Cannot be set when AccessKeyID is set. If neither the Access Key nor Key ID are set, we fall-back to using env vars, shared credentials file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  hostedZoneID:
                                    description: If set, the provider will manage only this zone in Route53 and will not do an lookup using the route53:ListHostedZonesByName api call.
                                    type: string
                                  region:
                                    description: Always set the region when using AccessKeyID and SecretAccessKey
                                    type: string
                                  role:
                                    description: Role is a Role ARN which the Route53 provider will assume using either the explicit credentials AccessKeyID/SecretAccessKey or the inferred credentials from environment variables, shared credentials file or AWS Instance metadata
                                    type: string
                                  secretAccessKeySecretRef:
                                    description: 'The SecretAccessKey is used for authentication. If neither the Access Key nor Key ID are set, we fall-back to using env vars, shared credentials file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                              webhook:
                                description: Configure an external webhook based DNS01 challenge solver to manage DNS01 challenge records.
                                type: object
                                required:
                                  - groupName
                                  - solverName
                                properties:
                                  config:
                                    description: Additional configuration that should be passed to the webhook apiserver when challenges are processed. This can contain arbitrary JSON data. Secret values should not be specified in this stanza. If secret values are needed (e.g. credentials for a DNS service), you should use a SecretKeySelector to reference a Secret resource. For details on the schema of this field, consult the webhook provider implementation's documentation.
                                    x-kubernetes-preserve-unknown-fields: true
                                  groupName:
                                    description: The API group name that should be used when POSTing ChallengePayload resources to the webhook apiserver. This should be the same as the GroupName specified in the webhook provider implementation.
                                    type: string
                                  solverName:
                                    description: The name of the solver to use, as defined in the webhook provider implementation. This will typically be the name of the provider, e.g. 'cloudflare'.
                                    type: string
                          http01:
                            description: Configures cert-manager to attempt to complete authorizations by performing the HTTP01 challenge flow. It is not possible to obtain certificates for wildcard domain names (e.g. `*.example.com`) using the HTTP01 challenge mechanism.
                            type: object
                            properties:
                              gatewayHTTPRoute:
                                description: The Gateway API is a sig-network community API that models service networking in Kubernetes (https://gateway-api.sigs.k8s.io/). The Gateway solver will create HTTPRoutes with the specified labels in the same namespace as the challenge. This solver is experimental, and fields / behaviour may change in the future.
                                type: object
                                properties:
                                  labels:
                                    description: Custom labels that will be applied to HTTPRoutes created by cert-manager while solving HTTP-01 challenges.
                                    type: object
                                    additionalProperties:
                                      type: string
                                  parentRefs:
                                    description: 'When solving an HTTP-01 challenge, cert-manager creates an HTTPRoute. cert-manager needs to know which parentRefs should be used when creating the HTTPRoute. Usually, the parentRef references a Gateway. See: https://gateway-api.sigs.k8s.io/api-types/httproute/#attaching-to-gateways'
                                    type: array
                                    items:
                                      description: "ParentReference identifies an API object (usually a Gateway) that can be considered a parent of this resource (usually a route). The only kind of parent resource with \"Core\" support is Gateway. This API may be extended in the future to support additional kinds of parent resources, such as HTTPRoute. \n The API object must be valid in the cluster; the Group and Kind must be registered in the cluster for this reference to be valid."
                                      type: object
                                      required:
                                        - name
                                      properties:
                                        group:
                                          description: "Group is the group of the referent. When unspecified, \"gateway.networking.k8s.io\" is inferred. To set the core API group (such as for a \"Service\" kind referent), Group must be explicitly set to \"\" (empty string). \n Support: Core"
                                          type: string
                                          default: gateway.networking.k8s.io
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                        kind:
                                          description: "Kind is kind of the referent. \n Support: Core (Gateway) \n Support: Implementation-specific (Other Resources)"
                                          type: string
                                          default: Gateway
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                        name:
                                          description: "Name is the name of the referent. \n Support: Core"
                                          type: string
                                          maxLength: 253
                                          minLength: 1
                                        namespace:
                                          description: "Namespace is the namespace of the referent. When unspecified, this refers to the local namespace of the Route. \n Note that there are specific rules for ParentRefs which cross namespace boundaries. Cross-namespace references are only valid if they are explicitly allowed by something in the namespace they are referring to. For example: Gateway has the AllowedRoutes field, and ReferenceGrant provides a generic way to enable any other kind of cross-namespace reference. \n Support: Core"
                                          type: string
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                        port:
                                          description: "Port is the network port this Route targets. It can be interpreted differently based on the type of parent resource. \n When the parent resource is a Gateway, this targets all listeners listening on the specified port that also support this kind of Route(and select this Route). It's not recommended to set `Port` unless the networking behaviors specified in a Route must apply to a specific port as opposed to a listener(s) whose port(s) may be changed. When both Port and SectionName are specified, the name and port of the selected listener must match both specified values. \n Implementations MAY choose to support other parent resources. Implementations supporting other types of parent resources MUST clearly document how/if Port is interpreted. \n For the purpose of status, an attachment is considered successful as long as the parent resource accepts it partially. For example, Gateway listeners can restrict which Routes can attach to them by Route kind, namespace, or hostname. If 1 of 2 Gateway listeners accept attachment from the referencing Route, the Route MUST be considered successfully attached. If no Gateway listeners accept attachment from this Route, the Route MUST be considered detached from the Gateway. \n Support: Extended \n <gateway:experimental>"
                                          type: integer
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                        sectionName:
                                          description: "SectionName is the name of a section within the target resource. In the following resources, SectionName is interpreted as the following: \n * Gateway: Listener Name. When both Port (experimental) and SectionName are specified, the name and port of the selected listener must match both specified values. \n Implementations MAY choose to support attaching Routes to other resources. If that is the case, they MUST clearly document how SectionName is interpreted. \n When unspecified (empty string), this will reference the entire resource. For the purpose of status, an attachment is considered successful if at least one section in the parent resource accepts it. For example, Gateway listeners can restrict which Routes can attach to them by Route kind, namespace, or hostname. If 1 of 2 Gateway listeners accept attachment from the referencing Route, the Route MUST be considered successfully attached. If no Gateway listeners accept attachment from this Route, the Route MUST be considered detached from the Gateway. \n Support: Core"
                                          type: string
                                          maxLength: 253
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                  serviceType:
                                    description: Optional service type for Kubernetes solver service. Supported values are NodePort or ClusterIP. If unset, defaults to NodePort.
                                    type: string
                              ingress:
                                description: The ingress based HTTP01 challenge solver will solve challenges by creating or modifying Ingress resources in order to route requests for '/.well-known/acme-challenge/XYZ' to 'challenge solver' pods that are provisioned by cert-manager for each Challenge to be completed.
                                type: object
                                properties:
                                  class:
                                    description: The ingress class to use when creating Ingress resources to solve ACME challenges that use this challenge solver. Only one of 'class' or 'name' may be specified.
                                    type: string
                                  ingressTemplate:
                                    description: Optional ingress template used to configure the ACME challenge solver ingress used for HTTP01 challenges.
                                    type: object
                                    properties:
                                      metadata:
                                        description: ObjectMeta overrides for the ingress used to solve HTTP01 challenges. Only the 'labels' and 'annotations' fields may be set. If labels or annotations overlap with in-built values, the values here will override the in-built values.
                                        type: object
                                        properties:
                                          annotations:
                                            description: Annotations that should be added to the created ACME HTTP01 solver ingress.
                                            type: object
                                            additionalProperties:
                                              type: string
                                          labels:
                                            description: Labels that should be added to the created ACME HTTP01 solver ingress.
                                            type: object
                                            additionalProperties:
                                              type: string
                                  name:
                                    description: The name of the ingress resource that should have ACME challenge solving routes inserted into it in order to solve HTTP01 challenges. This is typically used in conjunction with ingress controllers like ingress-gce, which maintains a 1:1 mapping between external IPs and ingress resources.
                                    type: string
                                  podTemplate:
                                    description: Optional pod template used to configure the ACME challenge solver pods used for HTTP01 challenges.
                                    type: object
                                    properties:
                                      metadata:
                                        description: ObjectMeta overrides for the pod used to solve HTTP01 challenges. Only the 'labels' and 'annotations' fields may be set. If labels or annotations overlap with in-built values, the values here will override the in-built values.
                                        type: object
                                        properties:
                                          annotations:
                                            description: Annotations that should be added to the create ACME HTTP01 solver pods.
                                            type: object
                                            additionalProperties:
                                              type: string
                                          labels:
                                            description: Labels that should be added to the created ACME HTTP01 solver pods.
                                            type: object
                                            additionalProperties:
                                              type: string
                                      spec:
                                        description: PodSpec defines overrides for the HTTP01 challenge solver pod. Only the 'priorityClassName', 'nodeSelector', 'affinity', 'serviceAccountName' and 'tolerations' fields are supported currently. All other fields will be ignored.
                                        type: object
                                        properties:
                                          affinity:
                                            description: If specified, the pod's scheduling constraints
                                            type: object
                                            properties:
                                              nodeAffinity:
                                                description: Describes node affinity scheduling rules for the pod.
                                                type: object
                                                properties:
                                                  preferredDuringSchedulingIgnoredDuringExecution:
                                                    description: The scheduler will prefer to schedule pods to nodes that satisfy the affinity expressions specified by this field, but it may choose a node that violates one or more of the expressions. The node that is most preferred is the one with the greatest sum of weights, i.e. for each node that meets all of the scheduling requirements (resource request, requiredDuringScheduling affinity expressions, etc.), compute a sum by iterating through the elements of this field and adding "weight" to the sum if the node matches the corresponding matchExpressions; the node(s) with the highest sum are the most preferred.
                                                    type: array
                                                    items:
                                                      description: An empty preferred scheduling term matches all objects with implicit weight 0 (i.e. it's a no-op). A null preferred scheduling term matches no objects (i.e. is also a no-op).
                                                      type: object
                                                      required:
                                                        - preference
                                                        - weight
                                                      properties:
                                                        preference:
                                                          description: A node selector term, associated with the corresponding weight.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: A list of node selector requirements by node's labels.
                                                              type: array
                                                              items:
                                                                description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: The label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                                    type: string
                                                                  values:
                                                                    description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchFields:
                                                              description: A list of node selector requirements by node's fields.
                                                              type: array
                                                              items:
                                                                description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: The label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                                    type: string
                                                                  values:
                                                                    description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                          x-kubernetes-map-type: atomic
                                                        weight:
                                                          description: Weight associated with matching the corresponding nodeSelectorTerm, in the range 1-100.
                                                          type: integer
                                                          format: int32
                                                  requiredDuringSchedulingIgnoredDuringExecution:
                                                    description: If the affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node. If the affinity requirements specified by this field cease to be met at some point during pod execution (e.g. due to an update), the system may or may not try to eventually evict the pod from its node.
                                                    type: object
                                                    required:
                                                      - nodeSelectorTerms
                                                    properties:
                                                      nodeSelectorTerms:
                                                        description: Required. A list of node selector terms. The terms are ORed.
                                                        type: array
                                                        items:
                                                          description: A null or empty node selector term matches no objects. The requirements of them are ANDed. The TopologySelectorTerm type implements a subset of the NodeSelectorTerm.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: A list of node selector requirements by node's labels.
                                                              type: array
                                                              items:
                                                                description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: The label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                                    type: string
                                                                  values:
                                                                    description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchFields:
                                                              description: A list of node selector requirements by node's fields.
                                                              type: array
                                                              items:
                                                                description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: The label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                                    type: string
                                                                  values:
                                                                    description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                          x-kubernetes-map-type: atomic
                                                    x-kubernetes-map-type: atomic
                                              podAffinity:
                                                description: Describes pod affinity scheduling rules (e.g. co-locate this pod in the same node, zone, etc. as some other pod(s)).
                                                type: object
                                                properties:
                                                  preferredDuringSchedulingIgnoredDuringExecution:
                                                    description: The scheduler will prefer to schedule pods to nodes that satisfy the affinity expressions specified by this field, but it may choose a node that violates one or more of the expressions. The node that is most preferred is the one with the greatest sum of weights, i.e. for each node that meets all of the scheduling requirements (resource request, requiredDuringScheduling affinity expressions, etc.), compute a sum by iterating through the elements of this field and adding "weight" to the sum if the node has pods which matches the corresponding podAffinityTerm; the node(s) with the highest sum are the most preferred.
                                                    type: array
                                                    items:
                                                      description: The weights of all of the matched WeightedPodAffinityTerm fields are added per-node to find the most preferred node(s)
                                                      type: object
                                                      required:
                                                        - podAffinityTerm
                                                        - weight
                                                      properties:
                                                        podAffinityTerm:
                                                          description: Required. A pod affinity term, associated with the corresponding weight.
                                                          type: object
                                                          required:
                                                            - topologyKey
                                                          properties:
                                                            labelSelector:
                                                              description: A label query over a set of resources, in this case pods.
                                                              type: object
                                                              properties:
                                                                matchExpressions:
                                                                  description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                                  type: array
                                                                  items:
                                                                    description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                    type: object
                                                                    required:
                                                                      - key
                                                                      - operator
                                                                    properties:
                                                                      key:
                                                                        description: key is the label key that the selector applies to.
                                                                        type: string
                                                                      operator:
                                                                        description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                        type: string
                                                                      values:
                                                                        description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                        type: array
                                                                        items:
                                                                          type: string
                                                                matchLabels:
                                                                  description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                                  type: object
                                                                  additionalProperties:
                                                                    type: string
                                                              x-kubernetes-map-type: atomic
                                                            namespaceSelector:
                                                              description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                              type: object
                                                              properties:
                                                                matchExpressions:
                                                                  description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                                  type: array
                                                                  items:
                                                                    description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                    type: object
                                                                    required:
                                                                      - key
                                                                      - operator
                                                                    properties:
                                                                      key:
                                                                        description: key is the label key that the selector applies to.
                                                                        type: string
                                                                      operator:
                                                                        description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                        type: string
                                                                      values:
                                                                        description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                        type: array
                                                                        items:
                                                                          type: string
                                                                matchLabels:
                                                                  description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                                  type: object
                                                                  additionalProperties:
                                                                    type: string
                                                              x-kubernetes-map-type: atomic
                                                            namespaces:
                                                              description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                              type: array
                                                              items:
                                                                type: string
                                                            topologyKey:
                                                              description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                              type: string
                                                        weight:
                                                          description: weight associated with matching the corresponding podAffinityTerm, in the range 1-100.
                                                          type: integer
                                                          format: int32
                                                  requiredDuringSchedulingIgnoredDuringExecution:
                                                    description: If the affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node. If the affinity requirements specified by this field cease to be met at some point during pod execution (e.g. due to a pod label update), the system may or may not try to eventually evict the pod from its node. When there are multiple elements, the lists of nodes corresponding to each podAffinityTerm are intersected, i.e. all terms must be satisfied.
                                                    type: array
                                                    items:
                                                      description: Defines a set of pods (namely those matching the labelSelector relative to the given namespace(s)) that this pod should be co-located (affinity) or not co-located (anti-affinity) with, where co-located is defined as running on a node whose value of the label with key <topologyKey> matches that of any node on which a pod of the set of pods is running
                                                      type: object
                                                      required:
                                                        - topologyKey
                                                      properties:
                                                        labelSelector:
                                                          description: A label query over a set of resources, in this case pods.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                              type: array
                                                              items:
                                                                description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: key is the label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                    type: string
                                                                  values:
                                                                    description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchLabels:
                                                              description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                              type: object
                                                              additionalProperties:
                                                                type: string
                                                          x-kubernetes-map-type: atomic
                                                        namespaceSelector:
                                                          description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                              type: array
                                                              items:
                                                                description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: key is the label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                    type: string
                                                                  values:
                                                                    description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchLabels:
                                                              description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                              type: object
                                                              additionalProperties:
                                                                type: string
                                                          x-kubernetes-map-type: atomic
                                                        namespaces:
                                                          description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                          type: array
                                                          items:
                                                            type: string
                                                        topologyKey:
                                                          description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                          type: string
                                              podAntiAffinity:
                                                description: Describes pod anti-affinity scheduling rules (e.g. avoid putting this pod in the same node, zone, etc. as some other pod(s)).
                                                type: object
                                                properties:
                                                  preferredDuringSchedulingIgnoredDuringExecution:
                                                    description: The scheduler will prefer to schedule pods to nodes that satisfy the anti-affinity expressions specified by this field, but it may choose a node that violates one or more of the expressions. The node that is most preferred is the one with the greatest sum of weights, i.e. for each node that meets all of the scheduling requirements (resource request, requiredDuringScheduling anti-affinity expressions, etc.), compute a sum by iterating through the elements of this field and adding "weight" to the sum if the node has pods which matches the corresponding podAffinityTerm; the node(s) with the highest sum are the most preferred.
                                                    type: array
                                                    items:
                                                      description: The weights of all of the matched WeightedPodAffinityTerm fields are added per-node to find the most preferred node(s)
                                                      type: object
                                                      required:
                                                        - podAffinityTerm
                                                        - weight
                                                      properties:
                                                        podAffinityTerm:
                                                          description: Required. A pod affinity term, associated with the corresponding weight.
                                                          type: object
                                                          required:
                                                            - topologyKey
                                                          properties:
                                                            labelSelector:
                                                              description: A label query over a set of resources, in this case pods.
                                                              type: object
                                                              properties:
                                                                matchExpressions:
                                                                  description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                                  type: array
                                                                  items:
                                                                    description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                    type: object
                                                                    required:
                                                                      - key
                                                                      - operator
                                                                    properties:
                                                                      key:
                                                                        description: key is the label key that the selector applies to.
                                                                        type: string
                                                                      operator:
                                                                        description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                        type: string
                                                                      values:
                                                                        description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                        type: array
                                                                        items:
                                                                          type: string
                                                                matchLabels:
                                                                  description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                                  type: object
                                                                  additionalProperties:
                                                                    type: string
                                                              x-kubernetes-map-type: atomic
                                                            namespaceSelector:
                                                              description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                              type: object
                                                              properties:
                                                                matchExpressions:
                                                                  description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                                  type: array
                                                                  items:
                                                                    description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                    type: object
                                                                    required:
                                                                      - key
                                                                      - operator
                                                                    properties:
                                                                      key:
                                                                        description: key is the label key that the selector applies to.
                                                                        type: string
                                                                      operator:
                                                                        description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                        type: string
                                                                      values:
                                                                        description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                        type: array
                                                                        items:
                                                                          type: string
                                                                matchLabels:
                                                                  description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                                  type: object
                                                                  additionalProperties:
                                                                    type: string
                                                              x-kubernetes-map-type: atomic
                                                            namespaces:
                                                              description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                              type: array
                                                              items:
                                                                type: string
                                                            topologyKey:
                                                              description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                              type: string
                                                        weight:
                                                          description: weight associated with matching the corresponding podAffinityTerm, in the range 1-100.
                                                          type: integer
                                                          format: int32
                                                  requiredDuringSchedulingIgnoredDuringExecution:
                                                    description: If the anti-affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node. If the anti-affinity requirements specified by this field cease to be met at some point during pod execution (e.g. due to a pod label update), the system may or may not try to eventually evict the pod from its node. When there are multiple elements, the lists of nodes corresponding to each podAffinityTerm are intersected, i.e. all terms must be satisfied.
                                                    type: array
                                                    items:
                                                      description: Defines a set of pods (namely those matching the labelSelector relative to the given namespace(s)) that this pod should be co-located (affinity) or not co-located (anti-affinity) with, where co-located is defined as running on a node whose value of the label with key <topologyKey> matches that of any node on which a pod of the set of pods is running
                                                      type: object
                                                      required:
                                                        - topologyKey
                                                      properties:
                                                        labelSelector:
                                                          description: A label query over a set of resources, in this case pods.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                              type: array
                                                              items:
                                                                description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: key is the label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                    type: string
                                                                  values:
                                                                    description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchLabels:
                                                              description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                              type: object
                                                              additionalProperties:
                                                                type: string
                                                          x-kubernetes-map-type: atomic
                                                        namespaceSelector:
                                                          description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                              type: array
                                                              items:
                                                                description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: key is the label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                    type: string
                                                                  values:
                                                                    description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchLabels:
                                                              description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                              type: object
                                                              additionalProperties:
                                                                type: string
                                                          x-kubernetes-map-type: atomic
                                                        namespaces:
                                                          description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                          type: array
                                                          items:
                                                            type: string
                                                        topologyKey:
                                                          description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                          type: string
                                          nodeSelector:
                                            description: 'NodeSelector is a selector which must be true for the pod to fit on a node. Selector which must match a node''s labels for the pod to be scheduled on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/'
                                            type: object
                                            additionalProperties:
                                              type: string
                                          priorityClassName:
                                            description: If specified, the pod's priorityClassName.
                                            type: string
                                          serviceAccountName:
                                            description: If specified, the pod's service account
                                            type: string
                                          tolerations:
                                            description: If specified, the pod's tolerations.
                                            type: array
                                            items:
                                              description: The pod this Toleration is attached to tolerates any taint that matches the triple <key,value,effect> using the matching operator <operator>.
                                              type: object
                                              properties:
                                                effect:
                                                  description: Effect indicates the taint effect to match. Empty means match all taint effects. When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                                  type: string
                                                key:
                                                  description: Key is the taint key that the toleration applies to. Empty means match all taint keys. If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                                  type: string
                                                operator:
                                                  description: Operator represents a key's relationship to the value. Valid operators are Exists and Equal. Defaults to Equal. Exists is equivalent to wildcard for value, so that a pod can tolerate all taints of a particular category.
                                                  type: string
                                                tolerationSeconds:
                                                  description: TolerationSeconds represents the period of time the toleration (which must be of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default, it is not set, which means tolerate the taint forever (do not evict). Zero and negative values will be treated as 0 (evict immediately) by the system.
                                                  type: integer
                                                  format: int64
                                                value:
                                                  description: Value is the taint value the toleration matches to. If the operator is Exists, the value should be empty, otherwise just a regular string.
                                                  type: string
                                  serviceType:
                                    description: Optional service type for Kubernetes solver service. Supported values are NodePort or ClusterIP. If unset, defaults to NodePort.
                                    type: string
                          selector:
                            description: Selector selects a set of DNSNames on the Certificate resource that should be solved using this challenge solver. If not specified, the solver will be treated as the 'default' solver with the lowest priority, i.e. if any other solver has a more specific match, it will be used instead.
                            type: object
                            properties:
                              dnsNames:
                                description: List of DNSNames that this solver will be used to solve. If specified and a match is found, a dnsNames selector will take precedence over a dnsZones selector. If multiple solvers match with the same dnsNames value, the solver with the most matching labels in matchLabels will be selected. If neither has more matches, the solver defined earlier in the list will be selected.
                                type: array
                                items:
                                  type: string
                              dnsZones:
                                description: List of DNSZones that this solver will be used to solve. The most specific DNS zone match specified here will take precedence over other DNS zone matches, so a solver specifying sys.example.com will be selected over one specifying example.com for the domain www.sys.example.com. If multiple solvers match with the same dnsZones value, the solver with the most matching labels in matchLabels will be selected. If neither has more matches, the solver defined earlier in the list will be selected.
                                type: array
                                items:
                                  type: string
                              matchLabels:
                                description: A label selector that is used to refine the set of certificate's that this challenge solver will apply to.
                                type: object
                                additionalProperties:
                                  type: string
                ca:
                  description: CA configures this issuer to sign certificates using a signing CA keypair stored in a Secret resource. This is used to build internal PKIs that are managed by cert-manager.
                  type: object
                  required:
                    - secretName
                  properties:
                    crlDistributionPoints:
                      description: The CRL distribution points is an X.509 v3 certificate extension which identifies the location of the CRL from which the revocation of this certificate can be checked. If not set, certificates will be issued without distribution points set.
                      type: array
                      items:
                        type: string
                    ocspServers:
                      description: The OCSP server list is an X.509 v3 extension that defines a list of URLs of OCSP responders. The OCSP responders can be queried for the revocation status of an issued certificate. If not set, the certificate will be issued with no OCSP servers set. For example, an OCSP server URL could be "http://ocsp.int-x3.letsencrypt.org".
                      type: array
                      items:
                        type: string
                    secretName:
                      description: SecretName is the name of the secret used to sign Certificates issued by this Issuer.
                      type: string
                selfSigned:
                  description: SelfSigned configures this issuer to 'self sign' certificates using the private key used to create the CertificateRequest object.
                  type: object
                  properties:
                    crlDistributionPoints:
                      description: The CRL distribution points is an X.509 v3 certificate extension which identifies the location of the CRL from which the revocation of this certificate can be checked. If not set certificate will be issued without CDP. Values are strings.
                      type: array
                      items:
                        type: string
                vault:
                  description: Vault configures this issuer to sign certificates using a HashiCorp Vault PKI backend.
                  type: object
                  required:
                    - auth
                    - path
                    - server
                  properties:
                    auth:
                      description: Auth configures how cert-manager authenticates with the Vault server.
                      type: object
                      properties:
                        appRole:
                          description: AppRole authenticates with Vault using the App Role auth mechanism, with the role and secret stored in a Kubernetes Secret resource.
                          type: object
                          required:
                            - path
                            - roleId
                            - secretRef
                          properties:
                            path:
                              description: 'Path where the App Role authentication backend is mounted in Vault, e.g: "approle"'
                              type: string
                            roleId:
                              description: RoleID configured in the App Role authentication backend when setting up the authentication backend in Vault.
                              type: string
                            secretRef:
                              description: Reference to a key in a Secret that contains the App Role secret used to authenticate with Vault. The `key` field must be specified and denotes which entry within the Secret resource is used as the app role secret.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                        kubernetes:
                          description: Kubernetes authenticates with Vault by passing the ServiceAccount token stored in the named Secret resource to the Vault server.
                          type: object
                          required:
                            - role
                            - secretRef
                          properties:
                            mountPath:
                              description: The Vault mountPath here is the mount path to use when authenticating with Vault. For example, setting a value to `/v1/auth/foo`, will use the path `/v1/auth/foo/login` to authenticate with Vault. If unspecified, the default value "/v1/auth/kubernetes" will be used.
                              type: string
                            role:
                              description: A required field containing the Vault Role to assume. A Role binds a Kubernetes ServiceAccount with a set of Vault policies.
                              type: string
                            secretRef:
                              description: The required Secret field containing a Kubernetes ServiceAccount JWT used for authenticating with Vault. Use of 'ambient credentials' is not supported.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                        tokenSecretRef:
                          description: TokenSecretRef authenticates with Vault by presenting a token.
                          type: object
                          required:
                            - name
                          properties:
                            key:
                              description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                              type: string
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                    caBundle:
                      description: Base64-encoded bundle of PEM CAs which will be used to validate the certificate chain presented by Vault. Only used if using HTTPS to connect to Vault and ignored for HTTP connections. Mutually exclusive with CABundleSecretRef. If neither CABundle nor CABundleSecretRef are defined, the certificate bundle in the cert-manager controller container is used to validate the TLS connection.
                      type: string
                      format: byte
                    caBundleSecretRef:
                      description: Reference to a Secret containing a bundle of PEM-encoded CAs to use when verifying the certificate chain presented by Vault when using HTTPS. Mutually exclusive with CABundle. If neither CABundle nor CABundleSecretRef are defined, the certificate bundle in the cert-manager controller container is used to validate the TLS connection. If no key for the Secret is specified, cert-manager will default to 'ca.crt'.
                      type: object
                      required:
                        - name
                      properties:
                        key:
                          description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                          type: string
                        name:
                          description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                          type: string
                    namespace:
                      description: 'Name of the vault namespace. Namespaces is a set of features within Vault Enterprise that allows Vault environments to support Secure Multi-tenancy. e.g: "ns1" More about namespaces can be found here https://www.vaultproject.io/docs/enterprise/namespaces'
                      type: string
                    path:
                      description: 'Path is the mount path of the Vault PKI backend''s `sign` endpoint, e.g: "my_pki_mount/sign/my-role-name".'
                      type: string
                    server:
                      description: 'Server is the connection address for the Vault server, e.g: "https://vault.example.com:8200".'
                      type: string
                venafi:
                  description: Venafi configures this issuer to sign certificates using a Venafi TPP or Venafi Cloud policy zone.
                  type: object
                  required:
                    - zone
                  properties:
                    cloud:
                      description: Cloud specifies the Venafi cloud configuration settings. Only one of TPP or Cloud may be specified.
                      type: object
                      required:
                        - apiTokenSecretRef
                      properties:
                        apiTokenSecretRef:
                          description: APITokenSecretRef is a secret key selector for the Venafi Cloud API token.
                          type: object
                          required:
                            - name
                          properties:
                            key:
                              description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                              type: string
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                        url:
                          description: URL is the base URL for Venafi Cloud. Defaults to "https://api.venafi.cloud/v1".
                          type: string
                    tpp:
                      description: TPP specifies Trust Protection Platform configuration settings. Only one of TPP or Cloud may be specified.
                      type: object
                      required:
                        - credentialsRef
                        - url
                      properties:
                        caBundle:
                          description: Base64-encoded bundle of PEM CAs which will be used to validate the certificate chain presented by the TPP server. Only used if using HTTPS; ignored for HTTP. If undefined, the certificate bundle in the cert-manager controller container is used to validate the chain.
                          type: string
                          format: byte
                        credentialsRef:
                          description: CredentialsRef is a reference to a Secret containing the username and password for the TPP server. The secret must contain two keys, 'username' and 'password'.
                          type: object
                          required:
                            - name
                          properties:
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                        url:
                          description: 'URL is the base URL for the vedsdk endpoint of the Venafi TPP instance, for example: "https://tpp.example.com/vedsdk".'
                          type: string
                    zone:
                      description: Zone is the Venafi Policy Zone to use for this issuer. All requests made to the Venafi platform will be restricted by the named zone policy. This field is required.
                      type: string
            status:
              description: Status of the ClusterIssuer. This is set and managed automatically.
              type: object
              properties:
                acme:
                  description: ACME specific status options. This field should only be set if the Issuer is configured to use an ACME server to issue certificates.
                  type: object
                  properties:
                    lastRegisteredEmail:
                      description: LastRegisteredEmail is the email associated with the latest registered ACME account, in order to track changes made to registered account associated with the  Issuer
                      type: string
                    uri:
                      description: URI is the unique account identifier, which can also be used to retrieve account details from the CA
                      type: string
                conditions:
                  description: List of status conditions to indicate the status of a CertificateRequest. Known condition types are `Ready`.
                  type: array
                  items:
                    description: IssuerCondition contains condition information for an Issuer.
                    type: object
                    required:
                      - status
                      - type
                    properties:
                      lastTransitionTime:
                        description: LastTransitionTime is the timestamp corresponding to the last status change of this condition.
                        type: string
                        format: date-time
                      message:
                        description: Message is a human readable description of the details of the last transition, complementing reason.
                        type: string
                      observedGeneration:
                        description: If set, this represents the .metadata.generation that the condition was set based upon. For instance, if .metadata.generation is currently 12, but the .status.condition[x].observedGeneration is 9, the condition is out of date with respect to the current state of the Issuer.
                        type: integer
                        format: int64
                      reason:
                        description: Reason is a brief machine readable explanation for the condition's last transition.
                        type: string
                      status:
                        description: Status of the condition, one of (`True`, `False`, `Unknown`).
                        type: string
                        enum:
                          - "True"
                          - "False"
                          - Unknown
                      type:
                        description: Type of the condition, known values are (`Ready`).
                        type: string
                  x-kubernetes-list-map-keys:
                    - type
                  x-kubernetes-list-type: map
      served: true
      storage: true
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/crds.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: challenges.acme.cert-manager.io
  labels:
    app: 'cert-manager'
    app.kubernetes.io/name: 'cert-manager'
    app.kubernetes.io/instance: 'canvas'
    # Generated labels
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  group: acme.cert-manager.io
  names:
    kind: Challenge
    listKind: ChallengeList
    plural: challenges
    singular: challenge
    categories:
      - cert-manager
      - cert-manager-acme
  scope: Namespaced
  versions:
    - additionalPrinterColumns:
        - jsonPath: .status.state
          name: State
          type: string
        - jsonPath: .spec.dnsName
          name: Domain
          type: string
        - jsonPath: .status.reason
          name: Reason
          priority: 1
          type: string
        - description: CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          jsonPath: .metadata.creationTimestamp
          name: Age
          type: date
      name: v1
      schema:
        openAPIV3Schema:
          description: Challenge is a type to represent a Challenge request with an ACME server
          type: object
          required:
            - metadata
            - spec
          properties:
            apiVersion:
              description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
              type: string
            kind:
              description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
              type: string
            metadata:
              type: object
            spec:
              type: object
              required:
                - authorizationURL
                - dnsName
                - issuerRef
                - key
                - solver
                - token
                - type
                - url
              properties:
                authorizationURL:
                  description: The URL to the ACME Authorization resource that this challenge is a part of.
                  type: string
                dnsName:
                  description: dnsName is the identifier that this challenge is for, e.g. example.com. If the requested DNSName is a 'wildcard', this field MUST be set to the non-wildcard domain, e.g. for `*.example.com`, it must be `example.com`.
                  type: string
                issuerRef:
                  description: References a properly configured ACME-type Issuer which should be used to create this Challenge. If the Issuer does not exist, processing will be retried. If the Issuer is not an 'ACME' Issuer, an error will be returned and the Challenge will be marked as failed.
                  type: object
                  required:
                    - name
                  properties:
                    group:
                      description: Group of the resource being referred to.
                      type: string
                    kind:
                      description: Kind of the resource being referred to.
                      type: string
                    name:
                      description: Name of the resource being referred to.
                      type: string
                key:
                  description: 'The ACME challenge key for this challenge For HTTP01 challenges, this is the value that must be responded with to complete the HTTP01 challenge in the format: `<private key JWK thumbprint>.<key from acme server for challenge>`. For DNS01 challenges, this is the base64 encoded SHA256 sum of the `<private key JWK thumbprint>.<key from acme server for challenge>` text that must be set as the TXT record content.'
                  type: string
                solver:
                  description: Contains the domain solving configuration that should be used to solve this challenge resource.
                  type: object
                  properties:
                    dns01:
                      description: Configures cert-manager to attempt to complete authorizations by performing the DNS01 challenge flow.
                      type: object
                      properties:
                        acmeDNS:
                          description: Use the 'ACME DNS' (https://github.com/joohoi/acme-dns) API to manage DNS01 challenge records.
                          type: object
                          required:
                            - accountSecretRef
                            - host
                          properties:
                            accountSecretRef:
                              description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                            host:
                              type: string
                        akamai:
                          description: Use the Akamai DNS zone management API to manage DNS01 challenge records.
                          type: object
                          required:
                            - accessTokenSecretRef
                            - clientSecretSecretRef
                            - clientTokenSecretRef
                            - serviceConsumerDomain
                          properties:
                            accessTokenSecretRef:
                              description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                            clientSecretSecretRef:
                              description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                            clientTokenSecretRef:
                              description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                            serviceConsumerDomain:
                              type: string
                        azureDNS:
                          description: Use the Microsoft Azure DNS API to manage DNS01 challenge records.
                          type: object
                          required:
                            - resourceGroupName
                            - subscriptionID
                          properties:
                            clientID:
                              description: if both this and ClientSecret are left unset MSI will be used
                              type: string
                            clientSecretSecretRef:
                              description: if both this and ClientID are left unset MSI will be used
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                            environment:
                              description: name of the Azure environment (default AzurePublicCloud)
                              type: string
                              enum:
                                - AzurePublicCloud
                                - AzureChinaCloud
                                - AzureGermanCloud
                                - AzureUSGovernmentCloud
                            hostedZoneName:
                              description: name of the DNS zone that should be used
                              type: string
                            managedIdentity:
                              description: managed identity configuration, can not be used at the same time as clientID, clientSecretSecretRef or tenantID
                              type: object
                              properties:
                                clientID:
                                  description: client ID of the managed identity, can not be used at the same time as resourceID
                                  type: string
                                resourceID:
                                  description: resource ID of the managed identity, can not be used at the same time as clientID
                                  type: string
                            resourceGroupName:
                              description: resource group the DNS zone is located in
                              type: string
                            subscriptionID:
                              description: ID of the Azure subscription
                              type: string
                            tenantID:
                              description: when specifying ClientID and ClientSecret then this field is also needed
                              type: string
                        cloudDNS:
                          description: Use the Google Cloud DNS API to manage DNS01 challenge records.
                          type: object
                          required:
                            - project
                          properties:
                            hostedZoneName:
                              description: HostedZoneName is an optional field that tells cert-manager in which Cloud DNS zone the challenge record has to be created. If left empty cert-manager will automatically choose a zone.
                              type: string
                            project:
                              type: string
                            serviceAccountSecretRef:
                              description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                        cloudflare:
                          description: Use the Cloudflare API to manage DNS01 challenge records.
                          type: object
                          properties:
                            apiKeySecretRef:
                              description: 'API key to use to authenticate with Cloudflare. Note: using an API token to authenticate is now the recommended method as it allows greater control of permissions.'
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                            apiTokenSecretRef:
                              description: API token used to authenticate with Cloudflare.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                            email:
                              description: Email of the account, only required when using API key based authentication.
                              type: string
                        cnameStrategy:
                          description: CNAMEStrategy configures how the DNS01 provider should handle CNAME records when found in DNS zones.
                          type: string
                          enum:
                            - None
                            - Follow
                        digitalocean:
                          description: Use the DigitalOcean DNS API to manage DNS01 challenge records.
                          type: object
                          required:
                            - tokenSecretRef
                          properties:
                            tokenSecretRef:
                              description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                        rfc2136:
                          description: Use RFC2136 ("Dynamic Updates in the Domain Name System") (https://datatracker.ietf.org/doc/rfc2136/) to manage DNS01 challenge records.
                          type: object
                          required:
                            - nameserver
                          properties:
                            nameserver:
                              description: The IP address or hostname of an authoritative DNS server supporting RFC2136 in the form host:port. If the host is an IPv6 address it must be enclosed in square brackets (e.g [2001:db8::1]); port is optional. This field is required.
                              type: string
                            tsigAlgorithm:
                              description: 'The TSIG Algorithm configured in the DNS supporting RFC2136. Used only when ``tsigSecretSecretRef`` and ``tsigKeyName`` are defined. Supported values are (case-insensitive): ``HMACMD5`` (default), ``HMACSHA1``, ``HMACSHA256`` or ``HMACSHA512``.'
                              type: string
                            tsigKeyName:
                              description: The TSIG Key name configured in the DNS. If ``tsigSecretSecretRef`` is defined, this field is required.
                              type: string
                            tsigSecretSecretRef:
                              description: The name of the secret containing the TSIG value. If ``tsigKeyName`` is defined, this field is required.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                        route53:
                          description: Use the AWS Route53 API to manage DNS01 challenge records.
                          type: object
                          required:
                            - region
                          properties:
                            accessKeyID:
                              description: 'The AccessKeyID is used for authentication. Cannot be set when SecretAccessKeyID is set. If neither the Access Key nor Key ID are set, we fall-back to using env vars, shared credentials file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                              type: string
                            accessKeyIDSecretRef:
                              description: 'The SecretAccessKey is used for authentication. If set, pull the AWS access key ID from a key within a Kubernetes Secret. Cannot be set when AccessKeyID is set. If neither the Access Key nor Key ID are set, we fall-back to using env vars, shared credentials file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                            hostedZoneID:
                              description: If set, the provider will manage only this zone in Route53 and will not do an lookup using the route53:ListHostedZonesByName api call.
                              type: string
                            region:
                              description: Always set the region when using AccessKeyID and SecretAccessKey
                              type: string
                            role:
                              description: Role is a Role ARN which the Route53 provider will assume using either the explicit credentials AccessKeyID/SecretAccessKey or the inferred credentials from environment variables, shared credentials file or AWS Instance metadata
                              type: string
                            secretAccessKeySecretRef:
                              description: 'The SecretAccessKey is used for authentication. If neither the Access Key nor Key ID are set, we fall-back to using env vars, shared credentials file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                        webhook:
                          description: Configure an external webhook based DNS01 challenge solver to manage DNS01 challenge records.
                          type: object
                          required:
                            - groupName
                            - solverName
                          properties:
                            config:
                              description: Additional configuration that should be passed to the webhook apiserver when challenges are processed. This can contain arbitrary JSON data. Secret values should not be specified in this stanza. If secret values are needed (e.g. credentials for a DNS service), you should use a SecretKeySelector to reference a Secret resource. For details on the schema of this field, consult the webhook provider implementation's documentation.
                              x-kubernetes-preserve-unknown-fields: true
                            groupName:
                              description: The API group name that should be used when POSTing ChallengePayload resources to the webhook apiserver. This should be the same as the GroupName specified in the webhook provider implementation.
                              type: string
                            solverName:
                              description: The name of the solver to use, as defined in the webhook provider implementation. This will typically be the name of the provider, e.g. 'cloudflare'.
                              type: string
                    http01:
                      description: Configures cert-manager to attempt to complete authorizations by performing the HTTP01 challenge flow. It is not possible to obtain certificates for wildcard domain names (e.g. `*.example.com`) using the HTTP01 challenge mechanism.
                      type: object
                      properties:
                        gatewayHTTPRoute:
                          description: The Gateway API is a sig-network community API that models service networking in Kubernetes (https://gateway-api.sigs.k8s.io/). The Gateway solver will create HTTPRoutes with the specified labels in the same namespace as the challenge. This solver is experimental, and fields / behaviour may change in the future.
                          type: object
                          properties:
                            labels:
                              description: Custom labels that will be applied to HTTPRoutes created by cert-manager while solving HTTP-01 challenges.
                              type: object
                              additionalProperties:
                                type: string
                            parentRefs:
                              description: 'When solving an HTTP-01 challenge, cert-manager creates an HTTPRoute. cert-manager needs to know which parentRefs should be used when creating the HTTPRoute. Usually, the parentRef references a Gateway. See: https://gateway-api.sigs.k8s.io/api-types/httproute/#attaching-to-gateways'
                              type: array
                              items:
                                description: "ParentReference identifies an API object (usually a Gateway) that can be considered a parent of this resource (usually a route). The only kind of parent resource with \"Core\" support is Gateway. This API may be extended in the future to support additional kinds of parent resources, such as HTTPRoute. \n The API object must be valid in the cluster; the Group and Kind must be registered in the cluster for this reference to be valid."
                                type: object
                                required:
                                  - name
                                properties:
                                  group:
                                    description: "Group is the group of the referent. When unspecified, \"gateway.networking.k8s.io\" is inferred. To set the core API group (such as for a \"Service\" kind referent), Group must be explicitly set to \"\" (empty string). \n Support: Core"
                                    type: string
                                    default: gateway.networking.k8s.io
                                    maxLength: 253
                                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                  kind:
                                    description: "Kind is kind of the referent. \n Support: Core (Gateway) \n Support: Implementation-specific (Other Resources)"
                                    type: string
                                    default: Gateway
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                  name:
                                    description: "Name is the name of the referent. \n Support: Core"
                                    type: string
                                    maxLength: 253
                                    minLength: 1
                                  namespace:
                                    description: "Namespace is the namespace of the referent. When unspecified, this refers to the local namespace of the Route. \n Note that there are specific rules for ParentRefs which cross namespace boundaries. Cross-namespace references are only valid if they are explicitly allowed by something in the namespace they are referring to. For example: Gateway has the AllowedRoutes field, and ReferenceGrant provides a generic way to enable any other kind of cross-namespace reference. \n Support: Core"
                                    type: string
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                  port:
                                    description: "Port is the network port this Route targets. It can be interpreted differently based on the type of parent resource. \n When the parent resource is a Gateway, this targets all listeners listening on the specified port that also support this kind of Route(and select this Route). It's not recommended to set `Port` unless the networking behaviors specified in a Route must apply to a specific port as opposed to a listener(s) whose port(s) may be changed. When both Port and SectionName are specified, the name and port of the selected listener must match both specified values. \n Implementations MAY choose to support other parent resources. Implementations supporting other types of parent resources MUST clearly document how/if Port is interpreted. \n For the purpose of status, an attachment is considered successful as long as the parent resource accepts it partially. For example, Gateway listeners can restrict which Routes can attach to them by Route kind, namespace, or hostname. If 1 of 2 Gateway listeners accept attachment from the referencing Route, the Route MUST be considered successfully attached. If no Gateway listeners accept attachment from this Route, the Route MUST be considered detached from the Gateway. \n Support: Extended \n <gateway:experimental>"
                                    type: integer
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                  sectionName:
                                    description: "SectionName is the name of a section within the target resource. In the following resources, SectionName is interpreted as the following: \n * Gateway: Listener Name. When both Port (experimental) and SectionName are specified, the name and port of the selected listener must match both specified values. \n Implementations MAY choose to support attaching Routes to other resources. If that is the case, they MUST clearly document how SectionName is interpreted. \n When unspecified (empty string), this will reference the entire resource. For the purpose of status, an attachment is considered successful if at least one section in the parent resource accepts it. For example, Gateway listeners can restrict which Routes can attach to them by Route kind, namespace, or hostname. If 1 of 2 Gateway listeners accept attachment from the referencing Route, the Route MUST be considered successfully attached. If no Gateway listeners accept attachment from this Route, the Route MUST be considered detached from the Gateway. \n Support: Core"
                                    type: string
                                    maxLength: 253
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            serviceType:
                              description: Optional service type for Kubernetes solver service. Supported values are NodePort or ClusterIP. If unset, defaults to NodePort.
                              type: string
                        ingress:
                          description: The ingress based HTTP01 challenge solver will solve challenges by creating or modifying Ingress resources in order to route requests for '/.well-known/acme-challenge/XYZ' to 'challenge solver' pods that are provisioned by cert-manager for each Challenge to be completed.
                          type: object
                          properties:
                            class:
                              description: The ingress class to use when creating Ingress resources to solve ACME challenges that use this challenge solver. Only one of 'class' or 'name' may be specified.
                              type: string
                            ingressTemplate:
                              description: Optional ingress template used to configure the ACME challenge solver ingress used for HTTP01 challenges.
                              type: object
                              properties:
                                metadata:
                                  description: ObjectMeta overrides for the ingress used to solve HTTP01 challenges. Only the 'labels' and 'annotations' fields may be set. If labels or annotations overlap with in-built values, the values here will override the in-built values.
                                  type: object
                                  properties:
                                    annotations:
                                      description: Annotations that should be added to the created ACME HTTP01 solver ingress.
                                      type: object
                                      additionalProperties:
                                        type: string
                                    labels:
                                      description: Labels that should be added to the created ACME HTTP01 solver ingress.
                                      type: object
                                      additionalProperties:
                                        type: string
                            name:
                              description: The name of the ingress resource that should have ACME challenge solving routes inserted into it in order to solve HTTP01 challenges. This is typically used in conjunction with ingress controllers like ingress-gce, which maintains a 1:1 mapping between external IPs and ingress resources.
                              type: string
                            podTemplate:
                              description: Optional pod template used to configure the ACME challenge solver pods used for HTTP01 challenges.
                              type: object
                              properties:
                                metadata:
                                  description: ObjectMeta overrides for the pod used to solve HTTP01 challenges. Only the 'labels' and 'annotations' fields may be set. If labels or annotations overlap with in-built values, the values here will override the in-built values.
                                  type: object
                                  properties:
                                    annotations:
                                      description: Annotations that should be added to the create ACME HTTP01 solver pods.
                                      type: object
                                      additionalProperties:
                                        type: string
                                    labels:
                                      description: Labels that should be added to the created ACME HTTP01 solver pods.
                                      type: object
                                      additionalProperties:
                                        type: string
                                spec:
                                  description: PodSpec defines overrides for the HTTP01 challenge solver pod. Only the 'priorityClassName', 'nodeSelector', 'affinity', 'serviceAccountName' and 'tolerations' fields are supported currently. All other fields will be ignored.
                                  type: object
                                  properties:
                                    affinity:
                                      description: If specified, the pod's scheduling constraints
                                      type: object
                                      properties:
                                        nodeAffinity:
                                          description: Describes node affinity scheduling rules for the pod.
                                          type: object
                                          properties:
                                            preferredDuringSchedulingIgnoredDuringExecution:
                                              description: The scheduler will prefer to schedule pods to nodes that satisfy the affinity expressions specified by this field, but it may choose a node that violates one or more of the expressions. The node that is most preferred is the one with the greatest sum of weights, i.e. for each node that meets all of the scheduling requirements (resource request, requiredDuringScheduling affinity expressions, etc.), compute a sum by iterating through the elements of this field and adding "weight" to the sum if the node matches the corresponding matchExpressions; the node(s) with the highest sum are the most preferred.
                                              type: array
                                              items:
                                                description: An empty preferred scheduling term matches all objects with implicit weight 0 (i.e. it's a no-op). A null preferred scheduling term matches no objects (i.e. is also a no-op).
                                                type: object
                                                required:
                                                  - preference
                                                  - weight
                                                properties:
                                                  preference:
                                                    description: A node selector term, associated with the corresponding weight.
                                                    type: object
                                                    properties:
                                                      matchExpressions:
                                                        description: A list of node selector requirements by node's labels.
                                                        type: array
                                                        items:
                                                          description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                          type: object
                                                          required:
                                                            - key
                                                            - operator
                                                          properties:
                                                            key:
                                                              description: The label key that the selector applies to.
                                                              type: string
                                                            operator:
                                                              description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                              type: string
                                                            values:
                                                              description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                              type: array
                                                              items:
                                                                type: string
                                                      matchFields:
                                                        description: A list of node selector requirements by node's fields.
                                                        type: array
                                                        items:
                                                          description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                          type: object
                                                          required:
                                                            - key
                                                            - operator
                                                          properties:
                                                            key:
                                                              description: The label key that the selector applies to.
                                                              type: string
                                                            operator:
                                                              description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                              type: string
                                                            values:
                                                              description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                              type: array
                                                              items:
                                                                type: string
                                                    x-kubernetes-map-type: atomic
                                                  weight:
                                                    description: Weight associated with matching the corresponding nodeSelectorTerm, in the range 1-100.
                                                    type: integer
                                                    format: int32
                                            requiredDuringSchedulingIgnoredDuringExecution:
                                              description: If the affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node. If the affinity requirements specified by this field cease to be met at some point during pod execution (e.g. due to an update), the system may or may not try to eventually evict the pod from its node.
                                              type: object
                                              required:
                                                - nodeSelectorTerms
                                              properties:
                                                nodeSelectorTerms:
                                                  description: Required. A list of node selector terms. The terms are ORed.
                                                  type: array
                                                  items:
                                                    description: A null or empty node selector term matches no objects. The requirements of them are ANDed. The TopologySelectorTerm type implements a subset of the NodeSelectorTerm.
                                                    type: object
                                                    properties:
                                                      matchExpressions:
                                                        description: A list of node selector requirements by node's labels.
                                                        type: array
                                                        items:
                                                          description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                          type: object
                                                          required:
                                                            - key
                                                            - operator
                                                          properties:
                                                            key:
                                                              description: The label key that the selector applies to.
                                                              type: string
                                                            operator:
                                                              description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                              type: string
                                                            values:
                                                              description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                              type: array
                                                              items:
                                                                type: string
                                                      matchFields:
                                                        description: A list of node selector requirements by node's fields.
                                                        type: array
                                                        items:
                                                          description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                          type: object
                                                          required:
                                                            - key
                                                            - operator
                                                          properties:
                                                            key:
                                                              description: The label key that the selector applies to.
                                                              type: string
                                                            operator:
                                                              description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                              type: string
                                                            values:
                                                              description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                              type: array
                                                              items:
                                                                type: string
                                                    x-kubernetes-map-type: atomic
                                              x-kubernetes-map-type: atomic
                                        podAffinity:
                                          description: Describes pod affinity scheduling rules (e.g. co-locate this pod in the same node, zone, etc. as some other pod(s)).
                                          type: object
                                          properties:
                                            preferredDuringSchedulingIgnoredDuringExecution:
                                              description: The scheduler will prefer to schedule pods to nodes that satisfy the affinity expressions specified by this field, but it may choose a node that violates one or more of the expressions. The node that is most preferred is the one with the greatest sum of weights, i.e. for each node that meets all of the scheduling requirements (resource request, requiredDuringScheduling affinity expressions, etc.), compute a sum by iterating through the elements of this field and adding "weight" to the sum if the node has pods which matches the corresponding podAffinityTerm; the node(s) with the highest sum are the most preferred.
                                              type: array
                                              items:
                                                description: The weights of all of the matched WeightedPodAffinityTerm fields are added per-node to find the most preferred node(s)
                                                type: object
                                                required:
                                                  - podAffinityTerm
                                                  - weight
                                                properties:
                                                  podAffinityTerm:
                                                    description: Required. A pod affinity term, associated with the corresponding weight.
                                                    type: object
                                                    required:
                                                      - topologyKey
                                                    properties:
                                                      labelSelector:
                                                        description: A label query over a set of resources, in this case pods.
                                                        type: object
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                            type: array
                                                            items:
                                                              description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                              type: object
                                                              required:
                                                                - key
                                                                - operator
                                                              properties:
                                                                key:
                                                                  description: key is the label key that the selector applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                  type: array
                                                                  items:
                                                                    type: string
                                                          matchLabels:
                                                            description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                            type: object
                                                            additionalProperties:
                                                              type: string
                                                        x-kubernetes-map-type: atomic
                                                      namespaceSelector:
                                                        description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                        type: object
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                            type: array
                                                            items:
                                                              description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                              type: object
                                                              required:
                                                                - key
                                                                - operator
                                                              properties:
                                                                key:
                                                                  description: key is the label key that the selector applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                  type: array
                                                                  items:
                                                                    type: string
                                                          matchLabels:
                                                            description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                            type: object
                                                            additionalProperties:
                                                              type: string
                                                        x-kubernetes-map-type: atomic
                                                      namespaces:
                                                        description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                        type: array
                                                        items:
                                                          type: string
                                                      topologyKey:
                                                        description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                        type: string
                                                  weight:
                                                    description: weight associated with matching the corresponding podAffinityTerm, in the range 1-100.
                                                    type: integer
                                                    format: int32
                                            requiredDuringSchedulingIgnoredDuringExecution:
                                              description: If the affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node. If the affinity requirements specified by this field cease to be met at some point during pod execution (e.g. due to a pod label update), the system may or may not try to eventually evict the pod from its node. When there are multiple elements, the lists of nodes corresponding to each podAffinityTerm are intersected, i.e. all terms must be satisfied.
                                              type: array
                                              items:
                                                description: Defines a set of pods (namely those matching the labelSelector relative to the given namespace(s)) that this pod should be co-located (affinity) or not co-located (anti-affinity) with, where co-located is defined as running on a node whose value of the label with key <topologyKey> matches that of any node on which a pod of the set of pods is running
                                                type: object
                                                required:
                                                  - topologyKey
                                                properties:
                                                  labelSelector:
                                                    description: A label query over a set of resources, in this case pods.
                                                    type: object
                                                    properties:
                                                      matchExpressions:
                                                        description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                        type: array
                                                        items:
                                                          description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                          type: object
                                                          required:
                                                            - key
                                                            - operator
                                                          properties:
                                                            key:
                                                              description: key is the label key that the selector applies to.
                                                              type: string
                                                            operator:
                                                              description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                              type: string
                                                            values:
                                                              description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                              type: array
                                                              items:
                                                                type: string
                                                      matchLabels:
                                                        description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                        type: object
                                                        additionalProperties:
                                                          type: string
                                                    x-kubernetes-map-type: atomic
                                                  namespaceSelector:
                                                    description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                    type: object
                                                    properties:
                                                      matchExpressions:
                                                        description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                        type: array
                                                        items:
                                                          description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                          type: object
                                                          required:
                                                            - key
                                                            - operator
                                                          properties:
                                                            key:
                                                              description: key is the label key that the selector applies to.
                                                              type: string
                                                            operator:
                                                              description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                              type: string
                                                            values:
                                                              description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                              type: array
                                                              items:
                                                                type: string
                                                      matchLabels:
                                                        description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                        type: object
                                                        additionalProperties:
                                                          type: string
                                                    x-kubernetes-map-type: atomic
                                                  namespaces:
                                                    description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                    type: array
                                                    items:
                                                      type: string
                                                  topologyKey:
                                                    description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                    type: string
                                        podAntiAffinity:
                                          description: Describes pod anti-affinity scheduling rules (e.g. avoid putting this pod in the same node, zone, etc. as some other pod(s)).
                                          type: object
                                          properties:
                                            preferredDuringSchedulingIgnoredDuringExecution:
                                              description: The scheduler will prefer to schedule pods to nodes that satisfy the anti-affinity expressions specified by this field, but it may choose a node that violates one or more of the expressions. The node that is most preferred is the one with the greatest sum of weights, i.e. for each node that meets all of the scheduling requirements (resource request, requiredDuringScheduling anti-affinity expressions, etc.), compute a sum by iterating through the elements of this field and adding "weight" to the sum if the node has pods which matches the corresponding podAffinityTerm; the node(s) with the highest sum are the most preferred.
                                              type: array
                                              items:
                                                description: The weights of all of the matched WeightedPodAffinityTerm fields are added per-node to find the most preferred node(s)
                                                type: object
                                                required:
                                                  - podAffinityTerm
                                                  - weight
                                                properties:
                                                  podAffinityTerm:
                                                    description: Required. A pod affinity term, associated with the corresponding weight.
                                                    type: object
                                                    required:
                                                      - topologyKey
                                                    properties:
                                                      labelSelector:
                                                        description: A label query over a set of resources, in this case pods.
                                                        type: object
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                            type: array
                                                            items:
                                                              description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                              type: object
                                                              required:
                                                                - key
                                                                - operator
                                                              properties:
                                                                key:
                                                                  description: key is the label key that the selector applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                  type: array
                                                                  items:
                                                                    type: string
                                                          matchLabels:
                                                            description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                            type: object
                                                            additionalProperties:
                                                              type: string
                                                        x-kubernetes-map-type: atomic
                                                      namespaceSelector:
                                                        description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                        type: object
                                                        properties:
                                                          matchExpressions:
                                                            description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                            type: array
                                                            items:
                                                              description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                              type: object
                                                              required:
                                                                - key
                                                                - operator
                                                              properties:
                                                                key:
                                                                  description: key is the label key that the selector applies to.
                                                                  type: string
                                                                operator:
                                                                  description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                  type: string
                                                                values:
                                                                  description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                  type: array
                                                                  items:
                                                                    type: string
                                                          matchLabels:
                                                            description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                            type: object
                                                            additionalProperties:
                                                              type: string
                                                        x-kubernetes-map-type: atomic
                                                      namespaces:
                                                        description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                        type: array
                                                        items:
                                                          type: string
                                                      topologyKey:
                                                        description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                        type: string
                                                  weight:
                                                    description: weight associated with matching the corresponding podAffinityTerm, in the range 1-100.
                                                    type: integer
                                                    format: int32
                                            requiredDuringSchedulingIgnoredDuringExecution:
                                              description: If the anti-affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node. If the anti-affinity requirements specified by this field cease to be met at some point during pod execution (e.g. due to a pod label update), the system may or may not try to eventually evict the pod from its node. When there are multiple elements, the lists of nodes corresponding to each podAffinityTerm are intersected, i.e. all terms must be satisfied.
                                              type: array
                                              items:
                                                description: Defines a set of pods (namely those matching the labelSelector relative to the given namespace(s)) that this pod should be co-located (affinity) or not co-located (anti-affinity) with, where co-located is defined as running on a node whose value of the label with key <topologyKey> matches that of any node on which a pod of the set of pods is running
                                                type: object
                                                required:
                                                  - topologyKey
                                                properties:
                                                  labelSelector:
                                                    description: A label query over a set of resources, in this case pods.
                                                    type: object
                                                    properties:
                                                      matchExpressions:
                                                        description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                        type: array
                                                        items:
                                                          description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                          type: object
                                                          required:
                                                            - key
                                                            - operator
                                                          properties:
                                                            key:
                                                              description: key is the label key that the selector applies to.
                                                              type: string
                                                            operator:
                                                              description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                              type: string
                                                            values:
                                                              description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                              type: array
                                                              items:
                                                                type: string
                                                      matchLabels:
                                                        description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                        type: object
                                                        additionalProperties:
                                                          type: string
                                                    x-kubernetes-map-type: atomic
                                                  namespaceSelector:
                                                    description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                    type: object
                                                    properties:
                                                      matchExpressions:
                                                        description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                        type: array
                                                        items:
                                                          description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                          type: object
                                                          required:
                                                            - key
                                                            - operator
                                                          properties:
                                                            key:
                                                              description: key is the label key that the selector applies to.
                                                              type: string
                                                            operator:
                                                              description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                              type: string
                                                            values:
                                                              description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                              type: array
                                                              items:
                                                                type: string
                                                      matchLabels:
                                                        description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                        type: object
                                                        additionalProperties:
                                                          type: string
                                                    x-kubernetes-map-type: atomic
                                                  namespaces:
                                                    description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                    type: array
                                                    items:
                                                      type: string
                                                  topologyKey:
                                                    description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                    type: string
                                    nodeSelector:
                                      description: 'NodeSelector is a selector which must be true for the pod to fit on a node. Selector which must match a node''s labels for the pod to be scheduled on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/'
                                      type: object
                                      additionalProperties:
                                        type: string
                                    priorityClassName:
                                      description: If specified, the pod's priorityClassName.
                                      type: string
                                    serviceAccountName:
                                      description: If specified, the pod's service account
                                      type: string
                                    tolerations:
                                      description: If specified, the pod's tolerations.
                                      type: array
                                      items:
                                        description: The pod this Toleration is attached to tolerates any taint that matches the triple <key,value,effect> using the matching operator <operator>.
                                        type: object
                                        properties:
                                          effect:
                                            description: Effect indicates the taint effect to match. Empty means match all taint effects. When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                            type: string
                                          key:
                                            description: Key is the taint key that the toleration applies to. Empty means match all taint keys. If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                            type: string
                                          operator:
                                            description: Operator represents a key's relationship to the value. Valid operators are Exists and Equal. Defaults to Equal. Exists is equivalent to wildcard for value, so that a pod can tolerate all taints of a particular category.
                                            type: string
                                          tolerationSeconds:
                                            description: TolerationSeconds represents the period of time the toleration (which must be of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default, it is not set, which means tolerate the taint forever (do not evict). Zero and negative values will be treated as 0 (evict immediately) by the system.
                                            type: integer
                                            format: int64
                                          value:
                                            description: Value is the taint value the toleration matches to. If the operator is Exists, the value should be empty, otherwise just a regular string.
                                            type: string
                            serviceType:
                              description: Optional service type for Kubernetes solver service. Supported values are NodePort or ClusterIP. If unset, defaults to NodePort.
                              type: string
                    selector:
                      description: Selector selects a set of DNSNames on the Certificate resource that should be solved using this challenge solver. If not specified, the solver will be treated as the 'default' solver with the lowest priority, i.e. if any other solver has a more specific match, it will be used instead.
                      type: object
                      properties:
                        dnsNames:
                          description: List of DNSNames that this solver will be used to solve. If specified and a match is found, a dnsNames selector will take precedence over a dnsZones selector. If multiple solvers match with the same dnsNames value, the solver with the most matching labels in matchLabels will be selected. If neither has more matches, the solver defined earlier in the list will be selected.
                          type: array
                          items:
                            type: string
                        dnsZones:
                          description: List of DNSZones that this solver will be used to solve. The most specific DNS zone match specified here will take precedence over other DNS zone matches, so a solver specifying sys.example.com will be selected over one specifying example.com for the domain www.sys.example.com. If multiple solvers match with the same dnsZones value, the solver with the most matching labels in matchLabels will be selected. If neither has more matches, the solver defined earlier in the list will be selected.
                          type: array
                          items:
                            type: string
                        matchLabels:
                          description: A label selector that is used to refine the set of certificate's that this challenge solver will apply to.
                          type: object
                          additionalProperties:
                            type: string
                token:
                  description: The ACME challenge token for this challenge. This is the raw value returned from the ACME server.
                  type: string
                type:
                  description: The type of ACME challenge this resource represents. One of "HTTP-01" or "DNS-01".
                  type: string
                  enum:
                    - HTTP-01
                    - DNS-01
                url:
                  description: The URL of the ACME Challenge resource for this challenge. This can be used to lookup details about the status of this challenge.
                  type: string
                wildcard:
                  description: wildcard will be true if this challenge is for a wildcard identifier, for example '*.example.com'.
                  type: boolean
            status:
              type: object
              properties:
                presented:
                  description: presented will be set to true if the challenge values for this challenge are currently 'presented'. This *does not* imply the self check is passing. Only that the values have been 'submitted' for the appropriate challenge mechanism (i.e. the DNS01 TXT record has been presented, or the HTTP01 configuration has been configured).
                  type: boolean
                processing:
                  description: Used to denote whether this challenge should be processed or not. This field will only be set to true by the 'scheduling' component. It will only be set to false by the 'challenges' controller, after the challenge has reached a final state or timed out. If this field is set to false, the challenge controller will not take any more action.
                  type: boolean
                reason:
                  description: Contains human readable information on why the Challenge is in the current state.
                  type: string
                state:
                  description: Contains the current 'state' of the challenge. If not set, the state of the challenge is unknown.
                  type: string
                  enum:
                    - valid
                    - ready
                    - pending
                    - processing
                    - invalid
                    - expired
                    - errored
      served: true
      storage: true
      subresources:
        status: {}
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/crds.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: certificaterequests.cert-manager.io
  labels:
    app: 'cert-manager'
    app.kubernetes.io/name: 'cert-manager'
    app.kubernetes.io/instance: 'canvas'
    # Generated labels
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  group: cert-manager.io
  names:
    kind: CertificateRequest
    listKind: CertificateRequestList
    plural: certificaterequests
    shortNames:
      - cr
      - crs
    singular: certificaterequest
    categories:
      - cert-manager
  scope: Namespaced
  versions:
    - name: v1
      subresources:
        status: {}
      additionalPrinterColumns:
        - jsonPath: .status.conditions[?(@.type=="Approved")].status
          name: Approved
          type: string
        - jsonPath: .status.conditions[?(@.type=="Denied")].status
          name: Denied
          type: string
        - jsonPath: .status.conditions[?(@.type=="Ready")].status
          name: Ready
          type: string
        - jsonPath: .spec.issuerRef.name
          name: Issuer
          type: string
        - jsonPath: .spec.username
          name: Requestor
          type: string
        - jsonPath: .status.conditions[?(@.type=="Ready")].message
          name: Status
          priority: 1
          type: string
        - jsonPath: .metadata.creationTimestamp
          description: CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          name: Age
          type: date
      schema:
        openAPIV3Schema:
          description: "A CertificateRequest is used to request a signed certificate from one of the configured issuers. \n All fields within the CertificateRequest's `spec` are immutable after creation. A CertificateRequest will either succeed or fail, as denoted by its `status.state` field. \n A CertificateRequest is a one-shot resource, meaning it represents a single point in time request for a certificate and cannot be re-used."
          type: object
          required:
            - spec
          properties:
            apiVersion:
              description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
              type: string
            kind:
              description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
              type: string
            metadata:
              type: object
            spec:
              description: Desired state of the CertificateRequest resource.
              type: object
              required:
                - issuerRef
                - request
              properties:
                duration:
                  description: The requested 'duration' (i.e. lifetime) of the Certificate. This option may be ignored/overridden by some issuer types.
                  type: string
                extra:
                  description: Extra contains extra attributes of the user that created the CertificateRequest. Populated by the cert-manager webhook on creation and immutable.
                  type: object
                  additionalProperties:
                    type: array
                    items:
                      type: string
                groups:
                  description: Groups contains group membership of the user that created the CertificateRequest. Populated by the cert-manager webhook on creation and immutable.
                  type: array
                  items:
                    type: string
                  x-kubernetes-list-type: atomic
                isCA:
                  description: IsCA will request to mark the certificate as valid for certificate signing when submitting to the issuer. This will automatically add the `cert sign` usage to the list of `usages`.
                  type: boolean
                issuerRef:
                  description: IssuerRef is a reference to the issuer for this CertificateRequest.  If the `kind` field is not set, or set to `Issuer`, an Issuer resource with the given name in the same namespace as the CertificateRequest will be used.  If the `kind` field is set to `ClusterIssuer`, a ClusterIssuer with the provided name will be used. The `name` field in this stanza is required at all times. The group field refers to the API group of the issuer which defaults to `cert-manager.io` if empty.
                  type: object
                  required:
                    - name
                  properties:
                    group:
                      description: Group of the resource being referred to.
                      type: string
                    kind:
                      description: Kind of the resource being referred to.
                      type: string
                    name:
                      description: Name of the resource being referred to.
                      type: string
                request:
                  description: The PEM-encoded x509 certificate signing request to be submitted to the CA for signing.
                  type: string
                  format: byte
                uid:
                  description: UID contains the uid of the user that created the CertificateRequest. Populated by the cert-manager webhook on creation and immutable.
                  type: string
                usages:
                  description: Usages is the set of x509 usages that are requested for the certificate. If usages are set they SHOULD be encoded inside the CSR spec Defaults to `digital signature` and `key encipherment` if not specified.
                  type: array
                  items:
                    description: "KeyUsage specifies valid usage contexts for keys. See: https://tools.ietf.org/html/rfc5280#section-4.2.1.3 https://tools.ietf.org/html/rfc5280#section-4.2.1.12 \n Valid KeyUsage values are as follows: \"signing\", \"digital signature\", \"content commitment\", \"key encipherment\", \"key agreement\", \"data encipherment\", \"cert sign\", \"crl sign\", \"encipher only\", \"decipher only\", \"any\", \"server auth\", \"client auth\", \"code signing\", \"email protection\", \"s/mime\", \"ipsec end system\", \"ipsec tunnel\", \"ipsec user\", \"timestamping\", \"ocsp signing\", \"microsoft sgc\", \"netscape sgc\""
                    type: string
                    enum:
                      - signing
                      - digital signature
                      - content commitment
                      - key encipherment
                      - key agreement
                      - data encipherment
                      - cert sign
                      - crl sign
                      - encipher only
                      - decipher only
                      - any
                      - server auth
                      - client auth
                      - code signing
                      - email protection
                      - s/mime
                      - ipsec end system
                      - ipsec tunnel
                      - ipsec user
                      - timestamping
                      - ocsp signing
                      - microsoft sgc
                      - netscape sgc
                username:
                  description: Username contains the name of the user that created the CertificateRequest. Populated by the cert-manager webhook on creation and immutable.
                  type: string
            status:
              description: Status of the CertificateRequest. This is set and managed automatically.
              type: object
              properties:
                ca:
                  description: The PEM encoded x509 certificate of the signer, also known as the CA (Certificate Authority). This is set on a best-effort basis by different issuers. If not set, the CA is assumed to be unknown/not available.
                  type: string
                  format: byte
                certificate:
                  description: The PEM encoded x509 certificate resulting from the certificate signing request. If not set, the CertificateRequest has either not been completed or has failed. More information on failure can be found by checking the `conditions` field.
                  type: string
                  format: byte
                conditions:
                  description: List of status conditions to indicate the status of a CertificateRequest. Known condition types are `Ready` and `InvalidRequest`.
                  type: array
                  items:
                    description: CertificateRequestCondition contains condition information for a CertificateRequest.
                    type: object
                    required:
                      - status
                      - type
                    properties:
                      lastTransitionTime:
                        description: LastTransitionTime is the timestamp corresponding to the last status change of this condition.
                        type: string
                        format: date-time
                      message:
                        description: Message is a human readable description of the details of the last transition, complementing reason.
                        type: string
                      reason:
                        description: Reason is a brief machine readable explanation for the condition's last transition.
                        type: string
                      status:
                        description: Status of the condition, one of (`True`, `False`, `Unknown`).
                        type: string
                        enum:
                          - "True"
                          - "False"
                          - Unknown
                      type:
                        description: Type of the condition, known values are (`Ready`, `InvalidRequest`, `Approved`, `Denied`).
                        type: string
                  x-kubernetes-list-map-keys:
                    - type
                  x-kubernetes-list-type: map
                failureTime:
                  description: FailureTime stores the time that this CertificateRequest failed. This is used to influence garbage collection and back-off.
                  type: string
                  format: date-time
      served: true
      storage: true
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/crds.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: issuers.cert-manager.io
  labels:
    app: 'cert-manager'
    app.kubernetes.io/name: 'cert-manager'
    app.kubernetes.io/instance: 'canvas'
    # Generated labels
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  group: cert-manager.io
  names:
    kind: Issuer
    listKind: IssuerList
    plural: issuers
    singular: issuer
    categories:
      - cert-manager
  scope: Namespaced
  versions:
    - name: v1
      subresources:
        status: {}
      additionalPrinterColumns:
        - jsonPath: .status.conditions[?(@.type=="Ready")].status
          name: Ready
          type: string
        - jsonPath: .status.conditions[?(@.type=="Ready")].message
          name: Status
          priority: 1
          type: string
        - jsonPath: .metadata.creationTimestamp
          description: CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          name: Age
          type: date
      schema:
        openAPIV3Schema:
          description: An Issuer represents a certificate issuing authority which can be referenced as part of `issuerRef` fields. It is scoped to a single namespace and can therefore only be referenced by resources within the same namespace.
          type: object
          required:
            - spec
          properties:
            apiVersion:
              description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
              type: string
            kind:
              description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
              type: string
            metadata:
              type: object
            spec:
              description: Desired state of the Issuer resource.
              type: object
              properties:
                acme:
                  description: ACME configures this issuer to communicate with a RFC8555 (ACME) server to obtain signed x509 certificates.
                  type: object
                  required:
                    - privateKeySecretRef
                    - server
                  properties:
                    caBundle:
                      description: Base64-encoded bundle of PEM CAs which can be used to validate the certificate chain presented by the ACME server. Mutually exclusive with SkipTLSVerify; prefer using CABundle to prevent various kinds of security vulnerabilities. If CABundle and SkipTLSVerify are unset, the system certificate bundle inside the container is used to validate the TLS connection.
                      type: string
                      format: byte
                    disableAccountKeyGeneration:
                      description: Enables or disables generating a new ACME account key. If true, the Issuer resource will *not* request a new account but will expect the account key to be supplied via an existing secret. If false, the cert-manager system will generate a new ACME account key for the Issuer. Defaults to false.
                      type: boolean
                    email:
                      description: Email is the email address to be associated with the ACME account. This field is optional, but it is strongly recommended to be set. It will be used to contact you in case of issues with your account or certificates, including expiry notification emails. This field may be updated after the account is initially registered.
                      type: string
                    enableDurationFeature:
                      description: Enables requesting a Not After date on certificates that matches the duration of the certificate. This is not supported by all ACME servers like Let's Encrypt. If set to true when the ACME server does not support it it will create an error on the Order. Defaults to false.
                      type: boolean
                    externalAccountBinding:
                      description: ExternalAccountBinding is a reference to a CA external account of the ACME server. If set, upon registration cert-manager will attempt to associate the given external account credentials with the registered ACME account.
                      type: object
                      required:
                        - keyID
                        - keySecretRef
                      properties:
                        keyAlgorithm:
                          description: 'Deprecated: keyAlgorithm field exists for historical compatibility reasons and should not be used. The algorithm is now hardcoded to HS256 in golang/x/crypto/acme.'
                          type: string
                          enum:
                            - HS256
                            - HS384
                            - HS512
                        keyID:
                          description: keyID is the ID of the CA key that the External Account is bound to.
                          type: string
                        keySecretRef:
                          description: keySecretRef is a Secret Key Selector referencing a data item in a Kubernetes Secret which holds the symmetric MAC key of the External Account Binding. The `key` is the index string that is paired with the key data in the Secret and should not be confused with the key data itself, or indeed with the External Account Binding keyID above. The secret key stored in the Secret **must** be un-padded, base64 URL encoded data.
                          type: object
                          required:
                            - name
                          properties:
                            key:
                              description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                              type: string
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                    preferredChain:
                      description: 'PreferredChain is the chain to use if the ACME server outputs multiple. PreferredChain is no guarantee that this one gets delivered by the ACME endpoint. For example, for Let''s Encrypt''s DST crosssign you would use: "DST Root CA X3" or "ISRG Root X1" for the newer Let''s Encrypt root CA. This value picks the first certificate bundle in the ACME alternative chains that has a certificate with this value as its issuer''s CN'
                      type: string
                      maxLength: 64
                    privateKeySecretRef:
                      description: PrivateKey is the name of a Kubernetes Secret resource that will be used to store the automatically generated ACME account private key. Optionally, a `key` may be specified to select a specific entry within the named Secret resource. If `key` is not specified, a default of `tls.key` will be used.
                      type: object
                      required:
                        - name
                      properties:
                        key:
                          description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                          type: string
                        name:
                          description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                          type: string
                    server:
                      description: 'Server is the URL used to access the ACME server''s ''directory'' endpoint. For example, for Let''s Encrypt''s staging endpoint, you would use: "https://acme-staging-v02.api.letsencrypt.org/directory". Only ACME v2 endpoints (i.e. RFC 8555) are supported.'
                      type: string
                    skipTLSVerify:
                      description: 'INSECURE: Enables or disables validation of the ACME server TLS certificate. If true, requests to the ACME server will not have the TLS certificate chain validated. Mutually exclusive with CABundle; prefer using CABundle to prevent various kinds of security vulnerabilities. Only enable this option in development environments. If CABundle and SkipTLSVerify are unset, the system certificate bundle inside the container is used to validate the TLS connection. Defaults to false.'
                      type: boolean
                    solvers:
                      description: 'Solvers is a list of challenge solvers that will be used to solve ACME challenges for the matching domains. Solver configurations must be provided in order to obtain certificates from an ACME server. For more information, see: https://cert-manager.io/docs/configuration/acme/'
                      type: array
                      items:
                        description: An ACMEChallengeSolver describes how to solve ACME challenges for the issuer it is part of. A selector may be provided to use different solving strategies for different DNS names. Only one of HTTP01 or DNS01 must be provided.
                        type: object
                        properties:
                          dns01:
                            description: Configures cert-manager to attempt to complete authorizations by performing the DNS01 challenge flow.
                            type: object
                            properties:
                              acmeDNS:
                                description: Use the 'ACME DNS' (https://github.com/joohoi/acme-dns) API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - accountSecretRef
                                  - host
                                properties:
                                  accountSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  host:
                                    type: string
                              akamai:
                                description: Use the Akamai DNS zone management API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - accessTokenSecretRef
                                  - clientSecretSecretRef
                                  - clientTokenSecretRef
                                  - serviceConsumerDomain
                                properties:
                                  accessTokenSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  clientSecretSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  clientTokenSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  serviceConsumerDomain:
                                    type: string
                              azureDNS:
                                description: Use the Microsoft Azure DNS API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - resourceGroupName
                                  - subscriptionID
                                properties:
                                  clientID:
                                    description: if both this and ClientSecret are left unset MSI will be used
                                    type: string
                                  clientSecretSecretRef:
                                    description: if both this and ClientID are left unset MSI will be used
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  environment:
                                    description: name of the Azure environment (default AzurePublicCloud)
                                    type: string
                                    enum:
                                      - AzurePublicCloud
                                      - AzureChinaCloud
                                      - AzureGermanCloud
                                      - AzureUSGovernmentCloud
                                  hostedZoneName:
                                    description: name of the DNS zone that should be used
                                    type: string
                                  managedIdentity:
                                    description: managed identity configuration, can not be used at the same time as clientID, clientSecretSecretRef or tenantID
                                    type: object
                                    properties:
                                      clientID:
                                        description: client ID of the managed identity, can not be used at the same time as resourceID
                                        type: string
                                      resourceID:
                                        description: resource ID of the managed identity, can not be used at the same time as clientID
                                        type: string
                                  resourceGroupName:
                                    description: resource group the DNS zone is located in
                                    type: string
                                  subscriptionID:
                                    description: ID of the Azure subscription
                                    type: string
                                  tenantID:
                                    description: when specifying ClientID and ClientSecret then this field is also needed
                                    type: string
                              cloudDNS:
                                description: Use the Google Cloud DNS API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - project
                                properties:
                                  hostedZoneName:
                                    description: HostedZoneName is an optional field that tells cert-manager in which Cloud DNS zone the challenge record has to be created. If left empty cert-manager will automatically choose a zone.
                                    type: string
                                  project:
                                    type: string
                                  serviceAccountSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                              cloudflare:
                                description: Use the Cloudflare API to manage DNS01 challenge records.
                                type: object
                                properties:
                                  apiKeySecretRef:
                                    description: 'API key to use to authenticate with Cloudflare. Note: using an API token to authenticate is now the recommended method as it allows greater control of permissions.'
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  apiTokenSecretRef:
                                    description: API token used to authenticate with Cloudflare.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  email:
                                    description: Email of the account, only required when using API key based authentication.
                                    type: string
                              cnameStrategy:
                                description: CNAMEStrategy configures how the DNS01 provider should handle CNAME records when found in DNS zones.
                                type: string
                                enum:
                                  - None
                                  - Follow
                              digitalocean:
                                description: Use the DigitalOcean DNS API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - tokenSecretRef
                                properties:
                                  tokenSecretRef:
                                    description: A reference to a specific 'key' within a Secret resource. In some instances, `key` is a required field.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                              rfc2136:
                                description: Use RFC2136 ("Dynamic Updates in the Domain Name System") (https://datatracker.ietf.org/doc/rfc2136/) to manage DNS01 challenge records.
                                type: object
                                required:
                                  - nameserver
                                properties:
                                  nameserver:
                                    description: The IP address or hostname of an authoritative DNS server supporting RFC2136 in the form host:port. If the host is an IPv6 address it must be enclosed in square brackets (e.g [2001:db8::1]); port is optional. This field is required.
                                    type: string
                                  tsigAlgorithm:
                                    description: 'The TSIG Algorithm configured in the DNS supporting RFC2136. Used only when ``tsigSecretSecretRef`` and ``tsigKeyName`` are defined. Supported values are (case-insensitive): ``HMACMD5`` (default), ``HMACSHA1``, ``HMACSHA256`` or ``HMACSHA512``.'
                                    type: string
                                  tsigKeyName:
                                    description: The TSIG Key name configured in the DNS. If ``tsigSecretSecretRef`` is defined, this field is required.
                                    type: string
                                  tsigSecretSecretRef:
                                    description: The name of the secret containing the TSIG value. If ``tsigKeyName`` is defined, this field is required.
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                              route53:
                                description: Use the AWS Route53 API to manage DNS01 challenge records.
                                type: object
                                required:
                                  - region
                                properties:
                                  accessKeyID:
                                    description: 'The AccessKeyID is used for authentication. Cannot be set when SecretAccessKeyID is set. If neither the Access Key nor Key ID are set, we fall-back to using env vars, shared credentials file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                    type: string
                                  accessKeyIDSecretRef:
                                    description: 'The SecretAccessKey is used for authentication. If set, pull the AWS access key ID from a key within a Kubernetes Secret. Cannot be set when AccessKeyID is set. If neither the Access Key nor Key ID are set, we fall-back to using env vars, shared credentials file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                                  hostedZoneID:
                                    description: If set, the provider will manage only this zone in Route53 and will not do an lookup using the route53:ListHostedZonesByName api call.
                                    type: string
                                  region:
                                    description: Always set the region when using AccessKeyID and SecretAccessKey
                                    type: string
                                  role:
                                    description: Role is a Role ARN which the Route53 provider will assume using either the explicit credentials AccessKeyID/SecretAccessKey or the inferred credentials from environment variables, shared credentials file or AWS Instance metadata
                                    type: string
                                  secretAccessKeySecretRef:
                                    description: 'The SecretAccessKey is used for authentication. If neither the Access Key nor Key ID are set, we fall-back to using env vars, shared credentials file or AWS Instance metadata, see: https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials'
                                    type: object
                                    required:
                                      - name
                                    properties:
                                      key:
                                        description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                        type: string
                                      name:
                                        description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                        type: string
                              webhook:
                                description: Configure an external webhook based DNS01 challenge solver to manage DNS01 challenge records.
                                type: object
                                required:
                                  - groupName
                                  - solverName
                                properties:
                                  config:
                                    description: Additional configuration that should be passed to the webhook apiserver when challenges are processed. This can contain arbitrary JSON data. Secret values should not be specified in this stanza. If secret values are needed (e.g. credentials for a DNS service), you should use a SecretKeySelector to reference a Secret resource. For details on the schema of this field, consult the webhook provider implementation's documentation.
                                    x-kubernetes-preserve-unknown-fields: true
                                  groupName:
                                    description: The API group name that should be used when POSTing ChallengePayload resources to the webhook apiserver. This should be the same as the GroupName specified in the webhook provider implementation.
                                    type: string
                                  solverName:
                                    description: The name of the solver to use, as defined in the webhook provider implementation. This will typically be the name of the provider, e.g. 'cloudflare'.
                                    type: string
                          http01:
                            description: Configures cert-manager to attempt to complete authorizations by performing the HTTP01 challenge flow. It is not possible to obtain certificates for wildcard domain names (e.g. `*.example.com`) using the HTTP01 challenge mechanism.
                            type: object
                            properties:
                              gatewayHTTPRoute:
                                description: The Gateway API is a sig-network community API that models service networking in Kubernetes (https://gateway-api.sigs.k8s.io/). The Gateway solver will create HTTPRoutes with the specified labels in the same namespace as the challenge. This solver is experimental, and fields / behaviour may change in the future.
                                type: object
                                properties:
                                  labels:
                                    description: Custom labels that will be applied to HTTPRoutes created by cert-manager while solving HTTP-01 challenges.
                                    type: object
                                    additionalProperties:
                                      type: string
                                  parentRefs:
                                    description: 'When solving an HTTP-01 challenge, cert-manager creates an HTTPRoute. cert-manager needs to know which parentRefs should be used when creating the HTTPRoute. Usually, the parentRef references a Gateway. See: https://gateway-api.sigs.k8s.io/api-types/httproute/#attaching-to-gateways'
                                    type: array
                                    items:
                                      description: "ParentReference identifies an API object (usually a Gateway) that can be considered a parent of this resource (usually a route). The only kind of parent resource with \"Core\" support is Gateway. This API may be extended in the future to support additional kinds of parent resources, such as HTTPRoute. \n The API object must be valid in the cluster; the Group and Kind must be registered in the cluster for this reference to be valid."
                                      type: object
                                      required:
                                        - name
                                      properties:
                                        group:
                                          description: "Group is the group of the referent. When unspecified, \"gateway.networking.k8s.io\" is inferred. To set the core API group (such as for a \"Service\" kind referent), Group must be explicitly set to \"\" (empty string). \n Support: Core"
                                          type: string
                                          default: gateway.networking.k8s.io
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                        kind:
                                          description: "Kind is kind of the referent. \n Support: Core (Gateway) \n Support: Implementation-specific (Other Resources)"
                                          type: string
                                          default: Gateway
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                        name:
                                          description: "Name is the name of the referent. \n Support: Core"
                                          type: string
                                          maxLength: 253
                                          minLength: 1
                                        namespace:
                                          description: "Namespace is the namespace of the referent. When unspecified, this refers to the local namespace of the Route. \n Note that there are specific rules for ParentRefs which cross namespace boundaries. Cross-namespace references are only valid if they are explicitly allowed by something in the namespace they are referring to. For example: Gateway has the AllowedRoutes field, and ReferenceGrant provides a generic way to enable any other kind of cross-namespace reference. \n Support: Core"
                                          type: string
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                        port:
                                          description: "Port is the network port this Route targets. It can be interpreted differently based on the type of parent resource. \n When the parent resource is a Gateway, this targets all listeners listening on the specified port that also support this kind of Route(and select this Route). It's not recommended to set `Port` unless the networking behaviors specified in a Route must apply to a specific port as opposed to a listener(s) whose port(s) may be changed. When both Port and SectionName are specified, the name and port of the selected listener must match both specified values. \n Implementations MAY choose to support other parent resources. Implementations supporting other types of parent resources MUST clearly document how/if Port is interpreted. \n For the purpose of status, an attachment is considered successful as long as the parent resource accepts it partially. For example, Gateway listeners can restrict which Routes can attach to them by Route kind, namespace, or hostname. If 1 of 2 Gateway listeners accept attachment from the referencing Route, the Route MUST be considered successfully attached. If no Gateway listeners accept attachment from this Route, the Route MUST be considered detached from the Gateway. \n Support: Extended \n <gateway:experimental>"
                                          type: integer
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                        sectionName:
                                          description: "SectionName is the name of a section within the target resource. In the following resources, SectionName is interpreted as the following: \n * Gateway: Listener Name. When both Port (experimental) and SectionName are specified, the name and port of the selected listener must match both specified values. \n Implementations MAY choose to support attaching Routes to other resources. If that is the case, they MUST clearly document how SectionName is interpreted. \n When unspecified (empty string), this will reference the entire resource. For the purpose of status, an attachment is considered successful if at least one section in the parent resource accepts it. For example, Gateway listeners can restrict which Routes can attach to them by Route kind, namespace, or hostname. If 1 of 2 Gateway listeners accept attachment from the referencing Route, the Route MUST be considered successfully attached. If no Gateway listeners accept attachment from this Route, the Route MUST be considered detached from the Gateway. \n Support: Core"
                                          type: string
                                          maxLength: 253
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                  serviceType:
                                    description: Optional service type for Kubernetes solver service. Supported values are NodePort or ClusterIP. If unset, defaults to NodePort.
                                    type: string
                              ingress:
                                description: The ingress based HTTP01 challenge solver will solve challenges by creating or modifying Ingress resources in order to route requests for '/.well-known/acme-challenge/XYZ' to 'challenge solver' pods that are provisioned by cert-manager for each Challenge to be completed.
                                type: object
                                properties:
                                  class:
                                    description: The ingress class to use when creating Ingress resources to solve ACME challenges that use this challenge solver. Only one of 'class' or 'name' may be specified.
                                    type: string
                                  ingressTemplate:
                                    description: Optional ingress template used to configure the ACME challenge solver ingress used for HTTP01 challenges.
                                    type: object
                                    properties:
                                      metadata:
                                        description: ObjectMeta overrides for the ingress used to solve HTTP01 challenges. Only the 'labels' and 'annotations' fields may be set. If labels or annotations overlap with in-built values, the values here will override the in-built values.
                                        type: object
                                        properties:
                                          annotations:
                                            description: Annotations that should be added to the created ACME HTTP01 solver ingress.
                                            type: object
                                            additionalProperties:
                                              type: string
                                          labels:
                                            description: Labels that should be added to the created ACME HTTP01 solver ingress.
                                            type: object
                                            additionalProperties:
                                              type: string
                                  name:
                                    description: The name of the ingress resource that should have ACME challenge solving routes inserted into it in order to solve HTTP01 challenges. This is typically used in conjunction with ingress controllers like ingress-gce, which maintains a 1:1 mapping between external IPs and ingress resources.
                                    type: string
                                  podTemplate:
                                    description: Optional pod template used to configure the ACME challenge solver pods used for HTTP01 challenges.
                                    type: object
                                    properties:
                                      metadata:
                                        description: ObjectMeta overrides for the pod used to solve HTTP01 challenges. Only the 'labels' and 'annotations' fields may be set. If labels or annotations overlap with in-built values, the values here will override the in-built values.
                                        type: object
                                        properties:
                                          annotations:
                                            description: Annotations that should be added to the create ACME HTTP01 solver pods.
                                            type: object
                                            additionalProperties:
                                              type: string
                                          labels:
                                            description: Labels that should be added to the created ACME HTTP01 solver pods.
                                            type: object
                                            additionalProperties:
                                              type: string
                                      spec:
                                        description: PodSpec defines overrides for the HTTP01 challenge solver pod. Only the 'priorityClassName', 'nodeSelector', 'affinity', 'serviceAccountName' and 'tolerations' fields are supported currently. All other fields will be ignored.
                                        type: object
                                        properties:
                                          affinity:
                                            description: If specified, the pod's scheduling constraints
                                            type: object
                                            properties:
                                              nodeAffinity:
                                                description: Describes node affinity scheduling rules for the pod.
                                                type: object
                                                properties:
                                                  preferredDuringSchedulingIgnoredDuringExecution:
                                                    description: The scheduler will prefer to schedule pods to nodes that satisfy the affinity expressions specified by this field, but it may choose a node that violates one or more of the expressions. The node that is most preferred is the one with the greatest sum of weights, i.e. for each node that meets all of the scheduling requirements (resource request, requiredDuringScheduling affinity expressions, etc.), compute a sum by iterating through the elements of this field and adding "weight" to the sum if the node matches the corresponding matchExpressions; the node(s) with the highest sum are the most preferred.
                                                    type: array
                                                    items:
                                                      description: An empty preferred scheduling term matches all objects with implicit weight 0 (i.e. it's a no-op). A null preferred scheduling term matches no objects (i.e. is also a no-op).
                                                      type: object
                                                      required:
                                                        - preference
                                                        - weight
                                                      properties:
                                                        preference:
                                                          description: A node selector term, associated with the corresponding weight.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: A list of node selector requirements by node's labels.
                                                              type: array
                                                              items:
                                                                description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: The label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                                    type: string
                                                                  values:
                                                                    description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchFields:
                                                              description: A list of node selector requirements by node's fields.
                                                              type: array
                                                              items:
                                                                description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: The label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                                    type: string
                                                                  values:
                                                                    description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                          x-kubernetes-map-type: atomic
                                                        weight:
                                                          description: Weight associated with matching the corresponding nodeSelectorTerm, in the range 1-100.
                                                          type: integer
                                                          format: int32
                                                  requiredDuringSchedulingIgnoredDuringExecution:
                                                    description: If the affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node. If the affinity requirements specified by this field cease to be met at some point during pod execution (e.g. due to an update), the system may or may not try to eventually evict the pod from its node.
                                                    type: object
                                                    required:
                                                      - nodeSelectorTerms
                                                    properties:
                                                      nodeSelectorTerms:
                                                        description: Required. A list of node selector terms. The terms are ORed.
                                                        type: array
                                                        items:
                                                          description: A null or empty node selector term matches no objects. The requirements of them are ANDed. The TopologySelectorTerm type implements a subset of the NodeSelectorTerm.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: A list of node selector requirements by node's labels.
                                                              type: array
                                                              items:
                                                                description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: The label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                                    type: string
                                                                  values:
                                                                    description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchFields:
                                                              description: A list of node selector requirements by node's fields.
                                                              type: array
                                                              items:
                                                                description: A node selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: The label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: Represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                                    type: string
                                                                  values:
                                                                    description: An array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. If the operator is Gt or Lt, the values array must have a single element, which will be interpreted as an integer. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                          x-kubernetes-map-type: atomic
                                                    x-kubernetes-map-type: atomic
                                              podAffinity:
                                                description: Describes pod affinity scheduling rules (e.g. co-locate this pod in the same node, zone, etc. as some other pod(s)).
                                                type: object
                                                properties:
                                                  preferredDuringSchedulingIgnoredDuringExecution:
                                                    description: The scheduler will prefer to schedule pods to nodes that satisfy the affinity expressions specified by this field, but it may choose a node that violates one or more of the expressions. The node that is most preferred is the one with the greatest sum of weights, i.e. for each node that meets all of the scheduling requirements (resource request, requiredDuringScheduling affinity expressions, etc.), compute a sum by iterating through the elements of this field and adding "weight" to the sum if the node has pods which matches the corresponding podAffinityTerm; the node(s) with the highest sum are the most preferred.
                                                    type: array
                                                    items:
                                                      description: The weights of all of the matched WeightedPodAffinityTerm fields are added per-node to find the most preferred node(s)
                                                      type: object
                                                      required:
                                                        - podAffinityTerm
                                                        - weight
                                                      properties:
                                                        podAffinityTerm:
                                                          description: Required. A pod affinity term, associated with the corresponding weight.
                                                          type: object
                                                          required:
                                                            - topologyKey
                                                          properties:
                                                            labelSelector:
                                                              description: A label query over a set of resources, in this case pods.
                                                              type: object
                                                              properties:
                                                                matchExpressions:
                                                                  description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                                  type: array
                                                                  items:
                                                                    description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                    type: object
                                                                    required:
                                                                      - key
                                                                      - operator
                                                                    properties:
                                                                      key:
                                                                        description: key is the label key that the selector applies to.
                                                                        type: string
                                                                      operator:
                                                                        description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                        type: string
                                                                      values:
                                                                        description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                        type: array
                                                                        items:
                                                                          type: string
                                                                matchLabels:
                                                                  description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                                  type: object
                                                                  additionalProperties:
                                                                    type: string
                                                              x-kubernetes-map-type: atomic
                                                            namespaceSelector:
                                                              description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                              type: object
                                                              properties:
                                                                matchExpressions:
                                                                  description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                                  type: array
                                                                  items:
                                                                    description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                    type: object
                                                                    required:
                                                                      - key
                                                                      - operator
                                                                    properties:
                                                                      key:
                                                                        description: key is the label key that the selector applies to.
                                                                        type: string
                                                                      operator:
                                                                        description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                        type: string
                                                                      values:
                                                                        description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                        type: array
                                                                        items:
                                                                          type: string
                                                                matchLabels:
                                                                  description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                                  type: object
                                                                  additionalProperties:
                                                                    type: string
                                                              x-kubernetes-map-type: atomic
                                                            namespaces:
                                                              description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                              type: array
                                                              items:
                                                                type: string
                                                            topologyKey:
                                                              description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                              type: string
                                                        weight:
                                                          description: weight associated with matching the corresponding podAffinityTerm, in the range 1-100.
                                                          type: integer
                                                          format: int32
                                                  requiredDuringSchedulingIgnoredDuringExecution:
                                                    description: If the affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node. If the affinity requirements specified by this field cease to be met at some point during pod execution (e.g. due to a pod label update), the system may or may not try to eventually evict the pod from its node. When there are multiple elements, the lists of nodes corresponding to each podAffinityTerm are intersected, i.e. all terms must be satisfied.
                                                    type: array
                                                    items:
                                                      description: Defines a set of pods (namely those matching the labelSelector relative to the given namespace(s)) that this pod should be co-located (affinity) or not co-located (anti-affinity) with, where co-located is defined as running on a node whose value of the label with key <topologyKey> matches that of any node on which a pod of the set of pods is running
                                                      type: object
                                                      required:
                                                        - topologyKey
                                                      properties:
                                                        labelSelector:
                                                          description: A label query over a set of resources, in this case pods.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                              type: array
                                                              items:
                                                                description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: key is the label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                    type: string
                                                                  values:
                                                                    description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchLabels:
                                                              description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                              type: object
                                                              additionalProperties:
                                                                type: string
                                                          x-kubernetes-map-type: atomic
                                                        namespaceSelector:
                                                          description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                              type: array
                                                              items:
                                                                description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: key is the label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                    type: string
                                                                  values:
                                                                    description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchLabels:
                                                              description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                              type: object
                                                              additionalProperties:
                                                                type: string
                                                          x-kubernetes-map-type: atomic
                                                        namespaces:
                                                          description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                          type: array
                                                          items:
                                                            type: string
                                                        topologyKey:
                                                          description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                          type: string
                                              podAntiAffinity:
                                                description: Describes pod anti-affinity scheduling rules (e.g. avoid putting this pod in the same node, zone, etc. as some other pod(s)).
                                                type: object
                                                properties:
                                                  preferredDuringSchedulingIgnoredDuringExecution:
                                                    description: The scheduler will prefer to schedule pods to nodes that satisfy the anti-affinity expressions specified by this field, but it may choose a node that violates one or more of the expressions. The node that is most preferred is the one with the greatest sum of weights, i.e. for each node that meets all of the scheduling requirements (resource request, requiredDuringScheduling anti-affinity expressions, etc.), compute a sum by iterating through the elements of this field and adding "weight" to the sum if the node has pods which matches the corresponding podAffinityTerm; the node(s) with the highest sum are the most preferred.
                                                    type: array
                                                    items:
                                                      description: The weights of all of the matched WeightedPodAffinityTerm fields are added per-node to find the most preferred node(s)
                                                      type: object
                                                      required:
                                                        - podAffinityTerm
                                                        - weight
                                                      properties:
                                                        podAffinityTerm:
                                                          description: Required. A pod affinity term, associated with the corresponding weight.
                                                          type: object
                                                          required:
                                                            - topologyKey
                                                          properties:
                                                            labelSelector:
                                                              description: A label query over a set of resources, in this case pods.
                                                              type: object
                                                              properties:
                                                                matchExpressions:
                                                                  description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                                  type: array
                                                                  items:
                                                                    description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                    type: object
                                                                    required:
                                                                      - key
                                                                      - operator
                                                                    properties:
                                                                      key:
                                                                        description: key is the label key that the selector applies to.
                                                                        type: string
                                                                      operator:
                                                                        description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                        type: string
                                                                      values:
                                                                        description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                        type: array
                                                                        items:
                                                                          type: string
                                                                matchLabels:
                                                                  description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                                  type: object
                                                                  additionalProperties:
                                                                    type: string
                                                              x-kubernetes-map-type: atomic
                                                            namespaceSelector:
                                                              description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                              type: object
                                                              properties:
                                                                matchExpressions:
                                                                  description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                                  type: array
                                                                  items:
                                                                    description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                    type: object
                                                                    required:
                                                                      - key
                                                                      - operator
                                                                    properties:
                                                                      key:
                                                                        description: key is the label key that the selector applies to.
                                                                        type: string
                                                                      operator:
                                                                        description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                        type: string
                                                                      values:
                                                                        description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                        type: array
                                                                        items:
                                                                          type: string
                                                                matchLabels:
                                                                  description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                                  type: object
                                                                  additionalProperties:
                                                                    type: string
                                                              x-kubernetes-map-type: atomic
                                                            namespaces:
                                                              description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                              type: array
                                                              items:
                                                                type: string
                                                            topologyKey:
                                                              description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                              type: string
                                                        weight:
                                                          description: weight associated with matching the corresponding podAffinityTerm, in the range 1-100.
                                                          type: integer
                                                          format: int32
                                                  requiredDuringSchedulingIgnoredDuringExecution:
                                                    description: If the anti-affinity requirements specified by this field are not met at scheduling time, the pod will not be scheduled onto the node. If the anti-affinity requirements specified by this field cease to be met at some point during pod execution (e.g. due to a pod label update), the system may or may not try to eventually evict the pod from its node. When there are multiple elements, the lists of nodes corresponding to each podAffinityTerm are intersected, i.e. all terms must be satisfied.
                                                    type: array
                                                    items:
                                                      description: Defines a set of pods (namely those matching the labelSelector relative to the given namespace(s)) that this pod should be co-located (affinity) or not co-located (anti-affinity) with, where co-located is defined as running on a node whose value of the label with key <topologyKey> matches that of any node on which a pod of the set of pods is running
                                                      type: object
                                                      required:
                                                        - topologyKey
                                                      properties:
                                                        labelSelector:
                                                          description: A label query over a set of resources, in this case pods.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                              type: array
                                                              items:
                                                                description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: key is the label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                    type: string
                                                                  values:
                                                                    description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchLabels:
                                                              description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                              type: object
                                                              additionalProperties:
                                                                type: string
                                                          x-kubernetes-map-type: atomic
                                                        namespaceSelector:
                                                          description: A label query over the set of namespaces that the term applies to. The term is applied to the union of the namespaces selected by this field and the ones listed in the namespaces field. null selector and null or empty namespaces list means "this pod's namespace". An empty selector ({}) matches all namespaces.
                                                          type: object
                                                          properties:
                                                            matchExpressions:
                                                              description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                                                              type: array
                                                              items:
                                                                description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                                                                type: object
                                                                required:
                                                                  - key
                                                                  - operator
                                                                properties:
                                                                  key:
                                                                    description: key is the label key that the selector applies to.
                                                                    type: string
                                                                  operator:
                                                                    description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                                                                    type: string
                                                                  values:
                                                                    description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                                                                    type: array
                                                                    items:
                                                                      type: string
                                                            matchLabels:
                                                              description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                              type: object
                                                              additionalProperties:
                                                                type: string
                                                          x-kubernetes-map-type: atomic
                                                        namespaces:
                                                          description: namespaces specifies a static list of namespace names that the term applies to. The term is applied to the union of the namespaces listed in this field and the ones selected by namespaceSelector. null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                                          type: array
                                                          items:
                                                            type: string
                                                        topologyKey:
                                                          description: This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching the labelSelector in the specified namespaces, where co-located is defined as running on a node whose value of the label with key topologyKey matches that of any node on which any of the selected pods is running. Empty topologyKey is not allowed.
                                                          type: string
                                          nodeSelector:
                                            description: 'NodeSelector is a selector which must be true for the pod to fit on a node. Selector which must match a node''s labels for the pod to be scheduled on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/'
                                            type: object
                                            additionalProperties:
                                              type: string
                                          priorityClassName:
                                            description: If specified, the pod's priorityClassName.
                                            type: string
                                          serviceAccountName:
                                            description: If specified, the pod's service account
                                            type: string
                                          tolerations:
                                            description: If specified, the pod's tolerations.
                                            type: array
                                            items:
                                              description: The pod this Toleration is attached to tolerates any taint that matches the triple <key,value,effect> using the matching operator <operator>.
                                              type: object
                                              properties:
                                                effect:
                                                  description: Effect indicates the taint effect to match. Empty means match all taint effects. When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                                  type: string
                                                key:
                                                  description: Key is the taint key that the toleration applies to. Empty means match all taint keys. If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                                  type: string
                                                operator:
                                                  description: Operator represents a key's relationship to the value. Valid operators are Exists and Equal. Defaults to Equal. Exists is equivalent to wildcard for value, so that a pod can tolerate all taints of a particular category.
                                                  type: string
                                                tolerationSeconds:
                                                  description: TolerationSeconds represents the period of time the toleration (which must be of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default, it is not set, which means tolerate the taint forever (do not evict). Zero and negative values will be treated as 0 (evict immediately) by the system.
                                                  type: integer
                                                  format: int64
                                                value:
                                                  description: Value is the taint value the toleration matches to. If the operator is Exists, the value should be empty, otherwise just a regular string.
                                                  type: string
                                  serviceType:
                                    description: Optional service type for Kubernetes solver service. Supported values are NodePort or ClusterIP. If unset, defaults to NodePort.
                                    type: string
                          selector:
                            description: Selector selects a set of DNSNames on the Certificate resource that should be solved using this challenge solver. If not specified, the solver will be treated as the 'default' solver with the lowest priority, i.e. if any other solver has a more specific match, it will be used instead.
                            type: object
                            properties:
                              dnsNames:
                                description: List of DNSNames that this solver will be used to solve. If specified and a match is found, a dnsNames selector will take precedence over a dnsZones selector. If multiple solvers match with the same dnsNames value, the solver with the most matching labels in matchLabels will be selected. If neither has more matches, the solver defined earlier in the list will be selected.
                                type: array
                                items:
                                  type: string
                              dnsZones:
                                description: List of DNSZones that this solver will be used to solve. The most specific DNS zone match specified here will take precedence over other DNS zone matches, so a solver specifying sys.example.com will be selected over one specifying example.com for the domain www.sys.example.com. If multiple solvers match with the same dnsZones value, the solver with the most matching labels in matchLabels will be selected. If neither has more matches, the solver defined earlier in the list will be selected.
                                type: array
                                items:
                                  type: string
                              matchLabels:
                                description: A label selector that is used to refine the set of certificate's that this challenge solver will apply to.
                                type: object
                                additionalProperties:
                                  type: string
                ca:
                  description: CA configures this issuer to sign certificates using a signing CA keypair stored in a Secret resource. This is used to build internal PKIs that are managed by cert-manager.
                  type: object
                  required:
                    - secretName
                  properties:
                    crlDistributionPoints:
                      description: The CRL distribution points is an X.509 v3 certificate extension which identifies the location of the CRL from which the revocation of this certificate can be checked. If not set, certificates will be issued without distribution points set.
                      type: array
                      items:
                        type: string
                    ocspServers:
                      description: The OCSP server list is an X.509 v3 extension that defines a list of URLs of OCSP responders. The OCSP responders can be queried for the revocation status of an issued certificate. If not set, the certificate will be issued with no OCSP servers set. For example, an OCSP server URL could be "http://ocsp.int-x3.letsencrypt.org".
                      type: array
                      items:
                        type: string
                    secretName:
                      description: SecretName is the name of the secret used to sign Certificates issued by this Issuer.
                      type: string
                selfSigned:
                  description: SelfSigned configures this issuer to 'self sign' certificates using the private key used to create the CertificateRequest object.
                  type: object
                  properties:
                    crlDistributionPoints:
                      description: The CRL distribution points is an X.509 v3 certificate extension which identifies the location of the CRL from which the revocation of this certificate can be checked. If not set certificate will be issued without CDP. Values are strings.
                      type: array
                      items:
                        type: string
                vault:
                  description: Vault configures this issuer to sign certificates using a HashiCorp Vault PKI backend.
                  type: object
                  required:
                    - auth
                    - path
                    - server
                  properties:
                    auth:
                      description: Auth configures how cert-manager authenticates with the Vault server.
                      type: object
                      properties:
                        appRole:
                          description: AppRole authenticates with Vault using the App Role auth mechanism, with the role and secret stored in a Kubernetes Secret resource.
                          type: object
                          required:
                            - path
                            - roleId
                            - secretRef
                          properties:
                            path:
                              description: 'Path where the App Role authentication backend is mounted in Vault, e.g: "approle"'
                              type: string
                            roleId:
                              description: RoleID configured in the App Role authentication backend when setting up the authentication backend in Vault.
                              type: string
                            secretRef:
                              description: Reference to a key in a Secret that contains the App Role secret used to authenticate with Vault. The `key` field must be specified and denotes which entry within the Secret resource is used as the app role secret.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                        kubernetes:
                          description: Kubernetes authenticates with Vault by passing the ServiceAccount token stored in the named Secret resource to the Vault server.
                          type: object
                          required:
                            - role
                            - secretRef
                          properties:
                            mountPath:
                              description: The Vault mountPath here is the mount path to use when authenticating with Vault. For example, setting a value to `/v1/auth/foo`, will use the path `/v1/auth/foo/login` to authenticate with Vault. If unspecified, the default value "/v1/auth/kubernetes" will be used.
                              type: string
                            role:
                              description: A required field containing the Vault Role to assume. A Role binds a Kubernetes ServiceAccount with a set of Vault policies.
                              type: string
                            secretRef:
                              description: The required Secret field containing a Kubernetes ServiceAccount JWT used for authenticating with Vault. Use of 'ambient credentials' is not supported.
                              type: object
                              required:
                                - name
                              properties:
                                key:
                                  description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                                  type: string
                                name:
                                  description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                        tokenSecretRef:
                          description: TokenSecretRef authenticates with Vault by presenting a token.
                          type: object
                          required:
                            - name
                          properties:
                            key:
                              description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                              type: string
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                    caBundle:
                      description: Base64-encoded bundle of PEM CAs which will be used to validate the certificate chain presented by Vault. Only used if using HTTPS to connect to Vault and ignored for HTTP connections. Mutually exclusive with CABundleSecretRef. If neither CABundle nor CABundleSecretRef are defined, the certificate bundle in the cert-manager controller container is used to validate the TLS connection.
                      type: string
                      format: byte
                    caBundleSecretRef:
                      description: Reference to a Secret containing a bundle of PEM-encoded CAs to use when verifying the certificate chain presented by Vault when using HTTPS. Mutually exclusive with CABundle. If neither CABundle nor CABundleSecretRef are defined, the certificate bundle in the cert-manager controller container is used to validate the TLS connection. If no key for the Secret is specified, cert-manager will default to 'ca.crt'.
                      type: object
                      required:
                        - name
                      properties:
                        key:
                          description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                          type: string
                        name:
                          description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                          type: string
                    namespace:
                      description: 'Name of the vault namespace. Namespaces is a set of features within Vault Enterprise that allows Vault environments to support Secure Multi-tenancy. e.g: "ns1" More about namespaces can be found here https://www.vaultproject.io/docs/enterprise/namespaces'
                      type: string
                    path:
                      description: 'Path is the mount path of the Vault PKI backend''s `sign` endpoint, e.g: "my_pki_mount/sign/my-role-name".'
                      type: string
                    server:
                      description: 'Server is the connection address for the Vault server, e.g: "https://vault.example.com:8200".'
                      type: string
                venafi:
                  description: Venafi configures this issuer to sign certificates using a Venafi TPP or Venafi Cloud policy zone.
                  type: object
                  required:
                    - zone
                  properties:
                    cloud:
                      description: Cloud specifies the Venafi cloud configuration settings. Only one of TPP or Cloud may be specified.
                      type: object
                      required:
                        - apiTokenSecretRef
                      properties:
                        apiTokenSecretRef:
                          description: APITokenSecretRef is a secret key selector for the Venafi Cloud API token.
                          type: object
                          required:
                            - name
                          properties:
                            key:
                              description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                              type: string
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                        url:
                          description: URL is the base URL for Venafi Cloud. Defaults to "https://api.venafi.cloud/v1".
                          type: string
                    tpp:
                      description: TPP specifies Trust Protection Platform configuration settings. Only one of TPP or Cloud may be specified.
                      type: object
                      required:
                        - credentialsRef
                        - url
                      properties:
                        caBundle:
                          description: Base64-encoded bundle of PEM CAs which will be used to validate the certificate chain presented by the TPP server. Only used if using HTTPS; ignored for HTTP. If undefined, the certificate bundle in the cert-manager controller container is used to validate the chain.
                          type: string
                          format: byte
                        credentialsRef:
                          description: CredentialsRef is a reference to a Secret containing the username and password for the TPP server. The secret must contain two keys, 'username' and 'password'.
                          type: object
                          required:
                            - name
                          properties:
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                        url:
                          description: 'URL is the base URL for the vedsdk endpoint of the Venafi TPP instance, for example: "https://tpp.example.com/vedsdk".'
                          type: string
                    zone:
                      description: Zone is the Venafi Policy Zone to use for this issuer. All requests made to the Venafi platform will be restricted by the named zone policy. This field is required.
                      type: string
            status:
              description: Status of the Issuer. This is set and managed automatically.
              type: object
              properties:
                acme:
                  description: ACME specific status options. This field should only be set if the Issuer is configured to use an ACME server to issue certificates.
                  type: object
                  properties:
                    lastRegisteredEmail:
                      description: LastRegisteredEmail is the email associated with the latest registered ACME account, in order to track changes made to registered account associated with the  Issuer
                      type: string
                    uri:
                      description: URI is the unique account identifier, which can also be used to retrieve account details from the CA
                      type: string
                conditions:
                  description: List of status conditions to indicate the status of a CertificateRequest. Known condition types are `Ready`.
                  type: array
                  items:
                    description: IssuerCondition contains condition information for an Issuer.
                    type: object
                    required:
                      - status
                      - type
                    properties:
                      lastTransitionTime:
                        description: LastTransitionTime is the timestamp corresponding to the last status change of this condition.
                        type: string
                        format: date-time
                      message:
                        description: Message is a human readable description of the details of the last transition, complementing reason.
                        type: string
                      observedGeneration:
                        description: If set, this represents the .metadata.generation that the condition was set based upon. For instance, if .metadata.generation is currently 12, but the .status.condition[x].observedGeneration is 9, the condition is out of date with respect to the current state of the Issuer.
                        type: integer
                        format: int64
                      reason:
                        description: Reason is a brief machine readable explanation for the condition's last transition.
                        type: string
                      status:
                        description: Status of the condition, one of (`True`, `False`, `Unknown`).
                        type: string
                        enum:
                          - "True"
                          - "False"
                          - Unknown
                      type:
                        description: Type of the condition, known values are (`Ready`).
                        type: string
                  x-kubernetes-list-map-keys:
                    - type
                  x-kubernetes-list-type: map
      served: true
      storage: true
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/crds.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: certificates.cert-manager.io
  labels:
    app: 'cert-manager'
    app.kubernetes.io/name: 'cert-manager'
    app.kubernetes.io/instance: 'canvas'
    # Generated labels
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  group: cert-manager.io
  names:
    kind: Certificate
    listKind: CertificateList
    plural: certificates
    shortNames:
      - cert
      - certs
    singular: certificate
    categories:
      - cert-manager
  scope: Namespaced
  versions:
    - name: v1
      subresources:
        status: {}
      additionalPrinterColumns:
        - jsonPath: .status.conditions[?(@.type=="Ready")].status
          name: Ready
          type: string
        - jsonPath: .spec.secretName
          name: Secret
          type: string
        - jsonPath: .spec.issuerRef.name
          name: Issuer
          priority: 1
          type: string
        - jsonPath: .status.conditions[?(@.type=="Ready")].message
          name: Status
          priority: 1
          type: string
        - jsonPath: .metadata.creationTimestamp
          description: CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          name: Age
          type: date
      schema:
        openAPIV3Schema:
          description: "A Certificate resource should be created to ensure an up to date and signed x509 certificate is stored in the Kubernetes Secret resource named in `spec.secretName`. \n The stored certificate will be renewed before it expires (as configured by `spec.renewBefore`)."
          type: object
          required:
            - spec
          properties:
            apiVersion:
              description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
              type: string
            kind:
              description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
              type: string
            metadata:
              type: object
            spec:
              description: Desired state of the Certificate resource.
              type: object
              required:
                - issuerRef
                - secretName
              properties:
                additionalOutputFormats:
                  description: AdditionalOutputFormats defines extra output formats of the private key and signed certificate chain to be written to this Certificate's target Secret. This is an Alpha Feature and is only enabled with the `--feature-gates=AdditionalCertificateOutputFormats=true` option on both the controller and webhook components.
                  type: array
                  items:
                    description: CertificateAdditionalOutputFormat defines an additional output format of a Certificate resource. These contain supplementary data formats of the signed certificate chain and paired private key.
                    type: object
                    required:
                      - type
                    properties:
                      type:
                        description: Type is the name of the format type that should be written to the Certificate's target Secret.
                        type: string
                        enum:
                          - DER
                          - CombinedPEM
                commonName:
                  description: 'CommonName is a common name to be used on the Certificate. The CommonName should have a length of 64 characters or fewer to avoid generating invalid CSRs. This value is ignored by TLS clients when any subject alt name is set. This is x509 behaviour: https://tools.ietf.org/html/rfc6125#section-6.4.4'
                  type: string
                dnsNames:
                  description: DNSNames is a list of DNS subjectAltNames to be set on the Certificate.
                  type: array
                  items:
                    type: string
                duration:
                  description: The requested 'duration' (i.e. lifetime) of the Certificate. This option may be ignored/overridden by some issuer types. If unset this defaults to 90 days. Certificate will be renewed either 2/3 through its duration or `renewBefore` period before its expiry, whichever is later. Minimum accepted duration is 1 hour. Value must be in units accepted by Go time.ParseDuration https://golang.org/pkg/time/#ParseDuration
                  type: string
                emailAddresses:
                  description: EmailAddresses is a list of email subjectAltNames to be set on the Certificate.
                  type: array
                  items:
                    type: string
                encodeUsagesInRequest:
                  description: EncodeUsagesInRequest controls whether key usages should be present in the CertificateRequest
                  type: boolean
                ipAddresses:
                  description: IPAddresses is a list of IP address subjectAltNames to be set on the Certificate.
                  type: array
                  items:
                    type: string
                isCA:
                  description: IsCA will mark this Certificate as valid for certificate signing. This will automatically add the `cert sign` usage to the list of `usages`.
                  type: boolean
                issuerRef:
                  description: IssuerRef is a reference to the issuer for this certificate. If the `kind` field is not set, or set to `Issuer`, an Issuer resource with the given name in the same namespace as the Certificate will be used. If the `kind` field is set to `ClusterIssuer`, a ClusterIssuer with the provided name will be used. The `name` field in this stanza is required at all times.
                  type: object
                  required:
                    - name
                  properties:
                    group:
                      description: Group of the resource being referred to.
                      type: string
                    kind:
                      description: Kind of the resource being referred to.
                      type: string
                    name:
                      description: Name of the resource being referred to.
                      type: string
                keystores:
                  description: Keystores configures additional keystore output formats stored in the `secretName` Secret resource.
                  type: object
                  properties:
                    jks:
                      description: JKS configures options for storing a JKS keystore in the `spec.secretName` Secret resource.
                      type: object
                      required:
                        - create
                        - passwordSecretRef
                      properties:
                        create:
                          description: Create enables JKS keystore creation for the Certificate. If true, a file named `keystore.jks` will be created in the target Secret resource, encrypted using the password stored in `passwordSecretRef`. The keystore file will be updated immediately. A file named `truststore.jks` will also be created in the target Secret resource, encrypted using the password stored in `passwordSecretRef` containing the issuing Certificate Authority
                          type: boolean
                        passwordSecretRef:
                          description: PasswordSecretRef is a reference to a key in a Secret resource containing the password used to encrypt the JKS keystore.
                          type: object
                          required:
                            - name
                          properties:
                            key:
                              description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                              type: string
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                    pkcs12:
                      description: PKCS12 configures options for storing a PKCS12 keystore in the `spec.secretName` Secret resource.
                      type: object
                      required:
                        - create
                        - passwordSecretRef
                      properties:
                        create:
                          description: Create enables PKCS12 keystore creation for the Certificate. If true, a file named `keystore.p12` will be created in the target Secret resource, encrypted using the password stored in `passwordSecretRef`. The keystore file will be updated immediately. A file named `truststore.p12` will also be created in the target Secret resource, encrypted using the password stored in `passwordSecretRef` containing the issuing Certificate Authority
                          type: boolean
                        passwordSecretRef:
                          description: PasswordSecretRef is a reference to a key in a Secret resource containing the password used to encrypt the PKCS12 keystore.
                          type: object
                          required:
                            - name
                          properties:
                            key:
                              description: The key of the entry in the Secret resource's `data` field to be used. Some instances of this field may be defaulted, in others it may be required.
                              type: string
                            name:
                              description: 'Name of the resource being referred to. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                literalSubject:
                  description: LiteralSubject is an LDAP formatted string that represents the [X.509 Subject field](https://datatracker.ietf.org/doc/html/rfc5280#section-4.1.2.6). Use this *instead* of the Subject field if you need to ensure the correct ordering of the RDN sequence, such as when issuing certs for LDAP authentication. See https://github.com/cert-manager/cert-manager/issues/3203, https://github.com/cert-manager/cert-manager/issues/4424. This field is alpha level and is only supported by cert-manager installations where LiteralCertificateSubject feature gate is enabled on both cert-manager controller and webhook.
                  type: string
                privateKey:
                  description: Options to control private keys used for the Certificate.
                  type: object
                  properties:
                    algorithm:
                      description: Algorithm is the private key algorithm of the corresponding private key for this certificate. If provided, allowed values are either `RSA`,`Ed25519` or `ECDSA` If `algorithm` is specified and `size` is not provided, key size of 256 will be used for `ECDSA` key algorithm and key size of 2048 will be used for `RSA` key algorithm. key size is ignored when using the `Ed25519` key algorithm.
                      type: string
                      enum:
                        - RSA
                        - ECDSA
                        - Ed25519
                    encoding:
                      description: The private key cryptography standards (PKCS) encoding for this certificate's private key to be encoded in. If provided, allowed values are `PKCS1` and `PKCS8` standing for PKCS#1 and PKCS#8, respectively. Defaults to `PKCS1` if not specified.
                      type: string
                      enum:
                        - PKCS1
                        - PKCS8
                    rotationPolicy:
                      description: RotationPolicy controls how private keys should be regenerated when a re-issuance is being processed. If set to Never, a private key will only be generated if one does not already exist in the target `spec.secretName`. If one does exists but it does not have the correct algorithm or size, a warning will be raised to await user intervention. If set to Always, a private key matching the specified requirements will be generated whenever a re-issuance occurs. Default is 'Never' for backward compatibility.
                      type: string
                      enum:
                        - Never
                        - Always
                    size:
                      description: Size is the key bit size of the corresponding private key for this certificate. If `algorithm` is set to `RSA`, valid values are `2048`, `4096` or `8192`, and will default to `2048` if not specified. If `algorithm` is set to `ECDSA`, valid values are `256`, `384` or `521`, and will default to `256` if not specified. If `algorithm` is set to `Ed25519`, Size is ignored. No other values are allowed.
                      type: integer
                renewBefore:
                  description: How long before the currently issued certificate's expiry cert-manager should renew the certificate. The default is 2/3 of the issued certificate's duration. Minimum accepted value is 5 minutes. Value must be in units accepted by Go time.ParseDuration https://golang.org/pkg/time/#ParseDuration
                  type: string
                revisionHistoryLimit:
                  description: revisionHistoryLimit is the maximum number of CertificateRequest revisions that are maintained in the Certificate's history. Each revision represents a single `CertificateRequest` created by this Certificate, either when it was created, renewed, or Spec was changed. Revisions will be removed by oldest first if the number of revisions exceeds this number. If set, revisionHistoryLimit must be a value of `1` or greater. If unset (`nil`), revisions will not be garbage collected. Default value is `nil`.
                  type: integer
                  format: int32
                secretName:
                  description: SecretName is the name of the secret resource that will be automatically created and managed by this Certificate resource. It will be populated with a private key and certificate, signed by the denoted issuer.
                  type: string
                secretTemplate:
                  description: SecretTemplate defines annotations and labels to be copied to the Certificate's Secret. Labels and annotations on the Secret will be changed as they appear on the SecretTemplate when added or removed. SecretTemplate annotations are added in conjunction with, and cannot overwrite, the base set of annotations cert-manager sets on the Certificate's Secret.
                  type: object
                  properties:
                    annotations:
                      description: Annotations is a key value map to be copied to the target Kubernetes Secret.
                      type: object
                      additionalProperties:
                        type: string
                    labels:
                      description: Labels is a key value map to be copied to the target Kubernetes Secret.
                      type: object
                      additionalProperties:
                        type: string
                subject:
                  description: Full X509 name specification (https://golang.org/pkg/crypto/x509/pkix/#Name).
                  type: object
                  properties:
                    countries:
                      description: Countries to be used on the Certificate.
                      type: array
                      items:
                        type: string
                    localities:
                      description: Cities to be used on the Certificate.
                      type: array
                      items:
                        type: string
                    organizationalUnits:
                      description: Organizational Units to be used on the Certificate.
                      type: array
                      items:
                        type: string
                    organizations:
                      description: Organizations to be used on the Certificate.
                      type: array
                      items:
                        type: string
                    postalCodes:
                      description: Postal codes to be used on the Certificate.
                      type: array
                      items:
                        type: string
                    provinces:
                      description: State/Provinces to be used on the Certificate.
                      type: array
                      items:
                        type: string
                    serialNumber:
                      description: Serial number to be used on the Certificate.
                      type: string
                    streetAddresses:
                      description: Street addresses to be used on the Certificate.
                      type: array
                      items:
                        type: string
                uris:
                  description: URIs is a list of URI subjectAltNames to be set on the Certificate.
                  type: array
                  items:
                    type: string
                usages:
                  description: Usages is the set of x509 usages that are requested for the certificate. Defaults to `digital signature` and `key encipherment` if not specified.
                  type: array
                  items:
                    description: "KeyUsage specifies valid usage contexts for keys. See: https://tools.ietf.org/html/rfc5280#section-4.2.1.3 https://tools.ietf.org/html/rfc5280#section-4.2.1.12 \n Valid KeyUsage values are as follows: \"signing\", \"digital signature\", \"content commitment\", \"key encipherment\", \"key agreement\", \"data encipherment\", \"cert sign\", \"crl sign\", \"encipher only\", \"decipher only\", \"any\", \"server auth\", \"client auth\", \"code signing\", \"email protection\", \"s/mime\", \"ipsec end system\", \"ipsec tunnel\", \"ipsec user\", \"timestamping\", \"ocsp signing\", \"microsoft sgc\", \"netscape sgc\""
                    type: string
                    enum:
                      - signing
                      - digital signature
                      - content commitment
                      - key encipherment
                      - key agreement
                      - data encipherment
                      - cert sign
                      - crl sign
                      - encipher only
                      - decipher only
                      - any
                      - server auth
                      - client auth
                      - code signing
                      - email protection
                      - s/mime
                      - ipsec end system
                      - ipsec tunnel
                      - ipsec user
                      - timestamping
                      - ocsp signing
                      - microsoft sgc
                      - netscape sgc
            status:
              description: Status of the Certificate. This is set and managed automatically.
              type: object
              properties:
                conditions:
                  description: List of status conditions to indicate the status of certificates. Known condition types are `Ready` and `Issuing`.
                  type: array
                  items:
                    description: CertificateCondition contains condition information for an Certificate.
                    type: object
                    required:
                      - status
                      - type
                    properties:
                      lastTransitionTime:
                        description: LastTransitionTime is the timestamp corresponding to the last status change of this condition.
                        type: string
                        format: date-time
                      message:
                        description: Message is a human readable description of the details of the last transition, complementing reason.
                        type: string
                      observedGeneration:
                        description: If set, this represents the .metadata.generation that the condition was set based upon. For instance, if .metadata.generation is currently 12, but the .status.condition[x].observedGeneration is 9, the condition is out of date with respect to the current state of the Certificate.
                        type: integer
                        format: int64
                      reason:
                        description: Reason is a brief machine readable explanation for the condition's last transition.
                        type: string
                      status:
                        description: Status of the condition, one of (`True`, `False`, `Unknown`).
                        type: string
                        enum:
                          - "True"
                          - "False"
                          - Unknown
                      type:
                        description: Type of the condition, known values are (`Ready`, `Issuing`).
                        type: string
                  x-kubernetes-list-map-keys:
                    - type
                  x-kubernetes-list-type: map
                failedIssuanceAttempts:
                  description: The number of continuous failed issuance attempts up till now. This field gets removed (if set) on a successful issuance and gets set to 1 if unset and an issuance has failed. If an issuance has failed, the delay till the next issuance will be calculated using formula time.Hour * 2 ^ (failedIssuanceAttempts - 1).
                  type: integer
                lastFailureTime:
                  description: LastFailureTime is the time as recorded by the Certificate controller of the most recent failure to complete a CertificateRequest for this Certificate resource. If set, cert-manager will not re-request another Certificate until 1 hour has elapsed from this time.
                  type: string
                  format: date-time
                nextPrivateKeySecretName:
                  description: The name of the Secret resource containing the private key to be used for the next certificate iteration. The keymanager controller will automatically set this field if the `Issuing` condition is set to `True`. It will automatically unset this field when the Issuing condition is not set or False.
                  type: string
                notAfter:
                  description: The expiration time of the certificate stored in the secret named by this resource in `spec.secretName`.
                  type: string
                  format: date-time
                notBefore:
                  description: The time after which the certificate stored in the secret named by this resource in spec.secretName is valid.
                  type: string
                  format: date-time
                renewalTime:
                  description: RenewalTime is the time at which the certificate will be next renewed. If not set, no upcoming renewal is scheduled.
                  type: string
                  format: date-time
                revision:
                  description: "The current 'revision' of the certificate as issued. \n When a CertificateRequest resource is created, it will have the `cert-manager.io/certificate-revision` set to one greater than the current value of this field. \n Upon issuance, this field will be set to the value of the annotation on the CertificateRequest resource used to issue the certificate. \n Persisting the value on the CertificateRequest resource allows the certificates controller to know whether a request is part of an old issuance or if it is part of the ongoing revision's issuance by checking if the revision value in the annotation is greater than this field."
                  type: integer
      served: true
      storage: true
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/crds.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: orders.acme.cert-manager.io
  labels:
    app: 'cert-manager'
    app.kubernetes.io/name: 'cert-manager'
    app.kubernetes.io/instance: 'canvas'
    # Generated labels
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  group: acme.cert-manager.io
  names:
    kind: Order
    listKind: OrderList
    plural: orders
    singular: order
    categories:
      - cert-manager
      - cert-manager-acme
  scope: Namespaced
  versions:
    - name: v1
      subresources:
        status: {}
      additionalPrinterColumns:
        - jsonPath: .status.state
          name: State
          type: string
        - jsonPath: .spec.issuerRef.name
          name: Issuer
          priority: 1
          type: string
        - jsonPath: .status.reason
          name: Reason
          priority: 1
          type: string
        - jsonPath: .metadata.creationTimestamp
          description: CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          name: Age
          type: date
      schema:
        openAPIV3Schema:
          description: Order is a type to represent an Order with an ACME server
          type: object
          required:
            - metadata
            - spec
          properties:
            apiVersion:
              description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
              type: string
            kind:
              description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
              type: string
            metadata:
              type: object
            spec:
              type: object
              required:
                - issuerRef
                - request
              properties:
                commonName:
                  description: CommonName is the common name as specified on the DER encoded CSR. If specified, this value must also be present in `dnsNames` or `ipAddresses`. This field must match the corresponding field on the DER encoded CSR.
                  type: string
                dnsNames:
                  description: DNSNames is a list of DNS names that should be included as part of the Order validation process. This field must match the corresponding field on the DER encoded CSR.
                  type: array
                  items:
                    type: string
                duration:
                  description: Duration is the duration for the not after date for the requested certificate. this is set on order creation as pe the ACME spec.
                  type: string
                ipAddresses:
                  description: IPAddresses is a list of IP addresses that should be included as part of the Order validation process. This field must match the corresponding field on the DER encoded CSR.
                  type: array
                  items:
                    type: string
                issuerRef:
                  description: IssuerRef references a properly configured ACME-type Issuer which should be used to create this Order. If the Issuer does not exist, processing will be retried. If the Issuer is not an 'ACME' Issuer, an error will be returned and the Order will be marked as failed.
                  type: object
                  required:
                    - name
                  properties:
                    group:
                      description: Group of the resource being referred to.
                      type: string
                    kind:
                      description: Kind of the resource being referred to.
                      type: string
                    name:
                      description: Name of the resource being referred to.
                      type: string
                request:
                  description: Certificate signing request bytes in DER encoding. This will be used when finalizing the order. This field must be set on the order.
                  type: string
                  format: byte
            status:
              type: object
              properties:
                authorizations:
                  description: Authorizations contains data returned from the ACME server on what authorizations must be completed in order to validate the DNS names specified on the Order.
                  type: array
                  items:
                    description: ACMEAuthorization contains data returned from the ACME server on an authorization that must be completed in order validate a DNS name on an ACME Order resource.
                    type: object
                    required:
                      - url
                    properties:
                      challenges:
                        description: Challenges specifies the challenge types offered by the ACME server. One of these challenge types will be selected when validating the DNS name and an appropriate Challenge resource will be created to perform the ACME challenge process.
                        type: array
                        items:
                          description: Challenge specifies a challenge offered by the ACME server for an Order. An appropriate Challenge resource can be created to perform the ACME challenge process.
                          type: object
                          required:
                            - token
                            - type
                            - url
                          properties:
                            token:
                              description: Token is the token that must be presented for this challenge. This is used to compute the 'key' that must also be presented.
                              type: string
                            type:
                              description: Type is the type of challenge being offered, e.g. 'http-01', 'dns-01', 'tls-sni-01', etc. This is the raw value retrieved from the ACME server. Only 'http-01' and 'dns-01' are supported by cert-manager, other values will be ignored.
                              type: string
                            url:
                              description: URL is the URL of this challenge. It can be used to retrieve additional metadata about the Challenge from the ACME server.
                              type: string
                      identifier:
                        description: Identifier is the DNS name to be validated as part of this authorization
                        type: string
                      initialState:
                        description: InitialState is the initial state of the ACME authorization when first fetched from the ACME server. If an Authorization is already 'valid', the Order controller will not create a Challenge resource for the authorization. This will occur when working with an ACME server that enables 'authz reuse' (such as Let's Encrypt's production endpoint). If not set and 'identifier' is set, the state is assumed to be pending and a Challenge will be created.
                        type: string
                        enum:
                          - valid
                          - ready
                          - pending
                          - processing
                          - invalid
                          - expired
                          - errored
                      url:
                        description: URL is the URL of the Authorization that must be completed
                        type: string
                      wildcard:
                        description: Wildcard will be true if this authorization is for a wildcard DNS name. If this is true, the identifier will be the *non-wildcard* version of the DNS name. For example, if '*.example.com' is the DNS name being validated, this field will be 'true' and the 'identifier' field will be 'example.com'.
                        type: boolean
                certificate:
                  description: Certificate is a copy of the PEM encoded certificate for this Order. This field will be populated after the order has been successfully finalized with the ACME server, and the order has transitioned to the 'valid' state.
                  type: string
                  format: byte
                failureTime:
                  description: FailureTime stores the time that this order failed. This is used to influence garbage collection and back-off.
                  type: string
                  format: date-time
                finalizeURL:
                  description: FinalizeURL of the Order. This is used to obtain certificates for this order once it has been completed.
                  type: string
                reason:
                  description: Reason optionally provides more information about a why the order is in the current state.
                  type: string
                state:
                  description: State contains the current state of this Order resource. States 'success' and 'expired' are 'final'
                  type: string
                  enum:
                    - valid
                    - ready
                    - pending
                    - processing
                    - invalid
                    - expired
                    - errored
                url:
                  description: URL of the Order. This will initially be empty when the resource is first created. The Order controller will populate this field when the Order is first processed. This field will be immutable after it is initially set.
                  type: string
      served: true
      storage: true
---
# Source: canvas-oda/charts/oda-crds/templates/oda-availabilitypolicy-crd.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: availabilitypolicies.availability.oda.tmforum.org
spec:
  group: availability.oda.tmforum.org
  names:
    categories:
    - oda-canvas
    kind: AvailabilityPolicy
    listKind: AvailabilityPolicyList
    plural: availabilitypolicies
    shortNames:
    - apol
    singular: availabilitypolicy
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.availabilityClass
      name: Availability Class
      type: string
    - jsonPath: .spec.enforcement
      name: Enforcement
      type: string
    - jsonPath: .spec.priority
      name: Priority
      type: integer
    - jsonPath: .status.appliedToComponents[*]
      name: Components
      type: integer
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: AvailabilityPolicy is the Schema for the availabilitypolicies
          API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: AvailabilityPolicySpec defines the desired state of AvailabilityPolicy
            properties:
              allowOverride:
                default: true
                description: AllowOverride allows annotations to override when true
                  (only for advisory mode)
                type: boolean
              availabilityClass:
                description: AvailabilityClass defines the level of availability required
                enum:
                - non-critical
                - standard
                - high-availability
                - mission-critical
                - custom
                type: string
              componentSelector:
                description: ComponentSelector defines which components this policy
                  applies to
                properties:
                  componentFunctions:
                    description: ComponentFunctions specifies component functions
                      to match
                    items:
                      description: ComponentFunction defines the function of the component
                        within ODA Canvas
                      enum:
                      - core
                      - management
                      - security
                      type: string
                    type: array
                  componentNames:
                    description: ComponentNames specifies explicit component names
                    items:
                      type: string
                    type: array
                  matchExpressions:
                    description: MatchExpressions selects components using label expressions
                    items:
                      description: |-
                        A label selector requirement is a selector that contains values, a key, and an operator that
                        relates the key and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: |-
                            operator represents a key's relationship to a set of values.
                            Valid operators are In, NotIn, Exists and DoesNotExist.
                          type: string
                        values:
                          description: |-
                            values is an array of string values. If the operator is In or NotIn,
                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                            the values array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                          x-kubernetes-list-type: atomic
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: MatchLabels selects components with matching labels
                    type: object
                  namespaces:
                    description: Namespaces specifies which namespaces to watch (empty
                      means all)
                    items:
                      type: string
                    type: array
                type: object
              customPDBConfig:
                description: CustomPDBConfig allows custom PDB configuration when
                  AvailabilityClass is "custom"
                properties:
                  maxUnavailable:
                    anyOf:
                    - type: integer
                    - type: string
                    description: MaxUnavailable specifies the maximum number of pods
                      that can be unavailable
                    x-kubernetes-int-or-string: true
                  minAvailable:
                    anyOf:
                    - type: integer
                    - type: string
                    description: MinAvailable specifies the minimum number of pods
                      that must be available
                    x-kubernetes-int-or-string: true
                  unhealthyPodEvictionPolicy:
                    default: IfHealthyBudget
                    description: UnhealthyPodEvictionPolicy defines how to deal with
                      unhealthy pods
                    enum:
                    - IfHealthyBudget
                    - AlwaysAllow
                    type: string
                type: object
              enforceMinReplicas:
                default: true
                description: EnforceMinReplicas ensures deployments have minimum replicas
                  for PDB to be effective
                type: boolean
              enforcement:
                default: advisory
                description: Enforcement defines how strictly this policy is enforced
                enum:
                - strict
                - flexible
                - advisory
                type: string
              maintenanceWindows:
                description: MaintenanceWindows defines when disruptions are allowed
                items:
                  description: MaintenanceWindow defines a time window when disruptions
                    are allowed
                  properties:
                    daysOfWeek:
                      description: Days of week when maintenance window applies (0=Sunday,
                        6=Saturday)
                      items:
                        type: integer
                      type: array
                    end:
                      description: End time in HH:MM format
                      pattern: ^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$
                      type: string
                    start:
                      description: Start time in HH:MM format
                      pattern: ^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$
                      type: string
                    timezone:
                      default: UTC
                      description: Timezone (defaults to UTC)
                      type: string
                  required:
                  - end
                  - start
                  type: object
                type: array
              minimumClass:
                description: MinimumClass defines the minimum availability class allowed
                  when enforcement is flexible
                enum:
                - non-critical
                - standard
                - high-availability
                - mission-critical
                - custom
                type: string
              overrideRequiresAnnotation:
                description: OverrideRequiresAnnotation specifies an annotation that
                  must be present to allow override
                type: string
              overrideRequiresReason:
                default: false
                description: OverrideRequiresReason requires a reason annotation when
                  overriding
                type: boolean
              priority:
                default: 0
                description: Priority defines the priority of this policy (higher
                  number = higher priority)
                format: int32
                type: integer
            required:
            - availabilityClass
            - componentSelector
            type: object
          status:
            description: AvailabilityPolicyStatus defines the observed state of AvailabilityPolicy
            properties:
              appliedToComponents:
                description: AppliedToComponents lists the components this policy
                  is currently applied to
                items:
                  type: string
                type: array
              conditions:
                description: Conditions represent the latest available observations
                  of the policy's current state
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              lastAppliedTime:
                description: LastAppliedTime indicates when this policy was last successfully
                  applied
                format: date-time
                type: string
              observedGeneration:
                description: ObservedGeneration reflects the generation of the most
                  recently observed AvailabilityPolicy
                format: int64
                type: integer
              pdbsManaged:
                description: PDBsManaged lists the PDBs currently managed by this
                  policy
                items:
                  type: string
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: canvas-oda/charts/oda-crds/templates/oda-component-crd.yaml
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  name: "components.oda.tmforum.org"
  annotations:
    cert-manager.io/inject-ca-from:  canvas/compcrdwebhook
spec:
  scope: "Namespaced"
  group: "oda.tmforum.org"
  names:
    plural: "components"
    singular: "component"
    kind: "Component"
  conversion:
    strategy: Webhook
    # webhookClientConfig is required when strategy is `Webhook` and it configures the webhook endpoint to be called by API server.
    webhook:
      conversionReviewVersions: ["v1", "v1beta4", "v1beta3", "v1beta2"]
      clientConfig:
        service:
          namespace: canvas
          name: compcrdwebhook
          path: /
          port: 443
  versions:
  - name: "v1beta2"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    deprecated: true
    deprecationWarning: "oda.tmforum.org/v1beta2 Component is deprecated. Please upgrade to oda.tmforum.org/v1 or newer"
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              id:
                type: string
                description: This is the id of functional component and must refer to the id of a TM Forum published golden component.
                example: TMFC001
              name:
                type: string
                description: This is the name of functional component and must refer to the name of a TM Forum published golden component.
                example: ProductCatalogManagement
              version:
                type: string
                description: This is the version of the component (it is specific to the vendor of this component and not the type).
              description:
                type: string
                description: This is a short description of the component's purpose.
              functionalBlock:   
                type: string
                description: This is the functional block of the component with the Open Digital Architecture.
                example: CoreCommerce 
              publicationDate:
                type: string
                format: date-time
                description: This is the date that the golden component was published.
              status:
                type: string
                description: This is the status of the golden component.
              maintainers:
                type: array
                description: Maintainers is an optional list of maintainers of
                  the component. The maintainers in this list maintain the the
                  source code, images, and package for the component.
                items:
                  description: ContactData contains information about an individual or organization.
                  type: object
                  properties:
                    email:
                      description: Email is the email address.
                      type: string
                    name:
                      description: Name is the descriptive name.
                      type: string
                    url:
                      description: Website address of maintaining organization.
                      type: string
              owners:
                type: array
                description: Owners is an optional list of the owners of the installed component.
                items:
                  type: object
                  description: ContactData contains information about an individual or organization.
                  properties:
                    email:
                      description: Email is the email address.
                      type: string
                    name:
                      description: Name is the descriptive name.
                      type: string
                    url:
                      description: Website address of owning organization.
                      type: string
              coreFunction:
                type: object
                properties:
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        specification:
                          type: string
                          format: url
                          description: url to the specification of the API, if required. e.g. url to the swagger file for Open API.
                        apitype:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus (metrics) APIs are supported.
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apitype
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        specification:
                          type: string
                          format: url
                          description: url to the specification of the API. e.g. url to the swagger file
                        apitype:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus (metrics) APIs are supported.
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apitype
              eventNotification:
                type: object
                properties:
                  publishedEvents:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        href:
                          type: string
                  subscribedEvents:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        href:
                          type: string
              managementFunction:
                type: object
                properties:
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        specification:
                          type: string
                          format: url
                          description: url to the specification of the API. e.g. url to the swagger file
                        apitype:
                          type: string
                          enum:
                          - openapi
                          - prometheus
                          description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus (metrics) APIs are supported.
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apitype
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        specification:
                          type: string
                          format: url
                          description: url to the specification of the API. e.g. url to the swagger file
                        apitype:
                          type: string
                          enum:
                          - openapi
                          - prometheus
                          description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus APIs are supported.
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apitype
              securityFunction:
                type: object
                x-kubernetes-preserve-unknown-fields: true
                properties:
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        specification:
                          type: string
                          format: url
                          description: url to the specification of the API. e.g. url to the swagger file
                        apitype:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus APIs are supported.
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apitype
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        specification:
                          type: string
                          format: url
                          description: url to the specification of the API. e.g. url to the swagger file
                        apitype:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus APIs are supported.
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apitype
                  controllerRole:
                    description: This is the name of the role that the Canvas controllers will use to interact with the component's APIs.
                      It must exist in the roles exposed by the permissionSpecificationSet API.
                    type: string
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: deployment_status
      type: string
      description: Deployment status [in progress, complete, failed]
      jsonPath: .status.summary/status.deployment_status
  - name: "v1beta3"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              id:
                type: string
                description: This is the id of functional component and must refer to the id of a TM Forum published golden component.
                example: TMFC001
              name:
                type: string
                description: This is the name of functional component and must refer to the name of a TM Forum published golden component.
                example: ProductCatalogManagement
              version:
                type: string
                description: This is the version of the component (it is specific to the vendor of this component and not the type).
              description:
                type: string
                description: This is a short description of the component's purpose.
              functionalBlock:   
                type: string
                description: This is the functional block of the component with the Open Digital Architecture.
                example: CoreCommerce 
              publicationDate:
                type: string
                format: date-time
                description: This is the date that the golden component was published.
              status:
                type: string
                description: This is the status of the golden component.
              maintainers:
                type: array
                description: Maintainers is an optional list of maintainers of
                  the component. The maintainers in this list maintain the the
                  source code, images, and package for the component.
                items:
                  description: ContactData contains information about an individual or organization.
                  type: object
                  properties:
                    email:
                      description: Email is the email address.
                      type: string
                    name:
                      description: Name is the descriptive name.
                      type: string
                    url:
                      description: Website address of maintaining organization.
                      type: string
              owners:
                type: array
                description: Owners is an optional list of the owners of the installed component.
                items:
                  type: object
                  description: ContactData contains information about an individual or organization.
                  properties:
                    email:
                      description: Email is the email address.
                      type: string
                    name:
                      description: Name is the descriptive name.
                      type: string
                    url:
                      description: Website address of owning organization.
                      type: string
              coreFunction:
                type: object
                properties:
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        specification:  
                          type: array
                          items:
                            type: string
                            format: url
                          description: >
                            url to the specification of the API, if required. e.g. url to the swagger file for Open API.
                            This is an array of strings to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        apiKeyVerification:
                          type: object
                          description: "(optional) API key verification settings"
                          properties:
                            enabled:
                              type: boolean
                              description: "(default: false) Enforce API key verification"
                            location:
                              type: string
                              description: "(optional) Variable name for API key location"
                        rateLimit:
                          type: object
                          description: "(optional) Rate limiting configuration"
                          properties:
                            enabled:
                              type: boolean
                              description: "(default: false)"
                            identifier:
                              type: string
                              description: "Identifier for rate-limiting"
                            limit:
                              type: string
                              description: "Limit of requests per identifier"
                            interval:
                              type: string
                              description: "(default: ps) Interval for rate limit"
                        quota:
                          type: object
                          description: "(optional) Quota configuration"
                          properties:
                            identifier:
                              type: string
                              description: "Identifier for quota counter"
                            limit:
                              type: string
                              description: "Quota counter limit"
                        OASValidation:
                          type: object
                          description: "(optional) OpenAPI Specification validation"
                          properties:
                            requestEnabled:
                              type: boolean
                              description: "(default: false) Enable request validation"
                            responseEnabled:
                              type: boolean
                              description: "(default: false) Enable response validation"
                            allowUnspecifiedHeaders:
                              type: boolean
                              description: "(default: false) Allow unspecified headers"
                            allowUnspecifiedQueryParams:
                              type: boolean
                              description: "(default: false) Allow unspecified query parameters"
                            allowUnspecifiedCookies:
                              type: boolean
                              description: "(default: false) Allow unspecified cookies"
                        CORS:
                          type: object
                          description: "(optional) Cross-origin Resource Sharing configuration"
                          properties:
                            enabled:
                              type: boolean
                              description: "(default: false)"
                            allowCredentials:
                              type: boolean
                              description: "(default: false) Enable credentials for cross-origin requests"
                            allowOrigins:
                              type: string
                              description: "(default: *) Allowed origins (CSV)"
                            handlePreflightRequests:
                              type: object
                              description: "(optional) Preflight request configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: true)"
                                allowHeaders:
                                  type: string
                                  description: "(default: Origin, Accept, X-Requested-With, etc.)"
                                allowMethods:
                                  type: string
                                  description: "(default: GET, POST, etc.)"
                                maxAge:
                                  type: integer
                                  description: "(default: 1800) Cache duration for CORS preflight requests"
                        template:
                          type: string
                          description: "(optional) Pre-configured template for the API"
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        specification:
                          type: string
                          format: url
                          description: url to the specification of the API. e.g. url to the swagger file
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
              eventNotification:
                type: object
                properties:
                  publishedEvents:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the Topic that this Component is going to push events into
                        description:
                          type: string
                          description: (Optional) Description
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) APIs is supported.
                        specification:
                          type: string
                          format: url
                          description: (optional) url to the specification of the API. e.g. url to the swagger file
                        implementation:
                          type: string
                          description: The name of the service receiving the notifications
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        hub:
                          type: string
                          description: The path to the root of the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                  subscribedEvents:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the Topic that this Component is interested in listening to
                        description:
                          type: string
                          description: (Optional) Description
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) APIs is supported.
                        specification:
                          type: string
                          format: url
                          description: (optional) url to the specification of the API. e.g. url to the swagger file
                        implementation:
                          type: string
                          description: The name of the service receiving the notifications
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        callback:
                          type: string
                          description: The path to the callback endpoint
                        port:
                          type: integer
                          description: The port to which the callback listens to
                        query:
                          type: string
                          description: (optional) Filter the events that will be sent to callback endpoint
              managementFunction:
                type: object
                properties:
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        specification:
                          type: array
                          items:
                            type: string
                            format: url
                          description: >
                            url to the specification of the API, if required. e.g. url to the swagger file for Open API.
                            This is an array of strings to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - prometheus
                          description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus (metrics) APIs are supported.
                        apiKeyVerification:
                          type: object
                          description: "(optional) API key verification settings"
                          properties:
                            enabled:
                              type: boolean
                              description: "(default: false) Enforce API key verification"
                            location:
                              type: string
                              description: "(optional) Variable name for API key location"
                        rateLimit:
                          type: object
                          description: "(optional) Rate limiting configuration"
                          properties:
                            enabled:
                              type: boolean
                              description: "(default: false)"
                            identifier:
                              type: string
                              description: "Identifier for rate-limiting"
                            limit:
                              type: string
                              description: "Limit of requests per identifier"
                            interval:
                              type: string
                              description: "(default: ps) Interval for rate limit"
                        quota:
                          type: object
                          description: "(optional) Quota configuration"
                          properties:
                            identifier:
                              type: string
                              description: "Identifier for quota counter"
                            limit:
                              type: string
                              description: "Quota counter limit"
                        OASValidation:
                          type: object
                          description: "(optional) OpenAPI Specification validation"
                          properties:
                            requestEnabled:
                              type: boolean
                              description: "(default: false) Enable request validation"
                            responseEnabled:
                              type: boolean
                              description: "(default: false) Enable response validation"
                            allowUnspecifiedHeaders:
                              type: boolean
                              description: "(default: false) Allow unspecified headers"
                            allowUnspecifiedQueryParams:
                              type: boolean
                              description: "(default: false) Allow unspecified query parameters"
                            allowUnspecifiedCookies:
                              type: boolean
                              description: "(default: false) Allow unspecified cookies"
                        CORS:
                          type: object
                          description: "(optional) Cross-origin Resource Sharing configuration"
                          properties:
                            enabled:
                              type: boolean
                              description: "(default: false)"
                            allowCredentials:
                              type: boolean
                              description: "(default: false) Enable credentials for cross-origin requests"
                            allowOrigins:
                              type: string
                              description: "(default: *) Allowed origins (CSV)"
                            handlePreflightRequests:
                              type: object
                              description: "(optional) Preflight request configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: true)"
                                allowHeaders:
                                  type: string
                                  description: "(default: Origin, Accept, X-Requested-With, etc.)"
                                allowMethods:
                                  type: string
                                  description: "(default: GET, POST, etc.)"
                                maxAge:
                                  type: integer
                                  description: "(default: 1800) Cache duration for CORS preflight requests"
                        template:
                          type: string
                          description: "(optional) Pre-configured template for the API"
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        specification:
                          type: string
                          format: url
                          description: url to the specification of the API. e.g. url to the swagger file
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
              securityFunction:
                type: object
                x-kubernetes-preserve-unknown-fields: true
                properties:
                  secretsManagement:
                    description: optional, request access to secrets stored exclusively for this component.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                    required: ["type", "podSelector"]
                    properties:
                      type:
                        type: string
                        enum: ["sideCar"]
                        description: defines, how components access the secrets, currently only sideCar is supported
                      sideCar:
                        type: object
                        description: sideCar parameters, required if type has value "sideCar"
                        required: ["port"]
                        properties:
                          port:
                            type: integer
                            description: The port where the API is exposed in the sideCar (localhost:<port>)
                      podSelector:
                        type: object
                        description: defines, which PODs are allowed to access the secrets (and logic)
                        properties:
                          namespace:
                            type: string
                            description: glob patter matching the namespace of the POD
                          name:
                            type: string
                            description: glob patter matching the name of the POD
                          serviceaccount:
                            type: string
                            description: glob patter matching the serviceaccount od the POD
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        specification:
                          type: array
                          items:
                            type: string
                            format: url
                          description: >
                            url to the specification of the API, if required. e.g. url to the swagger file for Open API.
                            This is an array of strings to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        apiKeyVerification:
                          type: object
                          description: "(optional) API key verification settings"
                          properties:
                            enabled:
                              type: boolean
                              description: "(default: false) Enforce API key verification"
                            location:
                              type: string
                              description: "(optional) Variable name for API key location"
                        rateLimit:
                          type: object
                          description: "(optional) Rate limiting configuration"
                          properties:
                            enabled:
                              type: boolean
                              description: "(default: false)"
                            identifier:
                              type: string
                              description: "Identifier for rate-limiting"
                            limit:
                              type: string
                              description: "Limit of requests per identifier"
                            interval:
                              type: string
                              description: "(default: ps) Interval for rate limit"
                        quota:
                          type: object
                          description: "(optional) Quota configuration"
                          properties:
                            identifier:
                              type: string
                              description: "Identifier for quota counter"
                            limit:
                              type: string
                              description: "Quota counter limit"
                        OASValidation:
                          type: object
                          description: "(optional) OpenAPI Specification validation"
                          properties:
                            requestEnabled:
                              type: boolean
                              description: "(default: false) Enable request validation"
                            responseEnabled:
                              type: boolean
                              description: "(default: false) Enable response validation"
                            allowUnspecifiedHeaders:
                              type: boolean
                              description: "(default: false) Allow unspecified headers"
                            allowUnspecifiedQueryParams:
                              type: boolean
                              description: "(default: false) Allow unspecified query parameters"
                            allowUnspecifiedCookies:
                              type: boolean
                              description: "(default: false) Allow unspecified cookies"
                        CORS:
                          type: object
                          description: "(optional) Cross-origin Resource Sharing configuration"
                          properties:
                            enabled:
                              type: boolean
                              description: "(default: false)"
                            allowCredentials:
                              type: boolean
                              description: "(default: false) Enable credentials for cross-origin requests"
                            allowOrigins:
                              type: string
                              description: "(default: *) Allowed origins (CSV)"
                            handlePreflightRequests:
                              type: object
                              description: "(optional) Preflight request configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: true)"
                                allowHeaders:
                                  type: string
                                  description: "(default: Origin, Accept, X-Requested-With, etc.)"
                                allowMethods:
                                  type: string
                                  description: "(default: GET, POST, etc.)"
                                maxAge:
                                  type: integer
                                  description: "(default: 1800) Cache duration for CORS preflight requests"
                        template:
                          type: string
                          description: "(optional) Pre-configured template for the API"
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        specification:
                          type: string
                          format: url
                          description: url to the specification of the API. e.g. url to the swagger file
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                  controllerRole:
                    description: This is the name of the role that the Canvas controllers will use to interact with the component's APIs.
                      It must exist in the roles exposed by the partyRole API.
                    type: string
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: deployment_status
      type: string
      description: Deployment status [in progress, complete, failed]
      jsonPath: .status.summary/status.deployment_status
  - name: "v1beta4"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              componentMetadata:
                type: object
                properties:
                  id:
                    type: string
                    description: This is the id of functional component and must refer to the id of a TM Forum published golden component.
                    example: TMFC001
                  name:
                    type: string
                    description: This is the name of functional component and must refer to the name of a TM Forum published golden component.
                    example: ProductCatalogManagement
                  version:
                    type: string
                    description: This is the version of the component (it is specific to the vendor of this component and not the type).
                  description:
                    type: string
                    description: This is a short description of the component's purpose.
                  functionalBlock:   
                    type: string
                    description: This is the functional block of the component with the Open Digital Architecture.
                    example: CoreCommerce 
                  publicationDate:
                    type: string
                    format: date-time
                    description: This is the date that the golden component was published.
                  status:
                    type: string
                    description: This is the status of the golden component.
                  eTom:
                    type: array
                    description: This is the eTom mapping of the component with the Open Digital Architecture.
                    items:
                      type: string
                  SID:
                    type: array
                    description: This is the SID mapping of the component with the Open Digital Architecture.
                    items:
                      type: string
                  functionalFramework:
                    type: array
                    description: This is the functional framework of the component with the Open Digital Architecture.   
                    items:
                      type: string 
                  maintainers:
                    type: array
                    description: Maintainers is an optional list of maintainers of
                      the component. The maintainers in this list maintain the the
                      source code, images, and package for the component.
                    items:
                      description: ContactData contains information about an individual or organization.
                      type: object
                      properties:
                        email:
                          description: Email is the email address.
                          type: string
                        name:
                          description: Name is the descriptive name.
                          type: string
                        url:
                          description: Website address of maintaining organization.
                          type: string
                  owners:
                    type: array
                    description: Owners is an optional list of the owners of the installed component.
                    items:
                      type: object
                      description: ContactData contains information about an individual or organization.
                      properties:
                        email:
                          description: Email is the email address.
                          type: string
                        name:
                          description: Name is the descriptive name.
                          type: string
                        url:
                          description: Website address of owning organization.
                          type: string
              coreFunction:
                type: object
                properties:
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: This is the id of the API. For TM Forum Open-APIs this would be TMFxxx e.g. TMF620 for Product Catalog Management.                      
                        name:
                          type: string
                          description: Name of the API
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard
                        gatewayConfiguration:
                          type: object
                          description: Configuration settings for API Gateway
                          properties:
                            apiKeyVerification:
                              type: object
                              description: "(optional) API key verification settings"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false) Enforce API key verification"
                                location:
                                  type: string
                                  description: "(optional) Variable name for API key location"
                            rateLimit:
                              type: object
                              description: "(optional) Rate limiting configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                identifier:
                                  type: string
                                  description: "Identifier for rate-limiting"
                                limit:
                                  type: string
                                  description: "Limit of requests per identifier"
                                interval:
                                  type: string
                                  description: "(default: ps) Interval for rate limit"
                            quota:
                              type: object
                              description: "(optional) Quota configuration"
                              properties:
                                identifier:
                                  type: string
                                  description: "Identifier for quota counter"
                                limit:
                                  type: string
                                  description: "Quota counter limit"
                            OASValidation:
                              type: object
                              description: "(optional) OpenAPI Specification validation"
                              properties:
                                requestEnabled:
                                  type: boolean
                                  description: "(default: false) Enable request validation"
                                responseEnabled:
                                  type: boolean
                                  description: "(default: false) Enable response validation"
                                allowUnspecifiedHeaders:
                                  type: boolean
                                  description: "(default: false) Allow unspecified headers"
                                allowUnspecifiedQueryParams:
                                  type: boolean
                                  description: "(default: false) Allow unspecified query parameters"
                                allowUnspecifiedCookies:
                                  type: boolean
                                  description: "(default: false) Allow unspecified cookies"
                            CORS:
                              type: object
                              description: "(optional) Cross-origin Resource Sharing configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                allowCredentials:
                                  type: boolean
                                  description: "(default: false) Enable credentials for cross-origin requests"
                                allowOrigins:
                                  type: string
                                  description: "(default: *) Allowed origins (CSV)"
                                handlePreflightRequests:
                                  type: object
                                  description: "(optional) Preflight request configuration"
                                  properties:
                                    enabled:
                                      type: boolean
                                      description: "(default: true)"
                                    allowHeaders:
                                      type: string
                                      description: "(default: Origin, Accept, X-Requested-With, etc.)"
                                    allowMethods:
                                      type: string
                                      description: "(default: GET, POST, etc.)"
                                    maxAge:
                                      type: integer
                                      description: "(default: 1800) Cache duration for CORS preflight requests"
                            template:
                              type: string
                              description: "(optional) Pre-configured template for the API"
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
              eventNotification:
                type: object
                properties:
                  publishedEvents:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the Topic that this Component is going to push events into
                        description:
                          type: string
                          description: (Optional) Description
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) APIs is supported.
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        implementation:
                          type: string
                          description: The name of the service receiving the notifications
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        hub:
                          type: string
                          description: The path to the root of the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                  subscribedEvents:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the Topic that this Component is interested in listening to
                        description:
                          type: string
                          description: (Optional) Description
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) APIs is supported.
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        implementation:
                          type: string
                          description: The name of the service receiving the notifications
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        callback:
                          type: string
                          description: The path to the callback endpoint
                        port:
                          type: integer
                          description: The port to which the callback listens to
                        query:
                          type: string
                          description: (optional) Filter the events that will be sent to callback endpoint
              managementFunction:
                type: object
                properties:
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - prometheus
                          description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus (metrics) APIs are supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard                          
                        gatewayConfiguration:
                          type: object
                          description: Configuration settings for API Gateway
                          properties:
                            apiKeyVerification:
                              type: object
                              description: "(optional) API key verification settings"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false) Enforce API key verification"
                                location:
                                  type: string
                                  description: "(optional) Variable name for API key location"
                            rateLimit:
                              type: object
                              description: "(optional) Rate limiting configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                identifier:
                                  type: string
                                  description: "Identifier for rate-limiting"
                                limit:
                                  type: string
                                  description: "Limit of requests per identifier"
                                interval:
                                  type: string
                                  description: "(default: ps) Interval for rate limit"
                            quota:
                              type: object
                              description: "(optional) Quota configuration"
                              properties:
                                identifier:
                                  type: string
                                  description: "Identifier for quota counter"
                                limit:
                                  type: string
                                  description: "Quota counter limit"
                            OASValidation:
                              type: object
                              description: "(optional) OpenAPI Specification validation"
                              properties:
                                requestEnabled:
                                  type: boolean
                                  description: "(default: false) Enable request validation"
                                responseEnabled:
                                  type: boolean
                                  description: "(default: false) Enable response validation"
                                allowUnspecifiedHeaders:
                                  type: boolean
                                  description: "(default: false) Allow unspecified headers"
                                allowUnspecifiedQueryParams:
                                  type: boolean
                                  description: "(default: false) Allow unspecified query parameters"
                                allowUnspecifiedCookies:
                                  type: boolean
                                  description: "(default: false) Allow unspecified cookies"
                            CORS:
                              type: object
                              description: "(optional) Cross-origin Resource Sharing configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                allowCredentials:
                                  type: boolean
                                  description: "(default: false) Enable credentials for cross-origin requests"
                                allowOrigins:
                                  type: string
                                  description: "(default: *) Allowed origins (CSV)"
                                handlePreflightRequests:
                                  type: object
                                  description: "(optional) Preflight request configuration"
                                  properties:
                                    enabled:
                                      type: boolean
                                      description: "(default: true)"
                                    allowHeaders:
                                      type: string
                                      description: "(default: Origin, Accept, X-Requested-With, etc.)"
                                    allowMethods:
                                      type: string
                                      description: "(default: GET, POST, etc.)"
                                    maxAge:
                                      type: integer
                                      description: "(default: 1800) Cache duration for CORS preflight requests"
                            template:
                              type: string
                              description: "(optional) Pre-configured template for the API"
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard                          
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
              securityFunction:
                type: object
                properties:
                  secretsManagement:
                    description: optional, request access to secrets stored exclusively for this component.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                    required: ["type", "podSelector"]
                    properties:
                      type:
                        type: string
                        enum: ["sideCar"]
                        description: defines, how components access the secrets, currently only sideCar is supported
                      sideCar:
                        type: object
                        description: sideCar parameters, required if type has value "sideCar"
                        required: ["port"]
                        properties:
                          port:
                            type: integer
                            description: The port where the API is exposed in the sideCar (localhost:<port>)
                      podSelector:
                        type: object
                        description: defines, which PODs are allowed to access the secrets (and logic)
                        properties:
                          namespace:
                            type: string
                            description: glob patter matching the namespace of the POD
                          name:
                            type: string
                            description: glob patter matching the name of the POD
                          serviceaccount:
                            type: string
                            description: glob patter matching the serviceaccount od the POD
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard                          
                        gatewayConfiguration:
                          type: object
                          description: Configuration settings for API Gateway
                          properties:
                            apiKeyVerification:
                              type: object
                              description: "(optional) API key verification settings"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false) Enforce API key verification"
                                location:
                                  type: string
                                  description: "(optional) Variable name for API key location"
                            rateLimit:
                              type: object
                              description: "(optional) Rate limiting configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                identifier:
                                  type: string
                                  description: "Identifier for rate-limiting"
                                limit:
                                  type: string
                                  description: "Limit of requests per identifier"
                                interval:
                                  type: string
                                  description: "(default: ps) Interval for rate limit"
                            quota:
                              type: object
                              description: "(optional) Quota configuration"
                              properties:
                                identifier:
                                  type: string
                                  description: "Identifier for quota counter"
                                limit:
                                  type: string
                                  description: "Quota counter limit"
                            OASValidation:
                              type: object
                              description: "(optional) OpenAPI Specification validation"
                              properties:
                                requestEnabled:
                                  type: boolean
                                  description: "(default: false) Enable request validation"
                                responseEnabled:
                                  type: boolean
                                  description: "(default: false) Enable response validation"
                                allowUnspecifiedHeaders:
                                  type: boolean
                                  description: "(default: false) Allow unspecified headers"
                                allowUnspecifiedQueryParams:
                                  type: boolean
                                  description: "(default: false) Allow unspecified query parameters"
                                allowUnspecifiedCookies:
                                  type: boolean
                                  description: "(default: false) Allow unspecified cookies"
                            CORS:
                              type: object
                              description: "(optional) Cross-origin Resource Sharing configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                allowCredentials:
                                  type: boolean
                                  description: "(default: false) Enable credentials for cross-origin requests"
                                allowOrigins:
                                  type: string
                                  description: "(default: *) Allowed origins (CSV)"
                                handlePreflightRequests:
                                  type: object
                                  description: "(optional) Preflight request configuration"
                                  properties:
                                    enabled:
                                      type: boolean
                                      description: "(default: true)"
                                    allowHeaders:
                                      type: string
                                      description: "(default: Origin, Accept, X-Requested-With, etc.)"
                                    allowMethods:
                                      type: string
                                      description: "(default: GET, POST, etc.)"
                                    maxAge:
                                      type: integer
                                      description: "(default: 1800) Cache duration for CORS preflight requests"
                            template:
                              type: string
                              description: "(optional) Pre-configured template for the API"
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          description: The type of API specification. Currently only OpenAPI (swagger) is supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard                          
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                  canvasSystemRole:
                    description: This is the name of the role that the Canvas controllers will use to interact with the component's APIs.
                      It must exist in the roles exposed by the partyRole API.
                    type: string
                  componentRole:
                    description: This allows components to declare statically defined roles that should be configured in Identity Management solution. 
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        description:
                          type: string   
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: deployment_status
      type: string
      description: Deployment status [in progress, complete, failed]
      jsonPath: .status.summary/status.deployment_status
  - name: "v1"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: true
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              componentMetadata:
                type: object
                properties:
                  id:
                    type: string
                    description: This is the id of functional component and must refer to the id of a TM Forum published golden component.
                    example: TMFC001
                  name:
                    type: string
                    description: This is the name of functional component and must refer to the name of a TM Forum published golden component.
                    example: ProductCatalogManagement
                  version:
                    type: string
                    description: This is the version of the component (it is specific to the vendor of this component and not the type).
                  description:
                    type: string
                    description: This is a short description of the component's purpose.
                  functionalBlock:   
                    type: string
                    description: This is the functional block of the component with the Open Digital Architecture.
                    example: CoreCommerce 
                  publicationDate:
                    type: string
                    format: date-time
                    description: This is the date that the golden component was published.
                  status:
                    type: string
                    description: This is the status of the golden component.
                  eTom:
                    type: array
                    description: This is the eTom mapping of the component with the Open Digital Architecture.
                    items:
                      type: string
                  SID:
                    type: array
                    description: This is the SID mapping of the component with the Open Digital Architecture.
                    items:
                      type: string
                  functionalFramework:
                    type: array
                    description: This is the functional framework of the component with the Open Digital Architecture.   
                    items:
                      type: string 
                  maintainers:
                    type: array
                    description: Maintainers is an optional list of maintainers of
                      the component. The maintainers in this list maintain the the
                      source code, images, and package for the component.
                    items:
                      description: ContactData contains information about an individual or organization.
                      type: object
                      properties:
                        email:
                          description: Email is the email address.
                          type: string
                        name:
                          description: Name is the descriptive name.
                          type: string
                        url:
                          description: Website address of maintaining organization.
                          type: string
                  owners:
                    type: array
                    description: Owners is an optional list of the owners of the installed component.
                    items:
                      type: object
                      description: ContactData contains information about an individual or organization.
                      properties:
                        email:
                          description: Email is the email address.
                          type: string
                        name:
                          description: Name is the descriptive name.
                          type: string
                        url:
                          description: Website address of owning organization.
                          type: string
              coreFunction:
                type: object
                properties:
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        id:
                          type: string
                          description: This is the id of the API. For TM Forum Open-APIs this would be TMFxxx e.g. TMF620 for Product Catalog Management.                      
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - mcp
                          description: The type of API specification. Currently OpenAPI (swagger) and MCP are supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard
                        gatewayConfiguration:
                          type: object
                          description: Configuration settings for API Gateway
                          properties:
                            apiKeyVerification:
                              type: object
                              description: "(optional) API key verification settings"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false) Enforce API key verification"
                                location:
                                  type: string
                                  description: "(optional) Variable name for API key location"
                            rateLimit:
                              type: object
                              description: "(optional) Rate limiting configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                identifier:
                                  type: string
                                  description: "Identifier for rate-limiting"
                                limit:
                                  type: string
                                  description: "Limit of requests per identifier"
                                interval:
                                  type: string
                                  description: "(default: ps) Interval for rate limit"
                            quota:
                              type: object
                              description: "(optional) Quota configuration"
                              properties:
                                identifier:
                                  type: string
                                  description: "Identifier for quota counter"
                                limit:
                                  type: string
                                  description: "Quota counter limit"
                            OASValidation:
                              type: object
                              description: "(optional) OpenAPI Specification validation"
                              properties:
                                requestEnabled:
                                  type: boolean
                                  description: "(default: false) Enable request validation"
                                responseEnabled:
                                  type: boolean
                                  description: "(default: false) Enable response validation"
                                allowUnspecifiedHeaders:
                                  type: boolean
                                  description: "(default: false) Allow unspecified headers"
                                allowUnspecifiedQueryParams:
                                  type: boolean
                                  description: "(default: false) Allow unspecified query parameters"
                                allowUnspecifiedCookies:
                                  type: boolean
                                  description: "(default: false) Allow unspecified cookies"
                            CORS:
                              type: object
                              description: "(optional) Cross-origin Resource Sharing configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                allowCredentials:
                                  type: boolean
                                  description: "(default: false) Enable credentials for cross-origin requests"
                                allowOrigins:
                                  type: string
                                  description: "(default: *) Allowed origins (CSV)"
                                handlePreflightRequests:
                                  type: object
                                  description: "(optional) Preflight request configuration"
                                  properties:
                                    enabled:
                                      type: boolean
                                      description: "(default: true)"
                                    allowHeaders:
                                      type: string
                                      description: "(default: Origin, Accept, X-Requested-With, etc.)"
                                    allowMethods:
                                      type: string
                                      description: "(default: GET, POST, etc.)"
                                    maxAge:
                                      type: integer
                                      description: "(default: 1800) Cache duration for CORS preflight requests"
                            template:
                              type: string
                              description: "(optional) Pre-configured template for the API"
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        id:
                          type: string
                          description: This is the id of the API. For TM Forum Open-APIs this would be TMFxxx e.g. TMF620 for Product Catalog Management.                      
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - mcp
                          description: The type of API specification. Currently OpenAPI (swagger) and MCP are supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
              eventNotification:
                type: object
                properties:
                  publishedEvents:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the Topic that this Component is going to push events into
                        description:
                          type: string
                          description: (Optional) Description
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - mcp
                          description: The type of API specification. Currently OpenAPI (swagger) and MCP are supported.
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        implementation:
                          type: string
                          description: The name of the service receiving the notifications
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        hub:
                          type: string
                          description: The path to the root of the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                  subscribedEvents:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the Topic that this Component is interested in listening to
                        description:
                          type: string
                          description: (Optional) Description
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - mcp
                          description: The type of API specification. Currently OpenAPI (swagger) and MCP are supported.
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        implementation:
                          type: string
                          description: The name of the service receiving the notifications
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        callback:
                          type: string
                          description: The path to the callback endpoint
                        port:
                          type: integer
                          description: The port to which the callback listens to
                        query:
                          type: string
                          description: (optional) Filter the events that will be sent to callback endpoint
              managementFunction:
                type: object
                properties:
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        id:
                          type: string
                          description: This is the id of the API. For TM Forum Open-APIs this would be TMFxxx e.g. TMF620 for Product Catalog Management.                      
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - prometheus
                          - openmetrics
                          - mcp
                          description: The type of API specification. Currently OpenAPI (swagger) and Prometheus/OpenMetrics (metrics) and MCP APIs are supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard                          
                        gatewayConfiguration:
                          type: object
                          description: Configuration settings for API Gateway
                          properties:
                            apiKeyVerification:
                              type: object
                              description: "(optional) API key verification settings"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false) Enforce API key verification"
                                location:
                                  type: string
                                  description: "(optional) Variable name for API key location"
                            rateLimit:
                              type: object
                              description: "(optional) Rate limiting configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                identifier:
                                  type: string
                                  description: "Identifier for rate-limiting"
                                limit:
                                  type: string
                                  description: "Limit of requests per identifier"
                                interval:
                                  type: string
                                  description: "(default: ps) Interval for rate limit"
                            quota:
                              type: object
                              description: "(optional) Quota configuration"
                              properties:
                                identifier:
                                  type: string
                                  description: "Identifier for quota counter"
                                limit:
                                  type: string
                                  description: "Quota counter limit"
                            OASValidation:
                              type: object
                              description: "(optional) OpenAPI Specification validation"
                              properties:
                                requestEnabled:
                                  type: boolean
                                  description: "(default: false) Enable request validation"
                                responseEnabled:
                                  type: boolean
                                  description: "(default: false) Enable response validation"
                                allowUnspecifiedHeaders:
                                  type: boolean
                                  description: "(default: false) Allow unspecified headers"
                                allowUnspecifiedQueryParams:
                                  type: boolean
                                  description: "(default: false) Allow unspecified query parameters"
                                allowUnspecifiedCookies:
                                  type: boolean
                                  description: "(default: false) Allow unspecified cookies"
                            CORS:
                              type: object
                              description: "(optional) Cross-origin Resource Sharing configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                allowCredentials:
                                  type: boolean
                                  description: "(default: false) Enable credentials for cross-origin requests"
                                allowOrigins:
                                  type: string
                                  description: "(default: *) Allowed origins (CSV)"
                                handlePreflightRequests:
                                  type: object
                                  description: "(optional) Preflight request configuration"
                                  properties:
                                    enabled:
                                      type: boolean
                                      description: "(default: true)"
                                    allowHeaders:
                                      type: string
                                      description: "(default: Origin, Accept, X-Requested-With, etc.)"
                                    allowMethods:
                                      type: string
                                      description: "(default: GET, POST, etc.)"
                                    maxAge:
                                      type: integer
                                      description: "(default: 1800) Cache duration for CORS preflight requests"
                            template:
                              type: string
                              description: "(optional) Pre-configured template for the API"
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        id:
                          type: string
                          description: This is the id of the API. For TM Forum Open-APIs this would be TMFxxx e.g. TMF620 for Product Catalog Management.                      
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - mcp
                          description: The type of API specification. Currently OpenAPI (swagger) and MCP are supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard                          
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
              securityFunction:
                type: object
                properties:
                  secretsManagement:
                    description: optional, request access to secrets stored exclusively for this component.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                    required: ["type", "podSelector"]
                    properties:
                      type:
                        type: string
                        enum: ["sideCar"]
                        description: defines, how components access the secrets, currently only sideCar is supported
                      sideCar:
                        type: object
                        description: sideCar parameters, required if type has value "sideCar"
                        required: ["port"]
                        properties:
                          port:
                            type: integer
                            description: The port where the API is exposed in the sideCar (localhost:<port>)
                      podSelector:
                        type: object
                        description: defines, which PODs are allowed to access the secrets (and logic)
                        properties:
                          namespace:
                            type: string
                            description: glob patter matching the namespace of the POD
                          name:
                            type: string
                            description: glob patter matching the name of the POD
                          serviceaccount:
                            type: string
                            description: glob patter matching the serviceaccount od the POD
                  exposedAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API
                        id:
                          type: string
                          description: This is the id of the API. For TM Forum Open-APIs this would be TMFxxx e.g. TMF620 for Product Catalog Management.                      
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - mcp
                          description: The type of API specification. Currently OpenAPI (swagger) and MCP are supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard                          
                        gatewayConfiguration:
                          type: object
                          description: Configuration settings for API Gateway
                          properties:
                            apiKeyVerification:
                              type: object
                              description: "(optional) API key verification settings"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false) Enforce API key verification"
                                location:
                                  type: string
                                  description: "(optional) Variable name for API key location"
                            rateLimit:
                              type: object
                              description: "(optional) Rate limiting configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                identifier:
                                  type: string
                                  description: "Identifier for rate-limiting"
                                limit:
                                  type: string
                                  description: "Limit of requests per identifier"
                                interval:
                                  type: string
                                  description: "(default: ps) Interval for rate limit"
                            quota:
                              type: object
                              description: "(optional) Quota configuration"
                              properties:
                                identifier:
                                  type: string
                                  description: "Identifier for quota counter"
                                limit:
                                  type: string
                                  description: "Quota counter limit"
                            OASValidation:
                              type: object
                              description: "(optional) OpenAPI Specification validation"
                              properties:
                                requestEnabled:
                                  type: boolean
                                  description: "(default: false) Enable request validation"
                                responseEnabled:
                                  type: boolean
                                  description: "(default: false) Enable response validation"
                                allowUnspecifiedHeaders:
                                  type: boolean
                                  description: "(default: false) Allow unspecified headers"
                                allowUnspecifiedQueryParams:
                                  type: boolean
                                  description: "(default: false) Allow unspecified query parameters"
                                allowUnspecifiedCookies:
                                  type: boolean
                                  description: "(default: false) Allow unspecified cookies"
                            CORS:
                              type: object
                              description: "(optional) Cross-origin Resource Sharing configuration"
                              properties:
                                enabled:
                                  type: boolean
                                  description: "(default: false)"
                                allowCredentials:
                                  type: boolean
                                  description: "(default: false) Enable credentials for cross-origin requests"
                                allowOrigins:
                                  type: string
                                  description: "(default: *) Allowed origins (CSV)"
                                handlePreflightRequests:
                                  type: object
                                  description: "(optional) Preflight request configuration"
                                  properties:
                                    enabled:
                                      type: boolean
                                      description: "(default: true)"
                                    allowHeaders:
                                      type: string
                                      description: "(default: Origin, Accept, X-Requested-With, etc.)"
                                    allowMethods:
                                      type: string
                                      description: "(default: GET, POST, etc.)"
                                    maxAge:
                                      type: integer
                                      description: "(default: 1800) Cache duration for CORS preflight requests"
                            template:
                              type: string
                              description: "(optional) Pre-configured template for the API"
                        implementation:
                          type: string
                          description: The name of the service where the implementation of the API is found
                        path:
                          type: string
                          description: The path to the root of the API
                        developerUI:
                          type: string
                          description: (optional) The path to the developer User Interface for the API
                        port:
                          type: integer
                          description: The port where the API is exposed
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are exposed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                      - implementation
                      - path
                      - port
                  dependentAPIs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Name of the API that this component is dependent on
                        id:
                          type: string
                          description: This is the id of the API. For TM Forum Open-APIs this would be TMFxxx e.g. TMF620 for Product Catalog Management.                      
                        specification:  
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                format: url
                                description: url to the specification of the API. e.g. url to the swagger/OAS file
                              version:
                                type: string
                                description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                          description: >
                            Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                          minItems: 1
                        apiType:
                          type: string
                          enum:
                          - openapi
                          - mcp
                          description: The type of API specification. Currently OpenAPI (swagger) and MCP are supported.
                        apiSDO:
                          type: string
                          description: (optional) The name of the SDO (Standards Definition Organization) that defines the API standard                          
                        resources:
                          type: array
                          items:
                            type: object
                          description: Resources is an optional list of resources that are consumed by the API.
                        required:
                          type: boolean
                          description: Required is a flag that indicates whether the API is required or not.
                      required:
                      - name
                      - apiType
                  canvasSystemRole:
                    description: This is the name of the role that the Canvas controllers will use to interact with the component's APIs.
                      It must exist in the roles exposed by the partyRole API.
                    type: string
                  componentRole:
                    description: This allows components to declare statically defined roles that should be configured in Identity Management solution. 
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        description:
                          type: string   
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: deployment_status
      type: string
      description: Deployment status [in progress, complete, failed]
      jsonPath: .status.summary/status.deployment_status
---
# Source: canvas-oda/charts/oda-crds/templates/oda-dependentapi-crd.yaml
# This is a CustomResourceDefinition for DependentAPIs.
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  name: "dependentapis.oda.tmforum.org"
spec:
  group: "oda.tmforum.org"
  scope: "Namespaced"
  names:
    plural: "dependentapis"
    singular: "dependentapi"
    shortNames:
    - depapi
    - depapis
    kind: "DependentAPI"
  versions:
  - name: "v1beta3"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    deprecated: false
    schema:
      openAPIV3Schema:
        type: object
        required: ["spec"]
        properties:
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            properties:
              name:
                type: string
                description: Name of the API that this component is dependent on
              specification:
                type: array
                items:
                  type: string
                description: >
                  url to the specification of the API, if required. e.g. url to the swagger file for Open API.
                  This is an array of strings to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                minItems: 1                
              apiType:
                type: string
                enum:
                - openapi
                description: The type of API specification. Currently only OpenAPI (swagger) is supported.
              selector:
                type: object
                description: key value pairs for filtering the dependent API search, e.g. 'releaseName:demo-b'.
                x-kubernetes-preserve-unknown-fields: true
                properties:
                  zone: 
                    type: string
                    description: zone(cluster-/canvas-/gateway-id) or 'SAME' for same as component
                  releaseName: 
                    type: string
                    description: release name of the component
                  namespace:
                    type: string
                    description: namespace of the exposedAPI custom resource
              resources:
                type: array
                items:
                  type: object
                description: Resources is an optional list of resources that are consumed by the API.
              required:
                type: boolean
                description: Required is a flag that indicates whether the API is required or not.
            required:
            - name
            - apiType
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: ready
      type: string
      description: Dependent API configuration is ready - e.g. gateway configuration
      jsonPath: .status.implementation.ready
    - name: Age
      jsonPath: .metadata.creationTimestamp
      type: date      
      description: The age of this resource
    - name: svcInvID
      type: string
      description: ID published in the Canvas Info Service
      jsonPath: .status.depapiStatus.svcInvID
    - name: url
      type: string
      description: Dependent API endpoint Url
      jsonPath: .status.depapiStatus.url
  - name: "v1beta4"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    deprecated: false
    schema:
      openAPIV3Schema:
        type: object
        required: ["spec"]
        properties:
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            properties:
              name:
                type: string
                description: Name of the API that this component is dependent on
              specification:  
                type: array
                items:
                  type: object
                  properties:
                    url:
                      type: string
                      format: url
                      description: url to the specification of the API. e.g. url to the swagger/OAS file
                    version:
                      type: string
                      description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                description: >
                  Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                minItems: 1
              apiType:
                type: string
                enum:
                - openapi
                description: The type of API specification. Currently only OpenAPI (swagger) is supported.
              selector:
                type: object
                description: key value pairs for filtering the dependent API search, e.g. 'releaseName:demo-b'.
                x-kubernetes-preserve-unknown-fields: true
                properties:
                  zone: 
                    type: string
                    description: zone(cluster-/canvas-/gateway-id) or 'SAME' for same as component
                  releaseName: 
                    type: string
                    description: release name of the component
                  namespace:
                    type: string
                    description: namespace of the exposedAPI custom resource
              resources:
                type: array
                items:
                  type: object
                description: Resources is an optional list of resources that are consumed by the API.
              required:
                type: boolean
                description: Required is a flag that indicates whether the API is required or not.
            required:
            - name
            - apiType
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: ready
      type: string
      description: Dependent API configuration is ready - e.g. gateway configuration
      jsonPath: .status.implementation.ready
    - name: Age
      jsonPath: .metadata.creationTimestamp
      type: date      
      description: The age of this resource
    - name: svcInvID
      type: string
      description: ID published in the Canvas Info Service
      jsonPath: .status.depapiStatus.svcInvID
    - name: url
      type: string
      description: Dependent API endpoint Url
      jsonPath: .status.depapiStatus.url
  - name: "v1"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: true
    deprecated: false
    schema:
      openAPIV3Schema:
        type: object
        required: ["spec"]
        properties:
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            properties:
              name:
                type: string
                description: Name of the API that this component is dependent on
              specification:  
                type: array
                items:
                  type: object
                  properties:
                    url:
                      type: string
                      format: url
                      description: url to the specification of the API. e.g. url to the swagger/OAS file
                    version:
                      type: string
                      description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                description: >
                  Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                minItems: 1
              apiType:
                type: string
                enum:
                - openapi
                description: The type of API specification. Currently only OpenAPI (swagger) is supported.
              selector:
                type: object
                description: key value pairs for filtering the dependent API search, e.g. 'releaseName:demo-b'.
                x-kubernetes-preserve-unknown-fields: true
                properties:
                  zone: 
                    type: string
                    description: zone(cluster-/canvas-/gateway-id) or 'SAME' for same as component
                  releaseName: 
                    type: string
                    description: release name of the component
                  namespace:
                    type: string
                    description: namespace of the exposedAPI custom resource
              resources:
                type: array
                items:
                  type: object
                description: Resources is an optional list of resources that are consumed by the API.
              required:
                type: boolean
                description: Required is a flag that indicates whether the API is required or not.
            required:
            - name
            - apiType
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: ready
      type: string
      description: Dependent API configuration is ready - e.g. gateway configuration
      jsonPath: .status.implementation.ready
    - name: Age
      jsonPath: .metadata.creationTimestamp
      type: date      
      description: The age of this resource
    - name: svcInvID
      type: string
      description: ID published in the Canvas Info Service
      jsonPath: .status.depapiStatus.svcInvID
    - name: url
      type: string
      description: Dependent API endpoint Url
      jsonPath: .status.depapiStatus.url
---
# Source: canvas-oda/charts/oda-crds/templates/oda-exposedapi-crd.yaml
# This is a new CustomResourceDefinition for ExposedAPIs that replaces the existing API CRD.
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  name: "exposedapis.oda.tmforum.org"
spec:
  group: "oda.tmforum.org"
  scope: "Namespaced"
  names:
    plural: "exposedapis"
    singular: "exposedapi"
    kind: "ExposedAPI"
  versions:
  - name: "v1beta3"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    deprecated: false
    schema:
      openAPIV3Schema:
        type: object
        required: ["spec"]
        properties:
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            properties:
              name:
                type: string
                description: Name of the API
              specification:
                type: array
                items:
                  type: string
                description: >
                  url to the specification of the API, if required. e.g. url to the swagger file for Open API.
                  This is an array of strings to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                minItems: 1
              apiType:
                type: string
                enum:
                - openapi
                - prometheus
                description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus (metrics) APIs are supported.
              apiKeyVerification:
                type: object
                description: (optional) 
                properties:
                  enabled:
                    type: boolean
                    description: "(default: false) Enforce verification of API key"
                  location:
                    type: string
                    description: (optional) Name of variable where API key value is expected
              rateLimit:
                type: object
                description: (optional) The rate limit configuration for the API
                properties:
                  enabled:
                    type: boolean
                    description: "(default: false)"
                  identifier:
                    type: string
                    description: Limit requests by this identifier when enforcing the rate limit
                  limit:
                    type: string
                    description: The limit (count) of requests to allow for each identifier
                  interval:
                    type: string
                    description: "(default: ps) The interval when enforcing the rate limit (ps or pm)"
              quota:
                type: object
                description: (optional) Quota configuration
                properties:
                  identifier:
                    type: string
                    description: Identifier used for each quota counter
                  limit:
                    type: string
                    description: Quota counter limit to enforce for each identifier
              OASValidation:
                type: object
                description: (optional) Validate the request or response against the OpenAPI Specification file for the API
                properties:
                  requestEnabled:
                    type: boolean
                    description: "(default: false) Enable for the incoming request"
                  responseEnabled:
                    type: boolean
                    description: "(default: false) Enable for the response"
                  allowUnspecifiedHeaders:
                    type: boolean
                    description: "(default: false) (request only) Allow for headers that are not explicitly referenced in the OAS"
                  allowUnspecifiedQueryParams:
                    type: boolean
                    description: "(default: false) (request only) Allow for query parameters that are not explicitly referenced in the OAS"
                  allowUnspecifiedCookies:
                    type: boolean
                    description: "(default: false) (request only) Allow for cookies that are not explicitly referenced in the OAS"
              CORS:
                type: object
                description: (optional) Cross-origin Resource Sharing
                properties:
                  enabled:
                    type: boolean
                    description: "(default: false)"
                  allowCredentials:
                    type: boolean
                    description: "(default: false) Indicates whether the client is allowed to send the actual request (not the preflight request) using credentials. Translates to the Access-Control-Allow-Credentials header"
                  allowOrigins:
                    type: string
                    description: "(default: *) CSV of origins allowed to access the resource. The Access-Control-Allow-Origin header will include the matched origin"
                  handlePreflightRequests:
                    type: object
                    description: "(optional) Configuration for handling preflight OPTIONS requests"
                    properties:
                      enabled:
                        type: boolean
                        description: "(default: true) Indicates whether the API should handle OPTIONS preflight requests by generating a compliant response"
                      allowHeaders:
                        type: string
                        description: "(default: Origin, Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers) CSV of HTTP headers than can be used. Translates to the Access-Control-Allow-Headers header"
                      allowMethods:
                        type: string
                        description: "(default: GET, POST, HEAD, OPTIONS) CSV of HTTP methods allowed for the resource. Translates to the Access-Control-Allow-Methods header"
                      maxAge:
                        type: integer
                        description: "(default: 1800) Specifies how long (in seconds) a client should cache the values of the Access-Control-Allow-Headers and Access-Control-Allow-Methods headers for each resource"
              template:
                type: string
                description: (optional) The name of a pre-configured template to use for the API
              implementation:
                type: string
                description: The name of the service where the implementation of the API is found
              path:
                type: string
                description: The path to the root of the API
              developerUI:
                type: string
                description: (optional) The path to the developer User Interface for the API
              port:
                type: integer
                description: The port where the API is exposed
              resources:
                type: array
                items:
                  type: object
                description: (optional) Resources is an optional list of resources that are exposed by the API.
              required:
                type: boolean
                description: Required is a flag that indicates whether the API is required or not.
            required:
            - name
            # TODO: inconsitentency in upper/lowercase writing
            - apiType
            - implementation
            - path
            - port            
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: API_endpoint
      type: string
      description: API endpoint Url
      jsonPath: .status.apiStatus.url
    - name: Implementation_ready
      type: string
      description: API implementation is ready - has passed startup probe checks
      jsonPath: .status.implementation.ready
  - name: "v1beta4"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    deprecated: false
    schema:
      openAPIV3Schema:
        type: object
        required: ["spec"]
        properties:
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            properties:
              name:
                type: string
                description: Name of the API
              specification:  
                type: array
                items:
                  type: object
                  properties:
                    url:
                      type: string
                      format: url
                      description: url to the specification of the API. e.g. url to the swagger/OAS file
                    version:
                      type: string
                      description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                description: >
                  Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                minItems: 1
              apiType:
                type: string
                enum:
                - openapi
                - prometheus
                description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus (metrics) APIs are supported.
              apiKeyVerification:
                type: object
                description: (optional) 
                properties:
                  enabled:
                    type: boolean
                    description: "(default: false) Enforce verification of API key"
                  location:
                    type: string
                    description: (optional) Name of variable where API key value is expected
              rateLimit:
                type: object
                description: (optional) The rate limit configuration for the API
                properties:
                  enabled:
                    type: boolean
                    description: "(default: false)"
                  identifier:
                    type: string
                    description: Limit requests by this identifier when enforcing the rate limit
                  limit:
                    type: string
                    description: The limit (count) of requests to allow for each identifier
                  interval:
                    type: string
                    description: "(default: ps) The interval when enforcing the rate limit (ps or pm)"
              quota:
                type: object
                description: (optional) Quota configuration
                properties:
                  identifier:
                    type: string
                    description: Identifier used for each quota counter
                  limit:
                    type: string
                    description: Quota counter limit to enforce for each identifier
              OASValidation:
                type: object
                description: (optional) Validate the request or response against the OpenAPI Specification file for the API
                properties:
                  requestEnabled:
                    type: boolean
                    description: "(default: false) Enable for the incoming request"
                  responseEnabled:
                    type: boolean
                    description: "(default: false) Enable for the response"
                  allowUnspecifiedHeaders:
                    type: boolean
                    description: "(default: false) (request only) Allow for headers that are not explicitly referenced in the OAS"
                  allowUnspecifiedQueryParams:
                    type: boolean
                    description: "(default: false) (request only) Allow for query parameters that are not explicitly referenced in the OAS"
                  allowUnspecifiedCookies:
                    type: boolean
                    description: "(default: false) (request only) Allow for cookies that are not explicitly referenced in the OAS"
              CORS:
                type: object
                description: (optional) Cross-origin Resource Sharing
                properties:
                  enabled:
                    type: boolean
                    description: "(default: false)"
                  allowCredentials:
                    type: boolean
                    description: "(default: false) Indicates whether the client is allowed to send the actual request (not the preflight request) using credentials. Translates to the Access-Control-Allow-Credentials header"
                  allowOrigins:
                    type: string
                    description: "(default: *) CSV of origins allowed to access the resource. The Access-Control-Allow-Origin header will include the matched origin"
                  handlePreflightRequests:
                    type: object
                    description: "(optional) Configuration for handling preflight OPTIONS requests"
                    properties:
                      enabled:
                        type: boolean
                        description: "(default: true) Indicates whether the API should handle OPTIONS preflight requests by generating a compliant response"
                      allowHeaders:
                        type: string
                        description: "(default: Origin, Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers) CSV of HTTP headers than can be used. Translates to the Access-Control-Allow-Headers header"
                      allowMethods:
                        type: string
                        description: "(default: GET, POST, HEAD, OPTIONS) CSV of HTTP methods allowed for the resource. Translates to the Access-Control-Allow-Methods header"
                      maxAge:
                        type: integer
                        description: "(default: 1800) Specifies how long (in seconds) a client should cache the values of the Access-Control-Allow-Headers and Access-Control-Allow-Methods headers for each resource"
              template:
                type: string
                description: (optional) The name of a pre-configured template to use for the API
              implementation:
                type: string
                description: The name of the service where the implementation of the API is found
              path:
                type: string
                description: The path to the root of the API
              developerUI:
                type: string
                description: (optional) The path to the developer User Interface for the API
              port:
                type: integer
                description: The port where the API is exposed
              resources:
                type: array
                items:
                  type: object
                description: (optional) Resources is an optional list of resources that are exposed by the API.
              required:
                type: boolean
                description: Required is a flag that indicates whether the API is required or not.
            required:
            - name
            # TODO: inconsitentency in upper/lowercase writing
            - apiType
            - implementation
            - path
            - port            
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: API_endpoint
      type: string
      description: API endpoint Url
      jsonPath: .status.apiStatus.url
    - name: Implementation_ready
      type: string
      description: API implementation is ready - has passed startup probe checks
      jsonPath: .status.implementation.ready
  - name: "v1"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: true
    deprecated: false
    schema:
      openAPIV3Schema:
        type: object
        required: ["spec"]
        properties:
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            properties:
              name:
                type: string
                description: Name of the API
              specification:  
                type: array
                items:
                  type: object
                  properties:
                    url:
                      type: string
                      format: url
                      description: url to the specification of the API. e.g. url to the swagger/OAS file
                    version:
                      type: string
                      description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                description: >
                  Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                minItems: 1
              apiType:
                type: string
                enum:
                - openapi
                - prometheus
                - openmetrics
                - mcp
                description: The type of API specification. Currently only OpenAPI (swagger) and Prometheus/OpenMetrics (metrics) and MCP APIs are supported.
              apiKeyVerification:
                type: object
                description: (optional) 
                properties:
                  enabled:
                    type: boolean
                    description: "(default: false) Enforce verification of API key"
                  location:
                    type: string
                    description: (optional) Name of variable where API key value is expected
              rateLimit:
                type: object
                description: (optional) The rate limit configuration for the API
                properties:
                  enabled:
                    type: boolean
                    description: "(default: false)"
                  identifier:
                    type: string
                    description: Limit requests by this identifier when enforcing the rate limit
                  limit:
                    type: string
                    description: The limit (count) of requests to allow for each identifier
                  interval:
                    type: string
                    description: "(default: ps) The interval when enforcing the rate limit (ps or pm)"
              quota:
                type: object
                description: (optional) Quota configuration
                properties:
                  identifier:
                    type: string
                    description: Identifier used for each quota counter
                  limit:
                    type: string
                    description: Quota counter limit to enforce for each identifier
              OASValidation:
                type: object
                description: (optional) Validate the request or response against the OpenAPI Specification file for the API
                properties:
                  requestEnabled:
                    type: boolean
                    description: "(default: false) Enable for the incoming request"
                  responseEnabled:
                    type: boolean
                    description: "(default: false) Enable for the response"
                  allowUnspecifiedHeaders:
                    type: boolean
                    description: "(default: false) (request only) Allow for headers that are not explicitly referenced in the OAS"
                  allowUnspecifiedQueryParams:
                    type: boolean
                    description: "(default: false) (request only) Allow for query parameters that are not explicitly referenced in the OAS"
                  allowUnspecifiedCookies:
                    type: boolean
                    description: "(default: false) (request only) Allow for cookies that are not explicitly referenced in the OAS"
              CORS:
                type: object
                description: (optional) Cross-origin Resource Sharing
                properties:
                  enabled:
                    type: boolean
                    description: "(default: false)"
                  allowCredentials:
                    type: boolean
                    description: "(default: false) Indicates whether the client is allowed to send the actual request (not the preflight request) using credentials. Translates to the Access-Control-Allow-Credentials header"
                  allowOrigins:
                    type: string
                    description: "(default: *) CSV of origins allowed to access the resource. The Access-Control-Allow-Origin header will include the matched origin"
                  handlePreflightRequests:
                    type: object
                    description: "(optional) Configuration for handling preflight OPTIONS requests"
                    properties:
                      enabled:
                        type: boolean
                        description: "(default: true) Indicates whether the API should handle OPTIONS preflight requests by generating a compliant response"
                      allowHeaders:
                        type: string
                        description: "(default: Origin, Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers) CSV of HTTP headers than can be used. Translates to the Access-Control-Allow-Headers header"
                      allowMethods:
                        type: string
                        description: "(default: GET, POST, HEAD, OPTIONS) CSV of HTTP methods allowed for the resource. Translates to the Access-Control-Allow-Methods header"
                      maxAge:
                        type: integer
                        description: "(default: 1800) Specifies how long (in seconds) a client should cache the values of the Access-Control-Allow-Headers and Access-Control-Allow-Methods headers for each resource"
              template:
                type: string
                description: (optional) The name of a pre-configured template to use for the API
              implementation:
                type: string
                description: The name of the service where the implementation of the API is found
              path:
                type: string
                description: The path to the root of the API
              developerUI:
                type: string
                description: (optional) The path to the developer User Interface for the API
              port:
                type: integer
                description: The port where the API is exposed
              resources:
                type: array
                items:
                  type: object
                description: (optional) Resources is an optional list of resources that are exposed by the API.
              required:
                type: boolean
                description: Required is a flag that indicates whether the API is required or not.
            required:
            - name
            # TODO: inconsitentency in upper/lowercase writing
            - apiType
            - implementation
            - path
            - port            
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: API_endpoint
      type: string
      description: API endpoint Url
      jsonPath: .status.apiStatus.url
    - name: Implementation_ready
      type: string
      description: API implementation is ready - has passed startup probe checks
      jsonPath: .status.implementation.ready
---
# Source: canvas-oda/charts/oda-crds/templates/oda-identityconfig-crd.yaml
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  name: "identityconfigs.oda.tmforum.org"
  annotations:
    cert-manager.io/inject-ca-from:  canvas/compcrdwebhook
spec:
  scope: "Namespaced"
  group: "oda.tmforum.org"
  names:
    plural: "identityconfigs"
    singular: "identityconfig"
    kind: "IdentityConfig"
  versions:
  - name: "v1beta4"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              canvasSystemRole:
                description: This is the name of the role that the Canvas controllers will use to interact with the component's APIs.
                type: string 
              componentRole:
                description: This allows components to declare statically defined roles that should be configured in Identity Management solution. 
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    description:
                      type: string   
              partyRoleAPI:
                description: This is the name of the API that the component will expose to allow Canvas to manage party roles.
                type: object
                properties:
                  implementation:
                    type: string
                    description: The name of the service where the implementation of the API is found
                  path:
                    type: string
                    description: The path to the root of the API
                  port:
                    type: integer
                    description: The port where the API is exposed
                required:
                - implementation
                - path
                - port                             
    additionalPrinterColumns:
    - name: identity_provider
      type: string
      description: Identity provider
      jsonPath: .status.identityConfig.identityProvider   
    - name: listener-registered
      type: boolean
      description: If component uses dynamic roles via exposing API, canvas creates listner to listen for changes.
      jsonPath: .status.identityConfig.listenerRegistered   
  - name: "v1"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: true
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              canvasSystemRole:
                description: This is the name of the role that the Canvas controllers will use to interact with the component's APIs.
                type: string 
              componentRole:
                description: This allows components to declare statically defined roles that should be configured in Identity Management solution. 
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    description:
                      type: string   
              partyRoleAPI: # a component can dynamically set roles via either partyRoleAPI or permissionSpecificationSetAPI (partyRole will be deprecated in future)
                description: This is the name of the API that the component will expose to allow Canvas to manage party roles.
                type: object
                properties:
                  implementation:
                    type: string
                    description: The name of the service where the implementation of the API is found
                  path:
                    type: string
                    description: The path to the root of the API
                  port:
                    type: integer
                    description: The port where the API is exposed
                required:
                - implementation
                - path
                - port                             
              permissionSpecificationSetAPI: # a component can dynamically set roles via either partyRoleAPI or permissionSpecificationSetAPI (partyRole will be deprecated in future)
                description: This is the name of the API that the component will expose to allow Canvas to manage roles.
                type: object
                properties:
                  implementation:
                    type: string
                    description: The name of the service where the implementation of the API is found
                  path:
                    type: string
                    description: The path to the root of the API
                  port:
                    type: integer
                    description: The port where the API is exposed
                required:
                - implementation
                - path
                - port                             
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
    additionalPrinterColumns:
    - name: identity_provider
      type: string
      description: Identity provider
      jsonPath: .status.identityConfig.identityProvider   
    - name: listener-registered
      type: boolean
      description: If component uses dynamic roles via exposing API, canvas creates listner to listen for changes.
      jsonPath: .status.identityConfig.listenerRegistered
---
# Source: canvas-oda/charts/oda-crds/templates/oda-publishednotification-crd.yaml
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  name: "publishednotifications.oda.tmforum.org"
spec:
  group: "oda.tmforum.org"
  scope: "Namespaced"
  names:
    kind: "PublishedNotification"
    singular: "publishednotification"
    plural: "publishednotifications"
  versions:
    - name: "v1beta2"
      # Each version can be enabled/disabled by Served flag.
      served: true
      # One and only one version must be marked as the storage version.
      storage: false
      deprecated: true
      deprecationWarning: "oda.tmforum.org/v1beta2 PublishedNotification is deprecated. Please upgrade to oda.tmforum.org/v1 or newer"
      schema:
        openAPIV3Schema:
          type: object
          required: ["spec"]
          properties:
            spec:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                name:
                  type: string
                  description: Name of PublishedNotification that this component is dependent on
                specification:
                  type: string
                  format: url
                  description: url to the specification of the Notification. e.g. url to the swagger file
                implementation:
                  type: string
                  description: The name of the service sending the notifications
                path:
                  type: string
                  description: the path to the hub for this Notification
                port:
                  type: integer
                  description: The port where the hub is exposed 
            status:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                uid:
                  type: string
                status:
                  type: string
                error:
                  type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: HREF
          type: string
          description: HREF
          jsonPath: .spec.href
        - name: UID
          type: string
          description: UID
          jsonPath: .status.uid
        - name: Status
          type: string
          description: Publisher status
          jsonPath: .status.status
    - name: "v1beta3"
      # Each version can be enabled/disabled by Served flag.
      served: true
      # One and only one version must be marked as the storage version.
      storage: false
      deprecated: false
      schema:
        openAPIV3Schema:
          type: object
          required: ["spec"]
          properties:
            spec:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                name:
                  type: string
                  description: Name of the Topic that this Component is going to push events into
                description:
                  type: string
                  description: (Optional) Description
                apiType:
                  type: string
                  enum:
                  - openapi
                  description: The type of API specification. Currently only OpenAPI (swagger) APIs are supported.
                specification:
                  type: string
                  format: url
                  description: (optional) url to the specification of the API. e.g. url to the swagger file
                implementation:
                  type: string
                  description: The name of the service sending the notifications
                developerUI:
                  type: string
                  description: (optional) The path to the developer User Interface for the API
                hub:
                  type: string
                  description: The path to the root of the API
                port:
                  type: integer
                  description: The port where the API is exposed
            status:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                uid:
                  type: string
                status:
                  type: string
                error:
                  type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: Hub
          type: string
          description: Hub
          jsonPath: .spec.hub
        - name: Port
          type: string
          description: Port
          jsonPath: .spec.port
        - name: APIType
          type: string
          description: APIType
          jsonPath: .spec.apiType
        - name: UID
          type: string
          description: UID
          jsonPath: .status.uid
        - name: Status
          type: string
          description: Publisher status
          jsonPath: .status.status
    - name: "v1beta4"
      # Each version can be enabled/disabled by Served flag.
      served: true
      # One and only one version must be marked as the storage version.
      storage: false
      deprecated: false
      schema:
        openAPIV3Schema:
          type: object
          required: ["spec"]
          properties:
            spec:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                name:
                  type: string
                  description: Name of the Topic that this Component is going to push events into
                description:
                  type: string
                  description: (Optional) Description
                apiType:
                  type: string
                  enum:
                  - openapi
                  description: The type of API specification. Currently only OpenAPI (swagger) APIs are supported.
                specification:  
                  type: array
                  items:
                    type: object
                    properties:
                      url:
                        type: string
                        format: url
                        description: url to the specification of the API. e.g. url to the swagger/OAS file
                      version:
                        type: string
                        description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                  description: >
                    Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                  minItems: 1
                implementation:
                  type: string
                  description: The name of the service sending the notifications
                developerUI:
                  type: string
                  description: (optional) The path to the developer User Interface for the API
                hub:
                  type: string
                  description: The path to the root of the API
                port:
                  type: integer
                  description: The port where the API is exposed
            status:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                uid:
                  type: string
                status:
                  type: string
                error:
                  type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: Hub
          type: string
          description: Hub
          jsonPath: .spec.hub
        - name: Port
          type: string
          description: Port
          jsonPath: .spec.port
        - name: APIType
          type: string
          description: APIType
          jsonPath: .spec.apiType
        - name: UID
          type: string
          description: UID
          jsonPath: .status.uid
        - name: Status
          type: string
          description: Publisher status
          jsonPath: .status.status
    - name: "v1"
      # Each version can be enabled/disabled by Served flag.
      served: true
      # One and only one version must be marked as the storage version.
      storage: true
      deprecated: false
      schema:
        openAPIV3Schema:
          type: object
          required: ["spec"]
          properties:
            spec:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                name:
                  type: string
                  description: Name of the Topic that this Component is going to push events into
                description:
                  type: string
                  description: (Optional) Description
                apiType:
                  type: string
                  enum:
                  - openapi
                  description: The type of API specification. Currently only OpenAPI (swagger) APIs are supported.
                specification:  
                  type: array
                  items:
                    type: object
                    properties:
                      url:
                        type: string
                        format: url
                        description: url to the specification of the API. e.g. url to the swagger/OAS file
                      version:
                        type: string
                        description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                  description: >
                    Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                  minItems: 1
                implementation:
                  type: string
                  description: The name of the service sending the notifications
                developerUI:
                  type: string
                  description: (optional) The path to the developer User Interface for the API
                hub:
                  type: string
                  description: The path to the root of the API
                port:
                  type: integer
                  description: The port where the API is exposed
            status:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                uid:
                  type: string
                status:
                  type: string
                error:
                  type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: Hub
          type: string
          description: Hub
          jsonPath: .spec.hub
        - name: Port
          type: string
          description: Port
          jsonPath: .spec.port
        - name: APIType
          type: string
          description: APIType
          jsonPath: .spec.apiType
        - name: UID
          type: string
          description: UID
          jsonPath: .status.uid
        - name: Status
          type: string
          description: Publisher status
          jsonPath: .status.status
---
# Source: canvas-oda/charts/oda-crds/templates/oda-secretsmanagement-crd.yaml
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  name: "secretsmanagements.oda.tmforum.org"
spec:
  group: "oda.tmforum.org"
  scope: "Namespaced"
  names:
    plural: "secretsmanagements"
    singular: "secretsmanagement"
    shortNames: ["sman", "smans"]
    kind: "SecretsManagement"
  versions:
  - name: "v1beta3"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    deprecated: false
    # This overrides the default warning returned to API clients making v1alpha1 API requests.
    schema:
      openAPIV3Schema:
        type: object
        required: ["spec"]
        properties:
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            required: ["type", "podSelector"]
            properties:
              type:
                type: string
                enum: ["sideCar"]
                description: defines, how components access the secrets, currently only sideCar is supported
              sideCar:
                type: object
                description: sideCar parameters, required if type has value "sideCar"
                required: ["port"]
                properties:
                  port:
                    type: integer
                    description: The port where the API is exposed in the sideCar (localhost:<port>)
              podSelector:
                type: object
                description: defines, which PODs are allowed to access the secrets (and logic)
                properties:
                  namespace:
                    type: string
                    description: glob patter matching the namespace of the POD
                  name:
                    type: string
                    description: glob patter matching the name of the POD
                  serviceaccount:
                    type: string
                    description: glob patter matching the serviceaccount od the POD
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            properties:
              implementation:
                type: object
                properties:
                  ready:
                    type: boolean
    additionalPrinterColumns:
    - name: NAME_SEL
      type: string
      description: SecretsManagement pod name selector
      jsonPath: .spec.podSelector.name
    - name: NAMESPACE_SEL
      type: string
      description: SecretsManagement pod namespace selector
      jsonPath: .spec.podSelector.namespace
    - name: SVCACCT_SEL
      type: string
      description: SecretsManagement pod serviceaccount selector
      jsonPath: .spec.podSelector.serviceaccount
    - name: READY
      type: string
      description: Canvas Vault configuration is ready
      jsonPath: .status.implementation.ready
  - name: "v1beta4"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: false
    deprecated: false
    # This overrides the default warning returned to API clients making v1alpha1 API requests.
    schema:
      openAPIV3Schema:
        type: object
        required: ["spec"]
        properties:
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            required: ["type", "podSelector"]
            properties:
              type:
                type: string
                enum: ["sideCar"]
                description: defines, how components access the secrets, currently only sideCar is supported
              sideCar:
                type: object
                description: sideCar parameters, required if type has value "sideCar"
                required: ["port"]
                properties:
                  port:
                    type: integer
                    description: The port where the API is exposed in the sideCar (localhost:<port>)
              podSelector:
                type: object
                description: defines, which PODs are allowed to access the secrets (and logic)
                properties:
                  namespace:
                    type: string
                    description: glob patter matching the namespace of the POD
                  name:
                    type: string
                    description: glob patter matching the name of the POD
                  serviceaccount:
                    type: string
                    description: glob patter matching the serviceaccount od the POD
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            properties:
              implementation:
                type: object
                properties:
                  ready:
                    type: boolean
    additionalPrinterColumns:
    - name: NAME_SEL
      type: string
      description: SecretsManagement pod name selector
      jsonPath: .spec.podSelector.name
    - name: NAMESPACE_SEL
      type: string
      description: SecretsManagement pod namespace selector
      jsonPath: .spec.podSelector.namespace
    - name: SVCACCT_SEL
      type: string
      description: SecretsManagement pod serviceaccount selector
      jsonPath: .spec.podSelector.serviceaccount
    - name: READY
      type: string
      description: Canvas Vault configuration is ready
      jsonPath: .status.implementation.ready      
  - name: "v1"
    # Each version can be enabled/disabled by Served flag.
    served: true
    # One and only one version must be marked as the storage version.
    storage: true
    deprecated: false
    # This overrides the default warning returned to API clients making v1alpha1 API requests.
    schema:
      openAPIV3Schema:
        type: object
        required: ["spec"]
        properties:
          spec:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            required: ["type", "podSelector"]
            properties:
              type:
                type: string
                enum: ["sideCar"]
                description: defines, how components access the secrets, currently only sideCar is supported
              sideCar:
                type: object
                description: sideCar parameters, required if type has value "sideCar"
                required: ["port"]
                properties:
                  port:
                    type: integer
                    description: The port where the API is exposed in the sideCar (localhost:<port>)
              podSelector:
                type: object
                description: defines, which PODs are allowed to access the secrets (and logic)
                properties:
                  namespace:
                    type: string
                    description: glob patter matching the namespace of the POD
                  name:
                    type: string
                    description: glob patter matching the name of the POD
                  serviceaccount:
                    type: string
                    description: glob patter matching the serviceaccount od the POD
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
            properties:
              implementation:
                type: object
                properties:
                  ready:
                    type: boolean
    additionalPrinterColumns:
    - name: NAME_SEL
      type: string
      description: SecretsManagement pod name selector
      jsonPath: .spec.podSelector.name
    - name: NAMESPACE_SEL
      type: string
      description: SecretsManagement pod namespace selector
      jsonPath: .spec.podSelector.namespace
    - name: SVCACCT_SEL
      type: string
      description: SecretsManagement pod serviceaccount selector
      jsonPath: .spec.podSelector.serviceaccount
    - name: READY
      type: string
      description: Canvas Vault configuration is ready
      jsonPath: .status.implementation.ready
---
# Source: canvas-oda/charts/oda-crds/templates/oda-subscribednotification-crd.yaml
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  name: "subscribednotifications.oda.tmforum.org"
spec:
  group: "oda.tmforum.org"
  scope: "Namespaced"
  names:
    kind: "SubscribedNotification"
    singular: "subscribednotification"
    plural: "subscribednotifications"
  versions:
    - name: "v1beta2"
      # Each version can be enabled/disabled by Served flag.
      served: true
      # One and only one version must be marked as the storage version.
      storage: false
      deprecated: true
      deprecationWarning: "oda.tmforum.org/v1beta2 SubscribedNotification is deprecated. Please upgrade to oda.tmforum.org/v1 or newer"
      schema:
        openAPIV3Schema:
          type: object
          required: ["spec"]
          properties:
            spec:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                name:
                  type: string
                  description: Name of SubscribedNotification that this component is dependent on
                specification:
                  type: string
                  format: url
                  description: url to the specification of the Notification. e.g. url to the swagger file
                implementation:
                  type: string
                  description: The name of the service receiving the notifications
                path:
                  type: string
                  description: the path to the callback for this subscription
                port:
                  type: integer
                  description: The port where the callback is exposed 
            status:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                uid:
                  type: string
                status:
                  type: string
                error:
                  type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: HREF
          type: string
          description: HREF
          jsonPath: .spec.href
        - name: UID
          type: string
          description: UID
          jsonPath: .status.uid
        - name: Status
          type: string
          description: Subscriber status
          jsonPath: .status.status
    - name: "v1beta3"
      # Each version can be enabled/disabled by Served flag.
      served: true
      # One and only one version must be marked as the storage version.
      storage: false
      deprecated: false
      schema:
        openAPIV3Schema:
          type: object
          required: ["spec"]
          properties:
            spec:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                name:
                  type: string
                  description: Name of the Topic that this Component is interested in listening to
                description:
                  type: string
                  description: (Optional) Description
                apiType:
                  type: string
                  enum:
                  - openapi
                  description: The type of API specification. Currently only OpenAPI (swagger) APIs are supported.
                specification:
                  type: string
                  format: url
                  description: (optional) url to the specification of the API. e.g. url to the swagger file
                implementation:
                  type: string
                  description: The name of the service receiving the notifications
                developerUI:
                  type: string
                  description: (optional) The path to the developer User Interface for the API
                callback:
                  type: string
                  description: The path to the callback endpoint
                port:
                  type: integer
                  description: The port to which the callback listens to
                query:
                  type: string
                  description: (optional) Filter the events that will be sent to callback endpoint
            status:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                uid:
                  type: string
                status:
                  type: string
                error:
                  type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: Callback
          type: string
          description: Hub
          jsonPath: .spec.callback
        - name: Port
          type: string
          description: Port
          jsonPath: .spec.port
        - name: APIType
          type: string
          description: APIType
          jsonPath: .spec.apiType
        - name: UID
          type: string
          description: UID
          jsonPath: .status.uid
        - name: Status
          type: string
          description: Subscriber status
          jsonPath: .status.status
    - name: "v1beta4"
      # Each version can be enabled/disabled by Served flag.
      served: true
      # One and only one version must be marked as the storage version.
      storage: false
      deprecated: false
      schema:
        openAPIV3Schema:
          type: object
          required: ["spec"]
          properties:
            spec:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                name:
                  type: string
                  description: Name of the Topic that this Component is interested in listening to
                description:
                  type: string
                  description: (Optional) Description
                apiType:
                  type: string
                  enum:
                  - openapi
                  description: The type of API specification. Currently only OpenAPI (swagger) APIs are supported.
                specification:  
                  type: array
                  items:
                    type: object
                    properties:
                      url:
                        type: string
                        format: url
                        description: url to the specification of the API. e.g. url to the swagger/OAS file
                      version:
                        type: string
                        description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                  description: >
                    Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                  minItems: 1
                implementation:
                  type: string
                  description: The name of the service receiving the notifications
                developerUI:
                  type: string
                  description: (optional) The path to the developer User Interface for the API
                callback:
                  type: string
                  description: The path to the callback endpoint
                port:
                  type: integer
                  description: The port to which the callback listens to
                query:
                  type: string
                  description: (optional) Filter the events that will be sent to callback endpoint
            status:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                uid:
                  type: string
                status:
                  type: string
                error:
                  type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: Callback
          type: string
          description: Hub
          jsonPath: .spec.callback
        - name: Port
          type: string
          description: Port
          jsonPath: .spec.port
        - name: APIType
          type: string
          description: APIType
          jsonPath: .spec.apiType
        - name: UID
          type: string
          description: UID
          jsonPath: .status.uid
        - name: Status
          type: string
          description: Subscriber status
          jsonPath: .status.status
    - name: "v1"
      # Each version can be enabled/disabled by Served flag.
      served: true
      # One and only one version must be marked as the storage version.
      storage: true
      deprecated: false
      schema:
        openAPIV3Schema:
          type: object
          required: ["spec"]
          properties:
            spec:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                name:
                  type: string
                  description: Name of the Topic that this Component is interested in listening to
                description:
                  type: string
                  description: (Optional) Description
                apiType:
                  type: string
                  enum:
                  - openapi
                  description: The type of API specification. Currently only OpenAPI (swagger) APIs are supported.
                specification:  
                  type: array
                  items:
                    type: object
                    properties:
                      url:
                        type: string
                        format: url
                        description: url to the specification of the API. e.g. url to the swagger/OAS file
                      version:
                        type: string
                        description: The version of API specification. For TM Forum Open-APIs this would be the version of the Open-API spec e.g. v4.0.1
                  description: >
                    Specification of the API. This is an array to allow for multiple specifications (e.g. to support Gen-4 and Gen-5 Open-APIs)
                  minItems: 1
                implementation:
                  type: string
                  description: The name of the service receiving the notifications
                developerUI:
                  type: string
                  description: (optional) The path to the developer User Interface for the API
                callback:
                  type: string
                  description: The path to the callback endpoint
                port:
                  type: integer
                  description: The port to which the callback listens to
                query:
                  type: string
                  description: (optional) Filter the events that will be sent to callback endpoint
            status:
              type: object
              x-kubernetes-preserve-unknown-fields: true
              properties:
                uid:
                  type: string
                status:
                  type: string
                error:
                  type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: Callback
          type: string
          description: Hub
          jsonPath: .spec.callback
        - name: Port
          type: string
          description: Port
          jsonPath: .spec.port
        - name: APIType
          type: string
          description: APIType
          jsonPath: .spec.apiType
        - name: UID
          type: string
          description: UID
          jsonPath: .status.uid
        - name: Status
          type: string
          description: Subscriber status
          jsonPath: .status.status
---
# Source: canvas-oda/charts/api-operator-istio/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: apioperator-role-cluster
  labels:
    helm.sh/chart: api-operator-istio-1.1.3
    app.kubernetes.io/name: api-operator-istio
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
rules:

  # Framework: knowing which other operators are running (i.e. peering).
  - apiGroups: [zalando.org]
    resources: [clusterkopfpeerings]
    verbs: [list, watch, patch, get]
  - apiGroups: [zalando.org]
    resources: [kopfpeerings]
    verbs: [list, watch, patch, get]
  - apiGroups: [apiextensions.k8s.io]
    resources: [customresourcedefinitions]
    verbs: [list, watch, get]
    
  # Framework: posting the events about the handlers progress/errors.
  - apiGroups: [events.k8s.io]
    resources: [events]
    verbs: [create]
  - apiGroups: [""]
    resources: [events]
    verbs: [create]

  # Application: read-only access for watching cluster-wide.
  - apiGroups: [oda.tmforum.org]
    resources: [components, components/status]
    verbs: [list, watch, patch, get]
  - apiGroups: [oda.tmforum.org]
    resources: [exposedapis]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: [oda.tmforum.org]
    resources: [secretsmanagements]
    verbs: [list, watch, patch, get, create, update, delete]    
  - apiGroups: [wso2.com]
    resources: [apis]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: [""] # "" indicates the core API group
    resources: ["services", "services/status", "pods", "persistentvolumeclaims", "persistentvolumeclaims/status", "namespaces", "configmaps", "configmaps/status", "secrets", "secrets/status", "serviceaccounts", "serviceaccounts/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["networking.k8s.io"]
    resources: ["ingresses", "ingresses/status", "httproutes"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["extensions", "apps"]
    resources: ["deployments", "deployments/status", "statefulsets", "statefulsets/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["rbac.authorization.k8s.io"]
    resources: [ "roles", "roles/status", "rolebindings", "rolebindings/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["batch", "extensions"]
    resources: ["jobs", "jobs/status", "cronjobs", "cronjobs/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["discovery.k8s.io"]
    resources: ["endpointslices"]
    verbs: [get, list, patch, watch]
  - apiGroups: [oda.tmforum.org]
    resources: [publishednotifications, publishednotifications/status, subscribednotifications, subscribednotifications/status]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["httproutes"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  - apiGroups: ["configuration.konghq.com"]
    resources: ["kongplugins"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  - apiGroups: ["apisix.apache.org"]
    resources: ["apisixroutes", "apisixpluginconfigs"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["ingresses"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]


  # Application: other resources it produces and manipulates.
  # Here, we create Jobs+PVCs+Pods, but we do not patch/update/delete them ever.
  - apiGroups: [batch, extensions]
    resources: [jobs]
    verbs: [create]
  - apiGroups: [""]
    resources: [pods, persistentvolumeclaims]
    verbs: [create]

  # Istio services
  - apiGroups: [networking.istio.io]
    resources: [virtualservices]
    verbs: [list, watch, patch, get, create, update, delete]

  # Prometheus servicemonitor
  - apiGroups: [monitoring.coreos.com]
    resources: [servicemonitors]
    verbs: [list, watch, patch, get, create, update, delete]

  # DependentAPI Custom Resources
  - apiGroups: [oda.tmforum.org]
    resources: [dependentapis]
    verbs: [list, watch, patch, get, create, update, delete]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/cainjector-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-cainjector
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["get", "create", "update", "patch"]
  - apiGroups: ["admissionregistration.k8s.io"]
    resources: ["validatingwebhookconfigurations", "mutatingwebhookconfigurations"]
    verbs: ["get", "list", "watch", "update"]
  - apiGroups: ["apiregistration.k8s.io"]
    resources: ["apiservices"]
    verbs: ["get", "list", "watch", "update"]
  - apiGroups: ["apiextensions.k8s.io"]
    resources: ["customresourcedefinitions"]
    verbs: ["get", "list", "watch", "update"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
# Issuer controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-controller-issuers
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["issuers", "issuers/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["cert-manager.io"]
    resources: ["issuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch", "create", "update", "delete"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
# ClusterIssuer controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-controller-clusterissuers
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["clusterissuers", "clusterissuers/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["cert-manager.io"]
    resources: ["clusterissuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch", "create", "update", "delete"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
# Certificates controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-controller-certificates
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificates/status", "certificaterequests", "certificaterequests/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests", "clusterissuers", "issuers"]
    verbs: ["get", "list", "watch"]
  # We require these rules to support users with the OwnerReferencesPermissionEnforcement
  # admission controller enabled:
  # https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#ownerreferencespermissionenforcement
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates/finalizers", "certificaterequests/finalizers"]
    verbs: ["update"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["orders"]
    verbs: ["create", "delete", "get", "list", "watch"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch", "create", "update", "delete", "patch"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
# Orders controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-controller-orders
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["orders", "orders/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["orders", "challenges"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["cert-manager.io"]
    resources: ["clusterissuers", "issuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges"]
    verbs: ["create", "delete"]
  # We require these rules to support users with the OwnerReferencesPermissionEnforcement
  # admission controller enabled:
  # https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#ownerreferencespermissionenforcement
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["orders/finalizers"]
    verbs: ["update"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
# Challenges controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-controller-challenges
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  # Use to update challenge resource status
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges", "challenges/status"]
    verbs: ["update", "patch"]
  # Used to watch challenge resources
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges"]
    verbs: ["get", "list", "watch"]
  # Used to watch challenges, issuer and clusterissuer resources
  - apiGroups: ["cert-manager.io"]
    resources: ["issuers", "clusterissuers"]
    verbs: ["get", "list", "watch"]
  # Need to be able to retrieve ACME account private key to complete challenges
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
  # Used to create events
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
  # HTTP01 rules
  - apiGroups: [""]
    resources: ["pods", "services"]
    verbs: ["get", "list", "watch", "create", "delete"]
  - apiGroups: ["networking.k8s.io"]
    resources: ["ingresses"]
    verbs: ["get", "list", "watch", "create", "delete", "update"]
  - apiGroups: [ "gateway.networking.k8s.io" ]
    resources: [ "httproutes" ]
    verbs: ["get", "list", "watch", "create", "delete", "update"]
  # We require the ability to specify a custom hostname when we are creating
  # new ingress resources.
  # See: https://github.com/openshift/origin/blob/21f191775636f9acadb44fa42beeb4f75b255532/pkg/route/apiserver/admission/ingress_admission.go#L84-L148
  - apiGroups: ["route.openshift.io"]
    resources: ["routes/custom-host"]
    verbs: ["create"]
  # We require these rules to support users with the OwnerReferencesPermissionEnforcement
  # admission controller enabled:
  # https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#ownerreferencespermissionenforcement
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges/finalizers"]
    verbs: ["update"]
  # DNS01 rules (duplicated above)
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
# ingress-shim controller role
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-controller-ingress-shim
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests"]
    verbs: ["create", "update", "delete"]
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests", "issuers", "clusterissuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["networking.k8s.io"]
    resources: ["ingresses"]
    verbs: ["get", "list", "watch"]
  # We require these rules to support users with the OwnerReferencesPermissionEnforcement
  # admission controller enabled:
  # https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#ownerreferencespermissionenforcement
  - apiGroups: ["networking.k8s.io"]
    resources: ["ingresses/finalizers"]
    verbs: ["update"]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["gateways", "httproutes"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["gateways/finalizers", "httproutes/finalizers"]
    verbs: ["update"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "patch"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-view
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
    rbac.authorization.k8s.io/aggregate-to-view: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests", "issuers"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges", "orders"]
    verbs: ["get", "list", "watch"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-edit
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates", "certificaterequests", "issuers"]
    verbs: ["create", "delete", "deletecollection", "patch", "update"]
  - apiGroups: ["cert-manager.io"]
    resources: ["certificates/status"]
    verbs: ["update"]
  - apiGroups: ["acme.cert-manager.io"]
    resources: ["challenges", "orders"]
    verbs: ["create", "delete", "deletecollection", "patch", "update"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
# Permission to approve CertificateRequests referencing cert-manager.io Issuers and ClusterIssuers
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-controller-approve:cert-manager-io
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cert-manager"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  - apiGroups: ["cert-manager.io"]
    resources: ["signers"]
    verbs: ["approve"]
    resourceNames: ["issuers.cert-manager.io/*", "clusterissuers.cert-manager.io/*"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
# Permission to:
# - Update and sign CertificatSigningeRequests referencing cert-manager.io Issuers and ClusterIssuers
# - Perform SubjectAccessReviews to test whether users are able to reference Namespaced Issuers
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-controller-certificatesigningrequests
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cert-manager"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  - apiGroups: ["certificates.k8s.io"]
    resources: ["certificatesigningrequests"]
    verbs: ["get", "list", "watch", "update"]
  - apiGroups: ["certificates.k8s.io"]
    resources: ["certificatesigningrequests/status"]
    verbs: ["update", "patch"]
  - apiGroups: ["certificates.k8s.io"]
    resources: ["signers"]
    resourceNames: ["issuers.cert-manager.io/*", "clusterissuers.cert-manager.io/*"]
    verbs: ["sign"]
  - apiGroups: ["authorization.k8s.io"]
    resources: ["subjectaccessreviews"]
    verbs: ["create"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-cert-manager-webhook:subjectaccessreviews
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
- apiGroups: ["authorization.k8s.io"]
  resources: ["subjectaccessreviews"]
  verbs: ["create"]
---
# Source: canvas-oda/charts/component-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: odacomponent-role-cluster
  labels:
    helm.sh/chart: component-operator-1.4.1
    app.kubernetes.io/name: component-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
rules:

  # Framework: knowing which other operators are running (i.e. peering).
  - apiGroups: [zalando.org]
    resources: [clusterkopfpeerings]
    verbs: [list, watch, patch, get]
  - apiGroups: [zalando.org]
    resources: [kopfpeerings]
    verbs: [list, watch, patch, get]
  - apiGroups: [apiextensions.k8s.io]
    resources: [customresourcedefinitions]
    verbs: [list, watch, get]
    
  # Framework: posting the events about the handlers progress/errors.
  - apiGroups: [events.k8s.io]
    resources: [events]
    verbs: [create]
  - apiGroups: [""]
    resources: [events]
    verbs: [create]

  # Application: read-only access for watching cluster-wide.
  - apiGroups: [oda.tmforum.org]
    resources: [components, components/status]
    verbs: [list, watch, patch, get]
  - apiGroups: [oda.tmforum.org]
    resources: [exposedapis]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: [oda.tmforum.org]
    resources: [secretsmanagements]
    verbs: [list, watch, patch, get, create, update, delete]    
  - apiGroups: [oda.tmforum.org]
    resources: [identityconfigs]
    verbs: [list, watch, patch, get, create, update, delete]    
  - apiGroups: [wso2.com]
    resources: [apis]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: [""] # "" indicates the core API group
    resources: ["services", "services/status", "pods", "persistentvolumeclaims", "persistentvolumeclaims/status", "namespaces", "configmaps", "configmaps/status", "secrets", "secrets/status", "serviceaccounts", "serviceaccounts/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["networking.k8s.io"]
    resources: ["ingresses", "ingresses/status", "httproutes"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["extensions", "apps"]
    resources: ["deployments", "deployments/status", "statefulsets", "statefulsets/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["rbac.authorization.k8s.io"]
    resources: [ "roles", "roles/status", "rolebindings", "rolebindings/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["batch", "extensions"]
    resources: ["jobs", "jobs/status", "cronjobs", "cronjobs/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["discovery.k8s.io"]
    resources: ["endpointslices"]
    verbs: [get, list, patch, watch]
  - apiGroups: [oda.tmforum.org]
    resources: [publishednotifications, publishednotifications/status, subscribednotifications, subscribednotifications/status]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["httproutes"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  - apiGroups: ["configuration.konghq.com"]
    resources: ["kongplugins"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  - apiGroups: ["apisix.apache.org"]
    resources: ["apisixroutes", "apisixpluginconfigs"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["ingresses"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]


  # Application: other resources it produces and manipulates.
  # Here, we create Jobs+PVCs+Pods, but we do not patch/update/delete them ever.
  - apiGroups: [batch, extensions]
    resources: [jobs]
    verbs: [create]
  - apiGroups: [""]
    resources: [pods, persistentvolumeclaims]
    verbs: [create]

  # Istio services
  - apiGroups: [networking.istio.io]
    resources: [virtualservices]
    verbs: [list, watch, patch, get, create, update, delete]

  # Prometheus servicemonitor
  - apiGroups: [monitoring.coreos.com]
    resources: [servicemonitors]
    verbs: [list, watch, patch, get, create, update, delete]

  # DependentAPI Custom Resources
  - apiGroups: [oda.tmforum.org]
    resources: [dependentapis]
    verbs: [list, watch, patch, get, create, update, delete]
---
# Source: canvas-oda/charts/dependentapi-simple-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-depapi-op-role-cluster
rules:

  # Framework: knowing which other operators are running (i.e. peering).
  - apiGroups: [zalando.org]
    resources: [clusterkopfpeerings]
    verbs: [list, watch, patch, get]

  # Framework: runtime observation of namespaces & CRDs (addition/deletion).
  - apiGroups: [apiextensions.k8s.io]
    resources: [customresourcedefinitions]
    verbs: [list, watch]
  - apiGroups: [""]
    resources: [namespaces]
    verbs: [list, watch]

  # Framework: admission webhook configuration management.
  - apiGroups: [admissionregistration.k8s.io]
    resources: [mutatingwebhookconfigurations]
    verbs: [create, patch]


  # Application: read-only access for watching cluster-wide.
  - apiGroups: [oda.tmforum.org]
    resources: [dependentapis]
    verbs: [list, watch, get, patch]

  - apiGroups: [oda.tmforum.org]
    resources: [components]
    verbs: [list, watch, get, patch]

  - apiGroups: [oda.tmforum.org]
    resources: [exposedapis]
    verbs: [list, watch, get]

  # Application: read-only access for watching cluster-wide.
  - apiGroups: [""]
    resources: [pods]
    verbs: [list, watch, patch, delete]
    
  # Application: read-only access for replica_Set
  - apiGroups: [apps]
    resources: [replicasets]
    verbs: [list, get]

  # Application: read-only access for deployments
  - apiGroups: [apps]
    resources: [deployments]
    verbs: [list, get]

  # Application: create events
  - apiGroups: [""]
    resources: [events]
    verbs: [create]
    
  # Application: create mutating webhooks 
  - apiGroups: [admissionregistration.k8s.io]
    resources: [validatingwebhookconfigurations, mutatingwebhookconfigurations]
    verbs: [create, patch]
---
# Source: canvas-oda/charts/identityconfig-operator-keycloak/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: identityconfig-role-cluster
  labels:
    helm.sh/chart: identityconfig-operator-keycloak-1.2.7
    app.kubernetes.io/name: identityconfig-operator-keycloak
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
rules:

  # Framework: knowing which other operators are running (i.e. peering).
  - apiGroups: [zalando.org]
    resources: [clusterkopfpeerings]
    verbs: [list, watch, patch, get]
  - apiGroups: [zalando.org]
    resources: [kopfpeerings]
    verbs: [list, watch, patch, get]
  - apiGroups: [apiextensions.k8s.io]
    resources: [customresourcedefinitions]
    verbs: [list, watch, get]
    
  # Framework: posting the events about the handlers progress/errors.
  - apiGroups: [events.k8s.io]
    resources: [events]
    verbs: [create]
  - apiGroups: [""]
    resources: [events]
    verbs: [create]

  # Application: read-only access for watching cluster-wide.
  - apiGroups: [oda.tmforum.org]
    resources: [components, components/status]
    verbs: [list, watch, patch, get]
  - apiGroups: [oda.tmforum.org]
    resources: [exposedapis]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: [oda.tmforum.org]
    resources: [secretsmanagements]
    verbs: [list, watch, patch, get, create, update, delete]    
  - apiGroups: [oda.tmforum.org]
    resources: [identityconfigs]
    verbs: [list, watch, patch, get, create, update, delete]    
  - apiGroups: [wso2.com]
    resources: [apis]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: [""] # "" indicates the core API group
    resources: ["services", "services/status", "pods", "persistentvolumeclaims", "persistentvolumeclaims/status", "namespaces", "configmaps", "configmaps/status", "secrets", "secrets/status", "serviceaccounts", "serviceaccounts/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["networking.k8s.io"]
    resources: ["ingresses", "ingresses/status", "httproutes"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["extensions", "apps"]
    resources: ["deployments", "deployments/status", "statefulsets", "statefulsets/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["rbac.authorization.k8s.io"]
    resources: [ "roles", "roles/status", "rolebindings", "rolebindings/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["batch", "extensions"]
    resources: ["jobs", "jobs/status", "cronjobs", "cronjobs/status"]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["discovery.k8s.io"]
    resources: ["endpointslices"]
    verbs: [get, list, patch, watch]
  - apiGroups: [oda.tmforum.org]
    resources: [publishednotifications, publishednotifications/status, subscribednotifications, subscribednotifications/status]
    verbs: [list, watch, patch, get, create, update, delete]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["httproutes"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  - apiGroups: ["configuration.konghq.com"]
    resources: ["kongplugins"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  - apiGroups: ["apisix.apache.org"]
    resources: ["apisixroutes", "apisixpluginconfigs"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  - apiGroups: ["gateway.networking.k8s.io"]
    resources: ["ingresses"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]


  # Application: other resources it produces and manipulates.
  # Here, we create Jobs+PVCs+Pods, but we do not patch/update/delete them ever.
  - apiGroups: [batch, extensions]
    resources: [jobs]
    verbs: [create]
  - apiGroups: [""]
    resources: [pods, persistentvolumeclaims]
    verbs: [create]

  # Istio services
  - apiGroups: [networking.istio.io]
    resources: [virtualservices]
    verbs: [list, watch, patch, get, create, update, delete]

  # Prometheus servicemonitor
  - apiGroups: [monitoring.coreos.com]
    resources: [servicemonitors]
    verbs: [list, watch, patch, get, create, update, delete]

  # DependentAPI Custom Resources
  - apiGroups: [oda.tmforum.org]
    resources: [dependentapis]
    verbs: [list, watch, patch, get, create, update, delete]
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-pdb-management-operator-role
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
rules:
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - availability.oda.tmforum.org
  resources:
  - availabilitypolicies
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - availability.oda.tmforum.org
  resources:
  - availabilitypolicies/finalizers
  verbs:
  - update
- apiGroups:
  - availability.oda.tmforum.org
  resources:
  - availabilitypolicies/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - policy
  resources:
  - poddisruptionbudgets
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-pdb-management-operator-availabilitypolicy-admin-role
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
rules:
- apiGroups:
  - availability.oda.tmforum.org
  resources:
  - availabilitypolicies
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - availability.oda.tmforum.org
  resources:
  - availabilitypolicies/status
  verbs:
  - get
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-pdb-management-operator-availabilitypolicy-editor-role
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
rules:
- apiGroups:
  - availability.oda.tmforum.org
  resources:
  - availabilitypolicies
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - availability.oda.tmforum.org
  resources:
  - availabilitypolicies/status
  verbs:
  - get
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-pdb-management-operator-availabilitypolicy-viewer-role
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
rules:
- apiGroups:
  - availability.oda.tmforum.org
  resources:
  - availabilitypolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - availability.oda.tmforum.org
  resources:
  - availabilitypolicies/status
  verbs:
  - get
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-pdb-management-operator-metrics-auth-role
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
rules:
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-pdb-management-operator-metrics-reader
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
rules:
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
# Source: canvas-oda/charts/resource-inventory/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: resourceinventory-role-cluster
  labels:
    app: canvas-resource-inventory
rules:

  # Application: read-only access for watching cluster-wide.
  - apiGroups: [oda.tmforum.org]
    resources: [components, components/status]
    verbs: [list, get]
  - apiGroups: [oda.tmforum.org]
    resources: [exposedapis]
    verbs: [list, get]
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: canvas-smanop-role-cluster
rules:

  # Framework: knowing which other operators are running (i.e. peering).
  - apiGroups: [zalando.org]
    resources: [clusterkopfpeerings]
    verbs: [list, watch, patch, get]

  # Framework: runtime observation of namespaces & CRDs (addition/deletion).
  - apiGroups: [apiextensions.k8s.io]
    resources: [customresourcedefinitions]
    verbs: [list, watch]
  - apiGroups: [""]
    resources: [namespaces]
    verbs: [list, watch]

  # Framework: admission webhook configuration management.
  - apiGroups: [admissionregistration.k8s.io]
    resources: [mutatingwebhookconfigurations]
    verbs: [create, patch]


  - apiGroups: [oda.tmforum.org]
    resources: [secretsmanagements]
    verbs: [list, watch, get, patch]

  - apiGroups: [oda.tmforum.org]
    resources: [components]
    verbs: [list, watch, get, patch]
    
  # Application: read-only access for watching cluster-wide.
  - apiGroups: [""]
    resources: [pods]
    verbs: [list, watch, patch, delete]
    
  # Application: read-only access for replica_Set
  - apiGroups: [apps]
    resources: [replicasets]
    verbs: [list, get]

  # Application: read-only access for deployments
  - apiGroups: [apps]
    resources: [deployments]
    verbs: [list, get]

  # Application: create events
  - apiGroups: [""]
    resources: [events]
    verbs: [create]
    
  # Application: create mutating webhooks 
  - apiGroups: [admissionregistration.k8s.io]
    resources: [validatingwebhookconfigurations, mutatingwebhookconfigurations]
    verbs: [create, patch]
---
# Source: canvas-oda/charts/api-operator-istio/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: apioperator-rolebinding-cluster
  labels:
    helm.sh/chart: api-operator-istio-1.1.3
    app.kubernetes.io/name: api-operator-istio
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: apioperator-role-cluster
subjects:
  - kind: ServiceAccount
    name: apioperator-account
    namespace: canvas
---
# Source: canvas-oda/charts/canvas-vault/charts/vault/templates/server-clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-vault-hc-server-binding
  labels:
    helm.sh/chart: vault-0.26.1
    app.kubernetes.io/name: vault-hc
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: canvas-vault-hc
  namespace: canvas-vault
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/cainjector-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-cainjector
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-cainjector
subjects:
  - name: canvas-cert-manager-cainjector
    namespace: cert-manager
    kind: ServiceAccount
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-controller-issuers
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-controller-issuers
subjects:
  - name: canvas-cert-manager
    namespace: cert-manager
    kind: ServiceAccount
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-controller-clusterissuers
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-controller-clusterissuers
subjects:
  - name: canvas-cert-manager
    namespace: cert-manager
    kind: ServiceAccount
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-controller-certificates
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-controller-certificates
subjects:
  - name: canvas-cert-manager
    namespace: cert-manager
    kind: ServiceAccount
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-controller-orders
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-controller-orders
subjects:
  - name: canvas-cert-manager
    namespace: cert-manager
    kind: ServiceAccount
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-controller-challenges
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-controller-challenges
subjects:
  - name: canvas-cert-manager
    namespace: cert-manager
    kind: ServiceAccount
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-controller-ingress-shim
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-controller-ingress-shim
subjects:
  - name: canvas-cert-manager
    namespace: cert-manager
    kind: ServiceAccount
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-controller-approve:cert-manager-io
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cert-manager"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-controller-approve:cert-manager-io
subjects:
  - name: canvas-cert-manager
    namespace: cert-manager
    kind: ServiceAccount
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-controller-certificatesigningrequests
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cert-manager"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-controller-certificatesigningrequests
subjects:
  - name: canvas-cert-manager
    namespace: cert-manager
    kind: ServiceAccount
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-cert-manager-webhook:subjectaccessreviews
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-cert-manager-webhook:subjectaccessreviews
subjects:
- apiGroup: ""
  kind: ServiceAccount
  name: canvas-cert-manager-webhook
  namespace: cert-manager
---
# Source: canvas-oda/charts/component-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: odacomponent-rolebinding-cluster
  labels:
    helm.sh/chart: component-operator-1.4.1
    app.kubernetes.io/name: component-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: odacomponent-role-cluster
subjects:
  - kind: ServiceAccount
    name: odacomponent-account
    namespace: canvas
---
# Source: canvas-oda/charts/dependentapi-simple-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-depapi-op-rolebinding-cluster
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-depapi-op-role-cluster
subjects:
  - kind: ServiceAccount
    name: canvas-depapi-op-account
    namespace: "canvas"
---
# Source: canvas-oda/charts/identityconfig-operator-keycloak/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: identityconfig-rolebinding-cluster
  labels:
    helm.sh/chart: identityconfig-operator-keycloak-1.2.7
    app.kubernetes.io/name: identityconfig-operator-keycloak
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: identityconfig-role-cluster
subjects:
  - kind: ServiceAccount
    name: identityconfig-account
    namespace: canvas
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-pdb-management-operator-rolebinding
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-pdb-management-operator-role
subjects:
- kind: ServiceAccount
  name: pdb-management-operator
  namespace: canvas
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-pdb-management-operator-metrics-auth-rolebinding
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-pdb-management-operator-metrics-auth-role
subjects:
- kind: ServiceAccount
  name: pdb-management-operator
  namespace: canvas
---
# Source: canvas-oda/charts/resource-inventory/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: resourceinventory-rolebinding-cluster
  labels:
    app: canvas-resource-inventory
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: resourceinventory-role-cluster
subjects:
  - kind: ServiceAccount
    name: resourceinventory-account
    namespace: canvas
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: canvas-smanop-rolebinding-cluster
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: canvas-smanop-role-cluster
subjects:
  - kind: ServiceAccount
    name: canvas-smanop-account
    namespace: "canvas"
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/cainjector-rbac.yaml
# leader election rules
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: canvas-cert-manager-cainjector:leaderelection
  namespace: kube-system
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  # Used for leader election by the controller
  # cert-manager-cainjector-leader-election is used by the CertificateBased injector controller
  #   see cmd/cainjector/start.go#L113
  # cert-manager-cainjector-leader-election-core is used by the SecretBased injector controller
  #   see cmd/cainjector/start.go#L137
  - apiGroups: ["coordination.k8s.io"]
    resources: ["leases"]
    resourceNames: ["cert-manager-cainjector-leader-election", "cert-manager-cainjector-leader-election-core"]
    verbs: ["get", "update", "patch"]
  - apiGroups: ["coordination.k8s.io"]
    resources: ["leases"]
    verbs: ["create"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: canvas-cert-manager:leaderelection
  namespace: kube-system
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
  - apiGroups: ["coordination.k8s.io"]
    resources: ["leases"]
    resourceNames: ["cert-manager-controller"]
    verbs: ["get", "update", "patch"]
  - apiGroups: ["coordination.k8s.io"]
    resources: ["leases"]
    verbs: ["create"]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: canvas-cert-manager-webhook:dynamic-serving
  namespace: cert-manager
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
rules:
- apiGroups: [""]
  resources: ["secrets"]
  resourceNames:
  - 'canvas-cert-manager-webhook-ca'
  verbs: ["get", "list", "watch", "update"]
# It's not possible to grant CREATE permission on a single resourceName.
- apiGroups: [""]
  resources: ["secrets"]
  verbs: ["create"]
---
# Source: canvas-oda/charts/dependentapi-simple-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: "canvas"
  name: canvas-depapi-op-role-namespaced
rules:

  # Framework: knowing which other operators are running (i.e. peering).
  - apiGroups: [zalando.org]
    resources: [kopfpeerings]
    verbs: [list, watch, patch, get]

  # Framework: posting the events about the handlers progress/errors.
  - apiGroups: [""]
    resources: [events]
    verbs: [create]

  # Application: watching & handling for the custom resource we declare.
  - apiGroups: [oda.tmforum.org]
    resources: [dependentapis]
    verbs: [list, watch, patch, get]

  # Application: watching & handling for the custom resource we declare.
  - apiGroups: [oda.tmforum.org]
    resources: [components]
    verbs: [list, watch, patch, get]

  # Application: watching & handling for the custom resource we declare.
  
  - apiGroups: [oda.tmforum.org]
    resources: [exposedapis]
    verbs: [list, watch, get]

  # Application: watching & handling for the custom resource we declare.
  - apiGroups: [""]
    resources: [pods]
    verbs: [list, watch, patch, delete]

  # Application: read-only access for replica_Set
  - apiGroups: [apps]
    resources: [replicasets]
    verbs: [list, get]


  # Application: watching & handling for deployments (transfer labels to pods).
  - apiGroups: [apps]
    resources: [deployments]
    verbs: [list, watch, patch, get]

  # Application: other resources it produces and manipulates.
  # Here, we create Jobs+PVCs+Pods, but we do not patch/update/delete them ever.
  - apiGroups: [batch, extensions]
    resources: [jobs]
    verbs: [create]
  - apiGroups: [""]
    resources: [pods, persistentvolumeclaims]
    verbs: [create]
    
  ## Application: create mutating webhooks 
  #- apiGroups: [admissionregistration.k8s.io/v1, admissionregistration.k8s.io/v1beta1]
  #  resources: [validatingwebhookconfigurations, mutatingwebhookconfigurations]
  #  verbs: [create, patch]
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: canvas-pdb-management-operator-leader-election-role
  namespace: canvas
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: "canvas"
  name: canvas-smanop-role-namespaced
rules:

  # Framework: knowing which other operators are running (i.e. peering).
  - apiGroups: [zalando.org]
    resources: [kopfpeerings]
    verbs: [list, watch, patch, get]

  # Framework: posting the events about the handlers progress/errors.
  - apiGroups: [""]
    resources: [events]
    verbs: [create]

  # Application: watching & handling for the custom resource we declare.
  - apiGroups: [oda.tmforum.org]
    resources: [secretsmanagements]
    verbs: [list, watch, patch, get]

  # Application: watching & handling for the custom resource we declare.
  - apiGroups: [""]
    resources: [pods]
    verbs: [list, watch, patch, delete]

  # Application: read-only access for replica_Set
  - apiGroups: [apps]
    resources: [replicasets]
    verbs: [list, get]


  # Application: watching & handling for deployments (transfer labels to pods).
  - apiGroups: [apps]
    resources: [deployments]
    verbs: [list, watch, patch, get]

  # Application: other resources it produces and manipulates.
  # Here, we create Jobs+PVCs+Pods, but we do not patch/update/delete them ever.
  - apiGroups: [batch, extensions]
    resources: [jobs]
    verbs: [create]
  - apiGroups: [""]
    resources: [pods, persistentvolumeclaims]
    verbs: [create]
    
  ## Application: create mutating webhooks 
  #- apiGroups: [admissionregistration.k8s.io/v1, admissionregistration.k8s.io/v1beta1]
  #  resources: [validatingwebhookconfigurations, mutatingwebhookconfigurations]
  #  verbs: [create, patch]
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/cainjector-rbac.yaml
# grant cert-manager permission to manage the leaderelection configmap in the
# leader election namespace
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: canvas-cert-manager-cainjector:leaderelection
  namespace: kube-system
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: canvas-cert-manager-cainjector:leaderelection
subjects:
  - kind: ServiceAccount
    name: canvas-cert-manager-cainjector
    namespace: cert-manager
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/rbac.yaml
# grant cert-manager permission to manage the leaderelection configmap in the
# leader election namespace
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: canvas-cert-manager:leaderelection
  namespace: kube-system
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: canvas-cert-manager:leaderelection
subjects:
  - apiGroup: ""
    kind: ServiceAccount
    name: canvas-cert-manager
    namespace: cert-manager
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: canvas-cert-manager-webhook:dynamic-serving
  namespace: cert-manager
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: canvas-cert-manager-webhook:dynamic-serving
subjects:
- apiGroup: ""
  kind: ServiceAccount
  name: canvas-cert-manager-webhook
  namespace: cert-manager
---
# Source: canvas-oda/charts/dependentapi-simple-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  namespace: "canvas"
  name: canvas-depapi-op-rolebinding-namespaced
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: canvas-depapi-op-role-namespaced
subjects:
  - kind: ServiceAccount
    name: canvas-depapi-op-account
---
# Source: canvas-oda/charts/pdb-management-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: canvas-pdb-management-operator-leader-election-rolebinding
  namespace: canvas
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: canvas-pdb-management-operator-leader-election-role
subjects:
- kind: ServiceAccount
  name: pdb-management-operator
  namespace: canvas
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  namespace: "canvas"
  name: canvas-smanop-rolebinding-namespaced
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: canvas-smanop-role-namespaced
subjects:
  - kind: ServiceAccount
    name: canvas-smanop-account
---
# Source: canvas-oda/charts/canvas-info-service/templates/mongodb-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-svcinv-mongodb
  labels:
    app: canvas-svcinv-mongodb
spec:
  ports:
  - port: 27017
    targetPort: svcinv-mongodb
    name: tcp-svcinv-mongodb
  selector:
    app: canvas-svcinv-mongodb
---
# Source: canvas-oda/charts/canvas-info-service/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: info  # do not use canvas-info-service, 
              # because the service has to be accessible under the 
              # fixed endpoint info.canvas.svc.cluster.local
  labels:
    app: canvas-info-service
spec:
  ports:
  - name: http
    port: 80
    targetPort: 8638
  selector:
    app: canvas-info-service
---
# Source: canvas-oda/charts/canvas-vault/charts/vault/templates/server-headless-service.yaml
# Service for Vault cluster
apiVersion: v1
kind: Service
metadata:
  name: canvas-vault-hc-internal
  namespace: canvas-vault
  labels:
    helm.sh/chart: vault-0.26.1
    app.kubernetes.io/name: vault-hc
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    vault-internal: "true"
  annotations:

spec:
  clusterIP: None
  publishNotReadyAddresses: true
  ports:
    - name: "https"
      port: 8200
      targetPort: 8200
    - name: https-internal
      port: 8201
      targetPort: 8201
  selector:
    app.kubernetes.io/name: vault-hc
    app.kubernetes.io/instance: canvas
    component: server
---
# Source: canvas-oda/charts/canvas-vault/charts/vault/templates/server-service.yaml
# Service for Vault cluster
apiVersion: v1
kind: Service
metadata:
  name: canvas-vault-hc
  namespace: canvas-vault
  labels:
    helm.sh/chart: vault-0.26.1
    app.kubernetes.io/name: vault-hc
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
  annotations:

spec:
  # We want the servers to become available even if they're not ready
  # since this DNS is also used for join operations.
  publishNotReadyAddresses: true
  ports:
    - name: https
      port: 8200
      targetPort: 8200
    - name: https-internal
      port: 8201
      targetPort: 8201
  selector:
    app.kubernetes.io/name: vault-hc
    app.kubernetes.io/instance: canvas
    component: server
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-cert-manager
  namespace: cert-manager
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  type: ClusterIP
  ports:
  - protocol: TCP
    port: 9402
    name: tcp-prometheus-servicemonitor
    targetPort: 9402
  selector:
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-cert-manager-webhook
  namespace: cert-manager
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  type: ClusterIP
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: "https"
  selector:
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
---
# Source: canvas-oda/charts/dependentapi-simple-operator/templates/depapi-operator-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-depapi-op-svc
  labels:
    app: canvas-depapi-op
    resource: service
spec:
  ports:
  - name: https
    port: 443
    targetPort: 9443
  selector:
    app: canvas-depapi-op
  sessionAffinity: None
  type: ClusterIP
---
# Source: canvas-oda/charts/identityconfig-operator-keycloak/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: idlistkey
  namespace: canvas
  labels:
    app: identityconfig-operator-keycloak #link service to Pod and not individual container
    helm.sh/chart: identityconfig-operator-keycloak-1.2.7
    app.kubernetes.io/name: identityconfig-operator-keycloak
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
spec:
  ports:
  - port: 5000
    targetPort: idlistkey
    name: idlistkey
  type: NodePort
  selector:
    app: identityconfig-operator-keycloak
---
# Source: canvas-oda/charts/keycloak/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-postgresql-hl
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-12.1.13
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: primary
    # Use this annotation in addition to the actual publishNotReadyAddresses
    # field below because the annotation will stop being respected soon but the
    # field is broken in some versions of Kubernetes:
    # https://github.com/kubernetes/kubernetes/issues/58662
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: primary
---
# Source: canvas-oda/charts/keycloak/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-postgresql
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-12.1.13
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: primary
---
# Source: canvas-oda/charts/keycloak/templates/headless-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-keycloak-headless
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: keycloak
    helm.sh/chart: keycloak-13.0.3
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: keycloak
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: http
      port: 8083
      protocol: TCP
      targetPort: http
    - name: https
      port: 8443
      protocol: TCP
      targetPort: https
  publishNotReadyAddresses: true
  selector:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: keycloak
---
# Source: canvas-oda/charts/keycloak/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-keycloak
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: keycloak
    helm.sh/chart: keycloak-13.0.3
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: keycloak
spec:
  type: LoadBalancer
  externalTrafficPolicy: "Cluster"
  sessionAffinity: None
  ports:
    - name: http
      port: 8083
      protocol: TCP
      targetPort: http
    - name: https
      port: 8443
      protocol: TCP
      targetPort: https
  selector:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: keycloak
---
# Source: canvas-oda/charts/oda-webhook/templates/service-componentcrdwebhook.yaml
apiVersion: v1
kind: Service
metadata:
  name: compcrdwebhook
  namespace: canvas  
  labels:
    helm.sh/chart: oda-webhook-1.2.2
    app.kubernetes.io/name: oda-webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
spec:
  ports:
  - port: 443
    targetPort: 8443
  type: NodePort
  selector:
    app: compcrdwebhook
---
# Source: canvas-oda/charts/pdb-management-operator/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: pdb-management-operator-service
  namespace: canvas
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  selector:
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
  ports:
  - name: https
    port: 443
    targetPort: 8443
    protocol: TCP
  type: ClusterIP
---
# Source: canvas-oda/charts/pdb-management-operator/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-pdb-management-operator-metrics
  namespace: canvas
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  selector:
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
  ports:
  - name: https
    port: 8443
    protocol: TCP
    targetPort: 8080
  type: ClusterIP
---
# Source: canvas-oda/charts/pdb-management-operator/templates/webhook.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-pdb-management-operator-webhook-service
  namespace: canvas
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: 9443
  selector:
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
---
# Source: canvas-oda/charts/resource-inventory/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: resource-inventory  
          # do not use canvas-resource-inventory, 
          # because the service has to be accessible under the 
        
          # fixed endpoint resource-inventory.canvas.svc.cluster.local
  labels:
    app: canvas-resource-inventory
spec:
  type : LoadBalancer
  ports:
  - name: http
    port: 80
    targetPort: 8639
  selector:
    app: canvas-resource-inventory
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/smanop-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: canvas-smanop-svc
  labels:
    app: canvas-smanop
    resource: service
spec:
  ports:
  - name: https
    port: 443
    targetPort: 9443
  selector:
    app: canvas-smanop
  sessionAffinity: None
  type: ClusterIP
---
# Source: canvas-oda/charts/api-operator-istio/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-operator-istio
  namespace: canvas
  labels:
    helm.sh/chart: api-operator-istio-1.1.3
    app.kubernetes.io/name: api-operator-istio
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: api-operator-istio
  template:
    metadata:
      namespace: canvas
      labels:
        app: api-operator-istio
        helm.sh/chart: api-operator-istio-1.1.3
        app.kubernetes.io/name: api-operator-istio
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/version: "v1"
        app.kubernetes.io/managed-by: Helm
    spec:
      serviceAccountName: apioperator-account
      containers:
      - name: api-operator-istio
        image: tmforumodacanvas/api-operator-istio:1.0.1
        imagePullPolicy: IfNotPresent
        envFrom:
          - configMapRef:
              name: api-operator-istio-configmap
        command:
          - "/bin/sh"
        args: 
          - "-c"
          - "kopf run $COMPONENT_NAMESPACES_CLI --verbose /apiOperatorIstio.py"
---
# Source: canvas-oda/charts/canvas-info-service/templates/infoservice-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canvas-info-service
  labels:
    app: canvas-info-service
spec:
  replicas: 1
  selector:
    matchLabels:
      app: canvas-info-service
  template:
    metadata:
      labels:
        app: canvas-info-service
    spec:
      containers:
      - name: canvas-info-service
        image: tmforumodacanvas/tmf638-service-inventory-api:1.0.0
        imagePullPolicy: IfNotPresent
        env:
        - name: SERVER_URL
          value: http://info.canvas.svc.cluster.local
        ports:
        - containerPort: 8638
---
# Source: canvas-oda/charts/canvas-info-service/templates/mongodb-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canvas-svcinv-mongodb
  labels:
    app: canvas-svcinv-mongodb
spec:
  replicas: 1
  selector:
    matchLabels:
      app: canvas-svcinv-mongodb
  template:
    metadata:
      labels:
        app: canvas-svcinv-mongodb
    spec:
      containers:
      - name: canvas-svcinv-mongodb
        image: mongo:6.0
        ports:
        - name: svcinv-mongodb
          containerPort: 27017
        volumeMounts:
        - name: canvas-svcinv-mongodb-pv-storage
          mountPath: "/data/db"
      volumes:
      - name: canvas-svcinv-mongodb-pv-storage
        persistentVolumeClaim:
          claimName: canvas-svcinv-mongodb-pv-claim
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/cainjector-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canvas-cert-manager-cainjector
  namespace: cert-manager
  labels:
    app: cainjector
    app.kubernetes.io/name: cainjector
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "cainjector"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: cainjector
      app.kubernetes.io/instance: canvas
      app.kubernetes.io/component: "cainjector"
  template:
    metadata:
      labels:
        app: cainjector
        app.kubernetes.io/name: cainjector
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/component: "cainjector"
        app.kubernetes.io/version: "v1.11.0"
        app.kubernetes.io/managed-by: Helm
        helm.sh/chart: cert-manager-v1.11.0
    spec:
      serviceAccountName: canvas-cert-manager-cainjector
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: cert-manager-cainjector
          image: "quay.io/jetstack/cert-manager-cainjector:v1.11.0"
          imagePullPolicy: IfNotPresent
          args:
          - --v=2
          - --leader-election-namespace=kube-system
          env:
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canvas-cert-manager
  namespace: cert-manager
  labels:
    app: cert-manager
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "controller"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: cert-manager
      app.kubernetes.io/instance: canvas
      app.kubernetes.io/component: "controller"
  template:
    metadata:
      labels:
        app: cert-manager
        app.kubernetes.io/name: cert-manager
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/component: "controller"
        app.kubernetes.io/version: "v1.11.0"
        app.kubernetes.io/managed-by: Helm
        helm.sh/chart: cert-manager-v1.11.0
      annotations:
        prometheus.io/path: "/metrics"
        prometheus.io/scrape: 'true'
        prometheus.io/port: '9402'
    spec:
      serviceAccountName: canvas-cert-manager
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: cert-manager-controller
          image: "quay.io/jetstack/cert-manager-controller:v1.11.0"
          imagePullPolicy: IfNotPresent
          args:
          - --v=2
          - --cluster-resource-namespace=$(POD_NAMESPACE)
          - --leader-election-namespace=kube-system
          - --acme-http01-solver-image=quay.io/jetstack/cert-manager-acmesolver:v1.11.0
          - --max-concurrent-challenges=60
          ports:
          - containerPort: 9402
            name: http-metrics
            protocol: TCP
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
          env:
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canvas-cert-manager-webhook
  namespace: cert-manager
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: webhook
      app.kubernetes.io/instance: canvas
      app.kubernetes.io/component: "webhook"
  template:
    metadata:
      labels:
        app: webhook
        app.kubernetes.io/name: webhook
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/component: "webhook"
        app.kubernetes.io/version: "v1.11.0"
        app.kubernetes.io/managed-by: Helm
        helm.sh/chart: cert-manager-v1.11.0
    spec:
      serviceAccountName: canvas-cert-manager-webhook
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: cert-manager-webhook
          image: "quay.io/jetstack/cert-manager-webhook:v1.11.0"
          imagePullPolicy: IfNotPresent
          args:
          - --v=2
          - --secure-port=10250
          - --dynamic-serving-ca-secret-namespace=$(POD_NAMESPACE)
          - --dynamic-serving-ca-secret-name=canvas-cert-manager-webhook-ca
          - --dynamic-serving-dns-names=canvas-cert-manager-webhook
          - --dynamic-serving-dns-names=canvas-cert-manager-webhook.$(POD_NAMESPACE)
          - --dynamic-serving-dns-names=canvas-cert-manager-webhook.$(POD_NAMESPACE).svc
          
          ports:
          - name: https
            protocol: TCP
            containerPort: 10250
          - name: healthcheck
            protocol: TCP
            containerPort: 6080
          livenessProbe:
            httpGet:
              path: /livez
              port: 6080
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 1
            successThreshold: 1
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /healthz
              port: 6080
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            timeoutSeconds: 1
            successThreshold: 1
            failureThreshold: 3
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
          env:
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: canvas-oda/charts/component-operator/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: component-operator
  namespace: canvas
  labels:
    helm.sh/chart: component-operator-1.4.1
    app.kubernetes.io/name: component-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: component-operator
  template:
    metadata:
      namespace: canvas
      labels:
        app: component-operator
        helm.sh/chart: component-operator-1.4.1
        app.kubernetes.io/name: component-operator
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/version: "v1"
        app.kubernetes.io/managed-by: Helm
    spec:
      serviceAccountName: odacomponent-account
      containers:
      - name: component-operator
        image: tmforumodacanvas/component-operator:1.1.0
        imagePullPolicy: IfNotPresent
        envFrom:
          - configMapRef:
              name: component-operator-configmap
        command: 
          - "/bin/sh"
        args: 
          - "-c"
          - "kopf run $COMPONENT_NAMESPACES_CLI --verbose /componentOperator/componentOperator.py"
---
# Source: canvas-oda/charts/dependentapi-simple-operator/templates/depapi-operator-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canvas-depapi-op
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: canvas-depapi-op
  template:
    metadata:
      labels:
        app: canvas-depapi-op
    spec:
      serviceAccountName: canvas-depapi-op-account
      containers:
      - name: canvas-depapi-op
        image: tmforumodacanvas/dependentapi-simple-operator:1.0.0
        imagePullPolicy: IfNotPresent
        env:
        - name: LOGGING
          value: "20"
        ports:
        - containerPort: 9443
---
# Source: canvas-oda/charts/identityconfig-operator-keycloak/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: identityconfig-operator-keycloak
  namespace: canvas
  labels:
    helm.sh/chart: identityconfig-operator-keycloak-1.2.7
    app.kubernetes.io/name: identityconfig-operator-keycloak
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: identityconfig-operator-keycloak
  template:
    metadata:
      namespace: canvas
      labels:
        app: identityconfig-operator-keycloak
        helm.sh/chart: identityconfig-operator-keycloak-1.2.7
        app.kubernetes.io/name: identityconfig-operator-keycloak
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/version: "v1"
        app.kubernetes.io/managed-by: Helm
    spec:
      serviceAccountName: identityconfig-account
      containers:
      - name: identityconfig-operator-keycloak
        image: tmforumodacanvas/identityconfig-operator-keycloak:1.1.0
        imagePullPolicy: IfNotPresent
        envFrom:
          - configMapRef:
              name: identityconfig-operator-keycloak-configmap
          - secretRef:
              name: identityconfig-operator-keycloak-secret
        command:
          - "/bin/sh"
        args: 
          - "-c"
          - "kopf run $COMPONENT_NAMESPACES_CLI --verbose /identityOperator/identityConfigOperatorKeycloak.py"
      - name: idlistkey
        image: tmforumodacanvas/identity-listener-keycloak:1.1.0
        imagePullPolicy: IfNotPresent
        envFrom:
          - configMapRef:
              name: identityconfig-operator-keycloak-configmap
          - secretRef:
              name: identityconfig-operator-keycloak-secret
        ports:
        - name: idlistkey
          containerPort: 5000
---
# Source: canvas-oda/charts/oda-webhook/templates/deployment-componentcrdwebhook.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: compcrdwebhook 
  namespace: canvas  
  labels:
    helm.sh/chart: oda-webhook-1.2.2
    app.kubernetes.io/name: oda-webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "v1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: compcrdwebhook 
  template:
    metadata:
      labels:
        app: compcrdwebhook
        helm.sh/chart: oda-webhook-1.2.2
        app.kubernetes.io/name: oda-webhook
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/version: "v1"
        app.kubernetes.io/managed-by: Helm
    spec:
      containers:
      - name: compcrdwebhook 
        image: tmforumodacanvas/compcrdwebhook:1.0.1
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 8443
        volumeMounts:
          - name: secret-volume
            mountPath: /etc/secret-volume
      volumes:
        - name: secret-volume
          secret:
            secretName: compcrdwebhook-secret
---
# Source: canvas-oda/charts/pdb-management-operator/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canvas-pdb-management-operator
  namespace: canvas
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 2
  selector:
    matchLabels:
      app.kubernetes.io/name: pdb-management-operator
      app.kubernetes.io/instance: canvas
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 0
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/default-container: manager
      labels:
        app.kubernetes.io/name: pdb-management-operator
        app.kubernetes.io/instance: canvas
    spec:
      serviceAccountName: pdb-management-operator
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
      - name: manager
        image: tmforumodacanvas/pdb-management-operator:1.0.0
        imagePullPolicy: IfNotPresent
        command:
        - /manager
        args:
        - --leader-elect
        - --health-probe-bind-address=0.0.0.0:8081
        - --metrics-bind-address=0.0.0.0:8080
        - --log-level=info
        - --enable-webhook=true
        - --enable-tracing=false
        ports:
        - containerPort: 9443
          name: webhook-server
          protocol: TCP
        - containerPort: 8080
          name: metrics
          protocol: TCP
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          capabilities:
            drop:
            - "ALL"
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8081
          initialDelaySeconds: 15
          periodSeconds: 20
        readinessProbe:
          httpGet:
            path: /readyz
            port: 8081
          initialDelaySeconds: 5
          periodSeconds: 10
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 100m
            memory: 256Mi
        env:
        - name: ENABLE_PDB
          value: "true"
        - name: DEFAULT_NAMESPACE
          value: "default"
        - name: METRICS_NAMESPACE
          value: "canvas"
        - name: LEADER_ELECTION_NAMESPACE
          value: "canvas"
        volumeMounts:
        - mountPath: /tmp/k8s-webhook-server/serving-certs
          name: cert
          readOnly: true
      volumes:
      - name: cert
        secret:
          defaultMode: 420
          secretName: canvas-pdb-management-operator-webhook-server-cert
      terminationGracePeriodSeconds: 10
---
# Source: canvas-oda/charts/resource-inventory/templates/resource-inventory-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canvas-resource-inventory
  labels:
    app: canvas-resource-inventory
spec:
  replicas: 1
  selector:
    matchLabels:
      app: canvas-resource-inventory
  template:
    metadata:
      labels:
        app: canvas-resource-inventory
    spec:
      serviceAccountName: resourceinventory-account
      containers:
      - name: canvas-resource-inventory
        image: tmforumodacanvas/tmf639-resource-inventory-api:1.0.0
        imagePullPolicy: IfNotPresent
        env:
        - name: SERVER_URL
          value: http://resource-inventory.canvas.svc.cluster.local/tmf-api/resourceInventoryManagement/v5
        ports:
        - containerPort: 8639
---
# Source: canvas-oda/charts/secretsmanagement-operator/templates/smanop-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canvas-smanop
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: canvas-smanop
  template:
    metadata:
      labels:
        app: canvas-smanop
    spec:
      serviceAccountName: canvas-smanop-account
      containers:
      - name: canvas-smanop
        image: tmforumodacanvas/secretsmanagement-operator-vault:1.0.0
        imagePullPolicy: IfNotPresent
        env:
        - name: LOGGING
          value: "20"

        - name: VAULT_ADDR
          value: "https://canvas-vault-hc.canvas-vault.svc.cluster.local:8200"
        - name: VAULT_SKIP_VERIFY
          value: "true"
        - name: AUTH_PATH
          value: "jwt-k8s-sman"
        - name: LOGIN_ROLE_TPL
          value: "sman-{0}-role"
        - name: POLICY_NAME_TPL
          value: "sman-{0}-policy"
        - name: SECRETS_MOUNT_TPL
          value: "kv-sman-{0}"
        - name: SECRETS_BASE_PATH_TPL
          value: "sidecar"
        - name: AUDIENCE
          valueFrom:
            configMapKeyRef:
              name: canvas-sman-autodetect 
              key: issuer
        - name: SIDECAR_IMAGE
          value: "tmforumodacanvas/secretsmanagement-sidecar:0.1.0"
        - name: SIDECAR_IMAGEPULLPOLICY
          value: "IfNotPresent"
        
        
        - name: HVAC_TOKEN
          valueFrom:
            secretKeyRef:
              name: "canvas-vault-hc-secrets"
              key: "rootToken"
        
        - name: WEBHOOK_SERVICE_NAME
          value: "canvas-smanop-svc"
        - name: WEBHOOK_SERVICE_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: WEBHOOK_SERVICE_PORT
          value: "443"
        ports:
        - containerPort: 9443
---
# Source: canvas-oda/charts/canvas-vault/charts/vault/templates/server-statefulset.yaml
# StatefulSet to run the actual vault server cluster.
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: canvas-vault-hc
  namespace: canvas-vault
  labels:
    app.kubernetes.io/name: vault-hc
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
spec:
  serviceName: canvas-vault-hc-internal
  podManagementPolicy: Parallel
  replicas: 1
  updateStrategy:
    type: OnDelete
  selector:
    matchLabels:
      app.kubernetes.io/name: vault-hc
      app.kubernetes.io/instance: canvas
      component: server
  template:
    metadata:
      labels:
        helm.sh/chart: vault-0.26.1
        app.kubernetes.io/name: vault-hc
        app.kubernetes.io/instance: canvas
        component: server
    spec:
      
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: vault-hc
                  app.kubernetes.io/instance: "canvas"
                  component: server
              topologyKey: kubernetes.io/hostname
  
      
      
      
      terminationGracePeriodSeconds: 10
      serviceAccountName: canvas-vault-hc
      
      securityContext:
        fsGroup: 1000
        runAsGroup: 1000
        runAsNonRoot: true
        runAsUser: 100
        supplementalGroups:
        - 1000
      hostNetwork: false
      volumes:
        
        - name: config
          configMap:
            name: canvas-vault-hc-config
  
        - emptyDir: {}
          name: tmpvol
        - name: userconfig-canvasvault-tls
          secret:
            defaultMode: 420
            secretName: canvasvault-tls
        - name: home
          emptyDir: {}
      containers:
        - name: vault
          
          image: hashicorp/vault:1.14.8
          imagePullPolicy: IfNotPresent
          command:
          - "/bin/sh"
          - "-ec"
          args: 
          - |
            cp /vault/config/extraconfig-from-values.hcl /tmp/storageconfig.hcl;
            [ -n "${HOST_IP}" ] && sed -Ei "s|HOST_IP|${HOST_IP?}|g" /tmp/storageconfig.hcl;
            [ -n "${POD_IP}" ] && sed -Ei "s|POD_IP|${POD_IP?}|g" /tmp/storageconfig.hcl;
            [ -n "${HOSTNAME}" ] && sed -Ei "s|HOSTNAME|${HOSTNAME?}|g" /tmp/storageconfig.hcl;
            [ -n "${API_ADDR}" ] && sed -Ei "s|API_ADDR|${API_ADDR?}|g" /tmp/storageconfig.hcl;
            [ -n "${TRANSIT_ADDR}" ] && sed -Ei "s|TRANSIT_ADDR|${TRANSIT_ADDR?}|g" /tmp/storageconfig.hcl;
            [ -n "${RAFT_ADDR}" ] && sed -Ei "s|RAFT_ADDR|${RAFT_ADDR?}|g" /tmp/storageconfig.hcl;
            /usr/local/bin/docker-entrypoint.sh vault server -config=/tmp/storageconfig.hcl 
   
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
          env:
            - name: HOST_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
            - name: VAULT_K8S_POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: VAULT_K8S_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: VAULT_ADDR
              value: "https://127.0.0.1:8200"
            - name: VAULT_API_ADDR
              value: "https://$(POD_IP):8200"
            - name: SKIP_CHOWN
              value: "true"
            - name: SKIP_SETCAP
              value: "true"
            - name: HOSTNAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: VAULT_CLUSTER_ADDR
              value: "https://$(HOSTNAME).canvas-vault-hc-internal:8201"
            - name: HOME
              value: "/home/vault"
            
            
            - name: "VAULT_CACERT"
              value: "/vault/userconfig/canvasvault-tls/ca.crt"
            - name: "VAULT_TLSCERT"
              value: "/vault/userconfig/canvasvault-tls/tls.crt"
            - name: "VAULT_TLSKEY"
              value: "/vault/userconfig/canvasvault-tls/tls.key"
            
          volumeMounts:
          
  
    
            - name: data
              mountPath: /vault/data
    
  
  
            - name: config
              mountPath: /vault/config
  
            - mountPath: /tmp
              name: tmpvol
            - mountPath: /vault/userconfig/canvasvault-tls
              name: userconfig-canvasvault-tls
              readOnly: true
            - name: home
              mountPath: /home/vault
          ports:
            - containerPort: 8200
              name: https
            - containerPort: 8201
              name: https-internal
            - containerPort: 8202
              name: https-rep
          readinessProbe:
            # Check status; unsealed vault servers return 0
            # The exit code reflects the seal status:
            #   0 - unsealed
            #   1 - error
            #   2 - sealed
            exec:
              command: ["/bin/sh", "-ec", "vault status -tls-skip-verify"]
            failureThreshold: 2
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          lifecycle:
            # Vault container doesn't receive SIGTERM from Kubernetes
            # and after the grace period ends, Kube sends SIGKILL.  This
            # causes issues with graceful shutdowns such as deregistering itself
            # from Consul (zombie services).
            preStop:
              exec:
                command: [
                  "/bin/sh", "-c",
                  # Adding a sleep here to give the pod eviction a
                  # chance to propagate, so requests will not be made
                  # to this pod while it's terminating
                  "sleep 5 && kill -SIGTERM $(pidof vault)",
                ]
      
  
  volumeClaimTemplates:
    - metadata:
        name: data
      
      spec:
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 128M
---
# Source: canvas-oda/charts/keycloak/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: canvas-postgresql
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-12.1.13
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: canvas-postgresql-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/instance: canvas
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: canvas-postgresql
      labels:
        app.kubernetes.io/name: postgresql
        helm.sh/chart: postgresql-12.1.13
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: primary
    spec:
      serviceAccountName: default
      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/name: postgresql
                    app.kubernetes.io/instance: canvas
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: docker.io/bitnamilegacy/postgresql:15.2.0-debian-11-r31
          imagePullPolicy: "IfNotPresent"
          securityContext:
            runAsUser: 1001
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_USER
              value: "keycloak"
            - name: POSTGRES_POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: canvas-postgresql
                  key: postgres-password
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: canvas-postgresql
                  key: password
            - name: POSTGRES_DB
              value: "keycloak"
            # Replication
            # Initdb
            # Standby
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "keycloak" -d "dbname=keycloak" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                
                - |
                  exec pg_isready -U "keycloak" -d "dbname=keycloak" -h 127.0.0.1 -p 5432
          resources:
            limits: {}
            requests:
              cpu: 250m
              memory: 256Mi
          volumeMounts:
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: canvas-oda/charts/keycloak/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: canvas-keycloak
  namespace: "canvas"
  labels:
    app.kubernetes.io/name: keycloak
    helm.sh/chart: keycloak-13.0.3
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: keycloak
spec:
  replicas: 1
  podManagementPolicy: Parallel
  serviceName: canvas-keycloak-headless
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels: 
      app.kubernetes.io/name: keycloak
      app.kubernetes.io/instance: canvas
      app.kubernetes.io/component: keycloak
  template:
    metadata:
      annotations:
        checksum/configmap-env-vars: 1e90363f17af32f8094bed0a5d9a14e40f1754a1c06e7addeca0441b6130953e
        checksum/secrets: 551d81e08aa3a9f43529cec9565430751e7f7bb5ec524855bd38f092993d830c
      labels:
        app.kubernetes.io/name: keycloak
        helm.sh/chart: keycloak-13.0.3
        app.kubernetes.io/instance: canvas
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: keycloak
    spec:
      serviceAccountName: canvas-keycloak
      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/name: keycloak
                    app.kubernetes.io/instance: canvas
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
      initContainers:
      containers:
        - name: keycloak
          image: docker.io/bitnamilegacy/keycloak:20.0.5-debian-11-r2
          imagePullPolicy: IfNotPresent
          securityContext:
            runAsNonRoot: true
            runAsUser: 1001
          env:
            - name: KUBERNETES_NAMESPACE
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.namespace
            - name: BITNAMI_DEBUG
              value: "false"
            - name: KEYCLOAK_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: canvas-keycloak
                  key: admin-password
            - name: KEYCLOAK_DATABASE_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: canvas-postgresql
                  key: password
            - name: KEYCLOAK_HTTP_RELATIVE_PATH
              value: "/auth/"
          envFrom:
            - configMapRef:
                name: canvas-keycloak-env-vars
          resources:
            limits: {}
            requests: {}
          ports:
            - name: http
              containerPort: 8083
              protocol: TCP
            - name: https
              containerPort: 8443
              protocol: TCP
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 300
            periodSeconds: 1
            successThreshold: 1
            timeoutSeconds: 5
            httpGet:
              path: /auth/
              port: http
          readinessProbe:
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
            httpGet:
              path: /auth/realms/master
              port: http
          volumeMounts:
            - name: certificates
              mountPath: /opt/bitnami/keycloak/certs
              readOnly: true
      volumes:
        - name: certificates
          secret:
            secretName: canvas-keycloak-crt
            defaultMode: 420
---
# Source: canvas-oda/charts/canvas-vault/templates/autounseal-cronjob.yaml
apiVersion: batch/v1
kind: CronJob
metadata:
  namespace: canvas-vault
  name: canvas-vault-hc-cronjob
spec:
  schedule: "*/1 * * * *"   # "At every 5th minute." (crontab.guru)
  successfulJobsHistoryLimit: 0
  failedJobsHistoryLimit: 1
  jobTemplate:
    spec:
      ttlSecondsAfterFinished: 3600
      template:
        spec:
          containers:
          - name: autounsealvault
            # TODO[FH] remove suffix before merging to master/main
            image: tmforumodacanvas/baseimage-kubectl-curl:1.30.5
            imagePullPolicy: IfNotPresent
            env:
            - name: VAULT_ADDR
              value: "https://canvas-vault-hc.canvas-vault.svc.cluster.local:8200"
            - name: UNSEAL_KEY1
              valueFrom:
                secretKeyRef:
                  name: canvas-vault-hc-secrets
                  key: unsealKey1
            command: ["/bin/sh"]
            args: ["-c", "echo Vault Autounseal Job starting for $VAULT_ADDR;
            date -Iseconds;
            STATUS_JSON=$(curl -k -s -H 'X-Vault-Request:true'  $VAULT_ADDR/v1/sys/seal-status || true);
            echo --- STATUS ---;
            echo $STATUS_JSON | jq .;
            if echo $STATUS_JSON | jq -e '.initialized == true' >/dev/null;
            then
              if  echo $STATUS_JSON | jq -e '.sealed == true' >/dev/null;
              then
                echo Vault is sealed, unsealing;
                curl -k -s -X PUT -H 'X-Vault-Request:true' -d \"{\\\"key\\\":\\\"$UNSEAL_KEY1\\\",\\\"reset\\\":false,\\\"migrate\\\":false}\" $VAULT_ADDR/v1/sys/unseal | jq .;
              else
                echo alreayd unsealed, nothing to do;
              fi;
            else
              echo 'Vault not initialized';
              exit 3;
            fi;
            date -Iseconds;
            echo finished"]
          restartPolicy: Never
      backoffLimit: 0
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-mutating-webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: canvas-cert-manager-webhook
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
  annotations:
    cert-manager.io/inject-ca-from-secret: "cert-manager/canvas-cert-manager-webhook-ca"
webhooks:
  - name: webhook.cert-manager.io
    rules:
      - apiGroups:
          - "cert-manager.io"
          - "acme.cert-manager.io"
        apiVersions:
          - "v1"
        operations:
          - CREATE
          - UPDATE
        resources:
          - "*/*"
    admissionReviewVersions: ["v1"]
    # This webhook only accepts v1 cert-manager resources.
    # Equivalent matchPolicy ensures that non-v1 resource requests are sent to
    # this webhook (after the resources have been converted to v1).
    matchPolicy: Equivalent
    timeoutSeconds: 10
    failurePolicy: Fail
    # Only include 'sideEffects' field in Kubernetes 1.12+
    sideEffects: None
    clientConfig:
      service:
        name: canvas-cert-manager-webhook
        namespace: cert-manager
        path: /mutate
---
# Source: canvas-oda/charts/pdb-management-operator/templates/webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: canvas-pdb-management-operator-availabilitypolicy-mutating-webhook-configuration
  annotations:
    cert-manager.io/inject-ca-from: canvas/canvas-pdb-management-operator-serving-cert
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
webhooks:
- name: availabilitypolicy.availability.oda.tmforum.org
  rules:
  - apiGroups: ["availability.oda.tmforum.org"]
    apiVersions: ["v1alpha1"]
    operations: ["CREATE", "UPDATE"]
    resources: ["availabilitypolicies"]
    scope: "Namespaced"
  clientConfig:
    service:
      namespace: canvas
      name: canvas-pdb-management-operator-webhook-service
      path: /mutate-availability-oda-tmforum-org-v1alpha1-availabilitypolicy
      port: 443
  admissionReviewVersions: ["v1"]
  sideEffects: None
  timeoutSeconds: 10
  failurePolicy: Fail
---
# Source: canvas-oda/charts/cert-manager-init/charts/cert-manager/templates/webhook-validating-webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: canvas-cert-manager-webhook
  labels:
    app: webhook
    app.kubernetes.io/name: webhook
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/component: "webhook"
    app.kubernetes.io/version: "v1.11.0"
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: cert-manager-v1.11.0
  annotations:
    cert-manager.io/inject-ca-from-secret: "cert-manager/canvas-cert-manager-webhook-ca"
webhooks:
  - name: webhook.cert-manager.io
    namespaceSelector:
      matchExpressions:
      - key: "cert-manager.io/disable-validation"
        operator: "NotIn"
        values:
        - "true"
      - key: "name"
        operator: "NotIn"
        values:
        - cert-manager
    rules:
      - apiGroups:
          - "cert-manager.io"
          - "acme.cert-manager.io"
        apiVersions:
          - "v1"
        operations:
          - CREATE
          - UPDATE
        resources:
          - "*/*"
    admissionReviewVersions: ["v1"]
    # This webhook only accepts v1 cert-manager resources.
    # Equivalent matchPolicy ensures that non-v1 resource requests are sent to
    # this webhook (after the resources have been converted to v1).
    matchPolicy: Equivalent
    timeoutSeconds: 10
    failurePolicy: Fail
    sideEffects: None
    clientConfig:
      service:
        name: canvas-cert-manager-webhook
        namespace: cert-manager
        path: /validate
---
# Source: canvas-oda/charts/pdb-management-operator/templates/webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: canvas-pdb-management-operator-availabilitypolicy-validating-webhook-configuration
  annotations:
    cert-manager.io/inject-ca-from: canvas/canvas-pdb-management-operator-serving-cert
  labels:
    helm.sh/chart: pdb-management-operator-0.1.0
    app.kubernetes.io/name: pdb-management-operator
    app.kubernetes.io/instance: canvas
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
webhooks:
- name: availabilitypolicy.availability.oda.tmforum.org
  rules:
  - apiGroups: ["availability.oda.tmforum.org"]
    apiVersions: ["v1alpha1"]
    operations: ["CREATE", "UPDATE"]
    resources: ["availabilitypolicies"]
    scope: "Namespaced"
  clientConfig:
    service:
      namespace: canvas
      name: canvas-pdb-management-operator-webhook-service
      path: /validate-availability-oda-tmforum-org-v1alpha1-availabilitypolicy
      port: 443
  admissionReviewVersions: ["v1"]
  sideEffects: None
  timeoutSeconds: 10
  failurePolicy: Fail

